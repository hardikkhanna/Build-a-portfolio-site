if (self.CavalryLogger) { CavalryLogger.start_js(["wN8JK"]); }

__d("FundsAvailability",[],(function a(b,c,d,e,f,g){f.exports={NONE:0,FUNDS_AVAILABILITY_NA:65,FUNDS_AVAILABILITY_IMMEDIATE:73,FUNDS_AVAILABILITY_SAME_DAY:83,FUNDS_AVAILABILITY_NEXT_DAY:78,FUNDS_AVAILABILITY_FIVE_DAY:70,FUNDS_AVAILABILITY_UNKNOWN:85,FUNDS_AVAILABILITY_ONE_THREE_DAY:79,FUNDS_AVAILABILITY_CROSS_BORDER:66,FUNDS_AVAILABILITY_CROSS_BORDER_FAST_FUNDS:67,FUNDS_AVAILABILITY_DOMESTIC:68,FUNDS_AVAILABILITY_DOMESTIC_FAST_FUNDS:69}}),null);
__d("VideoBroadcastStatus",[],(function a(b,c,d,e,f,g){f.exports={PREVIEW:"PREVIEW",LIVE:"LIVE",LIVE_STOPPED:"LIVE_STOPPED",VOD_READY:"VOD_READY",SEAL_STARTED:"SEAL_STARTED",SCHEDULED_PREVIEW:"SCHEDULED_PREVIEW",SCHEDULED_LIVE:"SCHEDULED_LIVE",SCHEDULED_EXPIRED:"SCHEDULED_EXPIRED",SCHEDULED_CANCELED:"SCHEDULED_CANCELED",PRE_LIVE:"PRE_LIVE"}}),null);
__d("AjaxRequest",["ErrorUtils","Keys","PHPQuerySerializer","TimeSlice","URI","UserAgent_DEPRECATED","ZeroRewrites","setTimeoutAcrossTransitions"],(function a(b,c,d,e,f,g){__p&&__p();function h(l,m,n){if(!(m instanceof c("URI")))m=new(c("URI"))(m);this.xhr=c("ZeroRewrites").getTransportBuilderForURI(m)();if(n&&l=="GET")m.setQueryData(n);else this._params=n;this.method=l;this.uri=m;this.xhr.open(l,m)}var i=window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest();h.supportsCORS=function(){return i};h.ERROR="ar:error";h.TIMEOUT="ar:timeout";h.PROXY_ERROR="ar:proxy error";h.TRANSPORT_ERROR="ar:transport error";h.SERVER_ERROR="ar:http error";h.PARSE_ERROR="ar:parse error";h.SERVICE_UNAVAILABLE="ar:noservice";h._inflight=[];function j(){var l=h._inflight;h._inflight=[];l.forEach(function(m){m.abort()})}function k(l){l.onJSON=l.onError=l.onSuccess=null;clearTimeout(l._timer);if(l.xhr&&l.xhr.readyState<4){l.xhr.abort();l.xhr=null}h._inflight=h._inflight.filter(function(m){return m&&m!=l&&m.xhr&&m.xhr.readyState<4})}Object.assign(h.prototype,{timeout:6e4,streamMode:true,prelude:/^for \(;;\);/,status:null,_eol:-1,_call:function l(m){if(this[m])this[m](this)},_parseStatus:function l(){__p&&__p();var m;try{this.status=this.xhr.status;m=this.xhr.statusText}catch(n){if(this.xhr.readyState>=4){this.errorType=h.TRANSPORT_ERROR;this.errorText=n.message}return}if(this.status===0&&!/^(file|ftp)/.test(this.uri))this.errorType=h.TRANSPORT_ERROR;else if(this.status>=100&&this.status<200)this.errorType=h.PROXY_ERROR;else if(this.status>=200&&this.status<300)return;else if(this.status>=300&&this.status<400)this.errorType=h.PROXY_ERROR;else if(this.status>=400&&this.status<500)this.errorType=h.SERVER_ERROR;else if(this.status===503)this.errorType=h.SERVICE_UNAVAILABLE;else if(this.status>500&&this.status<600)this.errorType=h.PROXY_ERROR;else if(this.status==1223)return;else if(this.status>=12001&&this.status<=12156)this.errorType=h.TRANSPORT_ERROR;else{m="unrecognized status code: "+this.status;this.errorType=h.ERROR}if(!this.errorText)this.errorText=m},_parseResponse:function l(){__p&&__p();var m,n=this.xhr.readyState;try{m=this.xhr.responseText||""}catch(o){if(n>=4){this.errorType=h.ERROR;this.errorText="responseText not available - "+o.message}return}while(this.xhr){var p=this._eol+1,q=this.streamMode?m.indexOf("\n",p):m.length;if(q<0&&n==4)q=m.length;if(q<=this._eol)break;var r=m;if(this.streamMode)r=m.substr(p,q-p).replace(/^\s*|\s*$/g,"");if(p===0&&this.prelude)if(this.prelude.test(r))r=r.replace(this.prelude,"");this._eol=q;if(r){try{this.json=JSON.parse(r)}catch(o){var s=/(<body[\S\s]+?<\/body>)/i.test(m)&&RegExp.$1,t={message:o.message,"char":p,excerpt:(p===0&&s||r).substr(512)};this.errorType=h.PARSE_ERROR;this.errorText="parse error - "+JSON.stringify(t);return}c("ErrorUtils").applyWithGuard(this._call,this,["onJSON"])}}},_onReadyState:function l(m){__p&&__p();var n=this.xhr&&this.xhr.readyState||0;if(this.status==null&&n>=2)this._parseStatus();if(!this.errorType&&this.status!=null)if(n==3&&this.streamMode||n==4)m(this._parseResponse.bind(this));if(this.errorType||n==4){this._time=Date.now()-this._sentAt;m.last(function(){this._call(!this.errorType?"onSuccess":"onError");k(this)}.bind(this))}},send:function l(m){__p&&__p();var n=c("TimeSlice").getReusableContinuation("AjaxRequest xhr.onreadystatechange");this.xhr.onreadystatechange=this._onReadyState.bind(this,n);var o=this.timeout;if(o)this._timer=c("setTimeoutAcrossTransitions")(function(){this.errorType=h.TIMEOUT;this.errorText="timeout";this._time=Date.now()-this._sentAt;this._call("onError");k(this)}.bind(this),o);h._inflight.push(this);if(this.method=="POST")this.xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded");this._sentAt=Date.now();this.xhr.send(m?c("PHPQuerySerializer").serialize(m):"")},abort:function l(){k(this)},toString:function l(){var m="[AjaxRequest readyState="+this.xhr.readyState;if(this.errorType)m+=" errorType="+this.errorType+" ("+this.errorText+")";return m+"]"},toJSON:function l(){var m={json:this.json,status:this.status,errorType:this.errorType,errorText:this.errorText,time:this._time};if(this.errorType)m.uri=this.uri;for(var n in m)if(m[n]==null)delete m[n];return m}});if(window.addEventListener&&c("UserAgent_DEPRECATED").firefox())window.addEventListener("keydown",function(event){if(event.keyCode===c("Keys").ESC)event.prevent()},false);if(window.attachEvent)window.attachEvent("onunload",j);f.exports=h}),null);
__d("ChannelSubdomain",["Event","JSLogger","Run","LogHistory","setTimeoutAcrossTransitions","WebStorage"],(function a(b,c,d,e,f,g){__p&&__p();var h=c("LogHistory").getInstance("channel"),i=c("JSLogger").create("channel"),j="channel_sub:",k=7,l=100*1e3,m=null,n;function o(){var q=c("WebStorage").getLocalStorage();if(n){clearTimeout(n);n=null}if(q&&m!=null)q.removeItem(j+m);m=null}function p(q,r,s){__p&&__p();var t,u=(q-1)*k;if(s){if(n)clearTimeout(n);m=n=null}if(r==null)r=Math.floor(Math.random()*u);if(m==null){var v,w,x,y,z,A,B;(function(){__p&&__p();var C=c("WebStorage").getLocalStorage();if(C){v=[];for(w=0;w<C.length;w++){x=C.key(w);if(x.indexOf(j)===0){y=parseInt(x.substr(j.length),10);v[y]=parseInt(C.getItem(x),10)}}z=Date.now()-l;for(w=0;w<u;w++){A=(w+r)%u;if(!v[A]||v[A]<z){m=A;break}}if(m!=null){B=function D(){try{C.setItem(j+m,Date.now())}catch(E){h.warn("subdomain set failed",E.message)}n=c("setTimeoutAcrossTransitions")(B,l/2)};B()}else{h.warn("no channel subdomain",v);i.error("subdomain_overflow")}if(typeof window.onpageshow!="undefined")c("Event").listen(window,"pagehide",o);else c("Run").onUnload(o)}else m=r})()}return m==null?null:m%k}f.exports={allocate:p,clear:o}}),null);
__d("ChatproxyClientErrorsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:ChatproxyClientErrorsLoggerConfig",this.$ChatproxyClientErrorsTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:ChatproxyClientErrorsLoggerConfig",this.$ChatproxyClientErrorsTypedLogger1,c("Banzai").VITAL)};h.prototype.logImmediately=function(){c("GeneratedLoggerUtils").log("logger:ChatproxyClientErrorsLoggerConfig",this.$ChatproxyClientErrorsTypedLogger1,{signal:true})};h.prototype.clear=function(){this.$ChatproxyClientErrorsTypedLogger1={};return this};h.prototype.getData=function(){return babelHelpers["extends"]({},this.$ChatproxyClientErrorsTypedLogger1)};h.prototype.updateData=function(j){this.$ChatproxyClientErrorsTypedLogger1=babelHelpers["extends"]({},this.$ChatproxyClientErrorsTypedLogger1,j);return this};h.prototype.setAppVersion=function(j){this.$ChatproxyClientErrorsTypedLogger1.app_version=j;return this};h.prototype.setErrorMessage=function(j){this.$ChatproxyClientErrorsTypedLogger1.error_message=j;return this};h.prototype.setErrorReason=function(j){this.$ChatproxyClientErrorsTypedLogger1.error_reason=j;return this};h.prototype.setErrorText=function(j){this.$ChatproxyClientErrorsTypedLogger1.error_text=j;return this};h.prototype.setSessionID=function(j){this.$ChatproxyClientErrorsTypedLogger1.session_id=j;return this};h.prototype.setStatusCode=function(j){this.$ChatproxyClientErrorsTypedLogger1.status_code=j;return this};h.prototype.setSubscriberID=function(j){this.$ChatproxyClientErrorsTypedLogger1.subscriber_id=j;return this};h.prototype.setTopicPrefixes=function(j){this.$ChatproxyClientErrorsTypedLogger1.topic_prefixes=c("GeneratedLoggerUtils").serializeVector(j);return this};h.prototype.setTopics=function(j){this.$ChatproxyClientErrorsTypedLogger1.topics=c("GeneratedLoggerUtils").serializeVector(j);return this};h.prototype.setURL=function(j){this.$ChatproxyClientErrorsTypedLogger1.url=j;return this};var i={app_version:true,error_message:true,error_reason:true,error_text:true,session_id:true,status_code:true,subscriber_id:true,topic_prefixes:true,topics:true,url:true};f.exports=h}),null);
__d("DocRPC",["ErrorUtils"],(function a(b,c,d,e,f,g){__p&&__p();var h={_apis:{},_dispatch:function i(j){__p&&__p();var k;try{j=JSON.parse(j)}catch(l){throw new Error('DocRPC unparsable dispatch: "'+j+'"')}if(Object.prototype.hasOwnProperty.call(h._apis,j.api)){var m=h._apis[j.api];if(m[j.method])k=c("ErrorUtils").applyWithGuard(m[j.method],m,j.args)}if(k===undefined)k=null;return JSON.stringify(k)},publish:function i(j,k){h._apis[k]=j},proxy:function i(j,k,l){__p&&__p();var i={};l.forEach(function(m){__p&&__p();i[m]=function(){__p&&__p();var n={api:k,method:m,args:Array.prototype.slice.call(arguments)},o;try{if(j.closed)throw new Error("DocRPC window closed");o=j.DocRPC._dispatch(JSON.stringify(n))}catch(p){c("ErrorUtils").reportError(p);return}if(typeof o=="string")try{o=JSON.parse(o)}catch(p){throw new Error("DocRPC "+k+"."+m+' unparsable return: "'+o+'"')}return o}});return i}};f.exports=b.DocRPC=h}),null);
__d("ChannelTransport",["AjaxRequest","ChannelConstants","DocRPC","LogHistory","TimeSlice","URI","bind","setTimeoutAcrossTransitions","BanzaiODS","ChatproxyClientErrorsTypedLogger"],(function a(b,c,d,e,f,g){__p&&__p();var h=c("LogHistory").getInstance("channel");function i(v){__p&&__p();var w=new(c("ChatproxyClientErrorsTypedLogger"))();w.setStatusCode(v.status);if(v.xhr!=null){var x=v.xhr.getResponseHeader("x-fb-chat-failure-reason");if(x)w.setErrorReason(x)}w.setErrorMessage(v.errorType);if(v.uri!==undefined)w.setURL(v.uri.getPath());w.log()}function j(){return(1048576*Math.random()|0).toString(36)}function k(v){return v!==null&&v!==undefined&&!isNaN(v)&&isFinite(v)&&0<=v&&v<=6}function l(v,w){var x="";if(k(v.subdomain))x=v.subdomain+"-";var y=v.host;y=y===null||y===undefined?"edge-chat":v.host;var z=new(c("URI"))(w).setDomain(x+y+"."+v.domain).setPort(v.port).setSecure(new(c("URI"))(window.location.href).isSecure());return z}function m(v){__p&&__p();var w={partition:v.partition,cb:j(),failure:v.pingFailuresOnSubdomain};if(v.sticky_token)w.sticky_token=v.sticky_token;if(v.sticky_pool)w.sticky_pool=v.sticky_pool;var x=l(v,"/p").setQueryData(w);h.log("start_p",{uri:x.toString()});var y=new(c("AjaxRequest"))("GET",x);if(c("AjaxRequest").supportsCORS())y.xhr.withCredentials=true;var z=function z(A){h.log("finish_p",{xhr:A.toJSON?A.toJSON():A,subdomain:v.subdomain,fullHost:v.fullHost})};y.onError=function(A){__p&&__p();c("BanzaiODS").bumpEntityKey("ChannelTransport","sendP.error");i(y);z(A);if(v.subdomain===null)return;if(k(v.subdomain)){v.pingFailuresOnSubdomain++;v.subdomain++;if(v.subdomain>6)v.subdomain=0}};y.timeout=v.P_TIMEOUT;y.onSuccess=function(A){c("BanzaiODS").bumpEntityKey("ChannelTransport","sendP.success");z(A)};y.send()}function n(v,w,x){__p&&__p();var y=new Image(),z=0,A=function A(D){y.abort();return D?w():x()};y.onload=c("TimeSlice").guard(function(){h.log("ping_ok",{duration:Date.now()-z});c("BanzaiODS").bumpEntityKey("ChannelTransport","sendPing.success");A(true)},"ChannelTransport image.onload");y.onerror=c("TimeSlice").guard(function(){m(v);c("BanzaiODS").bumpEntityKey("ChannelTransport","sendPing.error");i(y);A(false)},"ChannelTransport image.onerror");var B=c("setTimeoutAcrossTransitions")(y.onerror,1e4);y.abort=function(){if(B){clearTimeout(B);B=null}y.onload=y.onerror=null};var C={partition:v.partition,cb:j()};if(v.sticky_token)C.sticky_token=v.sticky_token;if(v.sticky_pool)C.sticky_pool=v.sticky_pool;if(v.lastRequestErrorReason){C.reason=v.lastRequestErrorReason;v.lastRequestErrorReason=null}if(v.uid&&v.viewerUid){C.uid=v.uid;C.viewer_uid=v.viewerUid}z=Date.now();y.src=l(v,"/ping").setQueryData(C);return y}function o(v,w){__p&&__p();var x={channel:v.user_channel,partition:v.partition,clientid:v.sessionID,cb:j(),cap:0,uid:v.uid,viewer_uid:v.viewerUid};if(v.sticky_token)x.sticky_token=v.sticky_token;if(v.sticky_pool)x.sticky_pool=v.sticky_pool;if(v.profile)x.profile=v.profile;if(v.capabilities)x.cap=v.capabilities;x.id=w;var y=l(v,"/add_bud").setQueryData(x),z=new(c("AjaxRequest"))("GET",y);if(c("AjaxRequest").supportsCORS())z.xhr.withCredentials=true;z.onError=function(A){c("BanzaiODS").bumpEntityKey("ChannelTransport","sendAdditionalBuddy.error");h.warn("add_buddy_error");i(z)};z.onSuccess=function(A){c("BanzaiODS").bumpEntityKey("ChannelTransport","sendAdditionalBuddy.success");h.log("add_buddy_ok")};z.timeout=v.P_TIMEOUT;z.send()}function p(v){__p&&__p();var w={channel:v.user_channel,partition:v.partition,clientid:v.sessionID,cb:j(),cap:0,uid:v.uid,viewer_uid:v.viewerUid};if(v.sticky_token)w.sticky_token=v.sticky_token;if(v.sticky_pool)w.sticky_pool=v.sticky_pool;if(v.is_offline||v.shouldSuppressPresence)w.state="offline";else w.state="active";if(w.state===v.lastPresenceState)return;v.lastPresenceState=w.state;if(v.profile)w.profile=v.profile;if(v.capabilities)w.cap=v.capabilities;var x=l(v,"/active_ping").setQueryData(w),y=new(c("AjaxRequest"))("GET",x);if(c("AjaxRequest").supportsCORS())y.xhr.withCredentials=true;y.onError=function(z){c("BanzaiODS").bumpEntityKey("ChannelTransport","sendActivePing.error");h.warn("active_ping_error");i(y)};y.onSuccess=function(z){c("BanzaiODS").bumpEntityKey("ChannelTransport","sendActivePing.success");h.log("active_ping_ok")};y.timeout=v.P_TIMEOUT;y.send()}function q(v,w,x,y){__p&&__p();var z=new Date(),A=-1;if(v.userActive>0){A=(z-v.userActive)/1e3|0;if(A<0)h.warn("idle_regression",{idleTime:A,now:z.getTime(),userActive:v.userActive})}var B={channel:v.user_channel,seq:v.seq,partition:v.partition,clientid:v.sessionID,cb:j(),idle:A,qp:"y",cap:0};if(v.state.aiq)B.aiq=v.state.aiq;if(v.ready)if(v.seqTurSentAt==-1||v.seqTurSentAt==v.seq){B.tur=v.timeUntilReady;B.qpmade=v.queueMade;v.seqTurSentAt=v.seq}B.pws=v.pws;if(v.sequenceId>0)B.isq=v.sequenceId;B.msgs_recv=v.estimatedReceived;if(v.uid&&v.viewerUid){B.uid=v.uid;B.viewer_uid=v.viewerUid}if(v.sticky_token)B.sticky_token=v.sticky_token;else{B.request_batch=1;if(v.msgr_region)B.msgr_region=v.msgr_region}if(v.sticky_pool)B.sticky_pool=v.sticky_pool;if("trace_id"in v)B.traceid=v.trace_id;if(v.is_offline||v.shouldSuppressPresence)B.state="offline";else if(v.userActive>0&&A<60)B.state="active";v.lastPresenceState=B.state;if(v.streamingCapable){B.mode="stream";B.format="json"}if(v.profile)B.profile=v.profile;if(v.capabilities)B.cap=v.capabilities;var C=l(v,"/pull").setQueryData(B),D="GET",E=new(c("AjaxRequest"))(D,C);if(c("AjaxRequest").supportsCORS())E.xhr.withCredentials=true;E.timeout=v.streamingCapable?v.STREAMING_TIMEOUT:v.LONGPOLL_TIMEOUT;E.onJSON=function(E){c("BanzaiODS").bumpEntityKey("ChannelTransport","sendPull.json");w(E)};E.onSuccess=function(F){c("BanzaiODS").bumpEntityKey("ChannelTransport","sendPull.success");x(F)};E.onError=function(){var F=this.status==12002&&this._time>=v.MIN_12002_TIMEOUT||this.status==504&&this._time>=v.MIN_504_TIMEOUT,G=F?x:y;if(F)c("BanzaiODS").bumpEntityKey("ChannelTransport","sendPull.success");else{c("BanzaiODS").bumpEntityKey("ChannelTransport","sendPull.error");i(E)}return G&&G.apply(this,arguments)};E.send();v.inStreaming=v.streamingCapable;return E}function r(v){this.manager=v;this.init&&this.init()}function s(v){r.apply(this,arguments)}Object.assign(s.prototype,{logName:"CORS",enterState:function v(w,x){__p&&__p();if(this._request){this._request.abort();this._request=null}if(w=="init")c("setTimeoutAcrossTransitions")(c("bind")(this.manager,"exitState",{status:c("ChannelConstants").OK,stateId:x.stateId}),0);if(!/pull|ping/.test(w))return;var y=this.manager;if(w=="ping")this._request=n(x,c("bind")(y,"exitState",{status:c("ChannelConstants").OK,stateId:x.stateId}),c("bind")(y,"exitState",{status:c("ChannelConstants").ERROR,stateId:x.stateId}));else if(w=="pull")this._request=q(x,c("bind")(y,"_processTransportData",x.stateId),c("bind")(y,"exitState",{status:c("ChannelConstants").OK,stateId:x.stateId}),c("bind")(y,"exitState",{status:c("ChannelConstants").ERROR,stateId:x.stateId}))}});function t(v){h.log("iframe_init_constructor");r.apply(this,arguments);this._iframe=document.createElement("iframe");this._iframe.style.display="none";document.body.appendChild(this._iframe);c("DocRPC").publish(this,"outerTransport")}Object.assign(t.prototype,{logName:"iframe",_initIframe:function v(w){__p&&__p();h.log("iframe_init_start");window.onchanneliframeready=function(){h.log("iframe_resources");return w.resources};window.onchanneliframeloaded=function(){h.log("iframe_loaded")};if(w){this._iframeURI=l(w,w.path);if(w.resources){var x=this._iframeURI.getDomain();w.resources=w.resources.map(function(z){var A=new(c("URI"))(z);if(A.getPath().startsWith("/intern/rsrc.php")&&A.getQueryData().origin!==undefined)return A.addQueryData("origin",x).toString();return z})}}else this._iframeURI="about:blank";this._iframeProxy=null;try{this._iframe.contentWindow.location.replace(this._iframeURI);h.log("iframe_uri_set")}catch(y){h.error("iframe_uri_set_error",y);this.exitState({status:c("ChannelConstants").ERROR,stateId:w.stateId},y+"")}},enterState:function v(w,x){__p&&__p();if(w=="init")this._initIframe(x);else if(/idle|ping|pull/.test(w)){if(this._iframeProxy)this._iframeProxy.enterState.apply(this._iframeProxy,arguments);else if(w!="idle")this.exitState({status:c("ChannelConstants").ERROR,stateId:x.stateId},"iframe not yet loaded")}else if(w=="shutdown")this._initIframe()},_processTransportData:function v(){this.manager._processTransportData.apply(this.manager,arguments)},exitState:function v(w){if(this.manager.state=="init"&&w.status==c("ChannelConstants").OK)this._iframeProxy=c("DocRPC").proxy(this._iframe.contentWindow,"innerTransport",["enterState"],(this._iframeURI+"").replace(/iframe.*/,""));if(/ping|pull/.test(this.manager.state)&&!this._iframeProxy)return;this.manager.exitState.apply(this.manager,arguments)}});function u(){this.init=this.init.bind(this);r.apply(this,arguments)}Object.assign(u.prototype,{logName:"iframe(inner)",init:function v(){c("DocRPC").publish(this,"innerTransport");try{var w=c("DocRPC").proxy(window.parent,"outerTransport",["_processTransportData","exitState"],top.DocRPC.origin);Object.assign(this,w);this.exitState({status:c("ChannelConstants").OK,stateId:1e6})}catch(x){h.error("iframe_inner_init_error",x)}},enterState:function v(w,x){if(this._request){this._request.abort();this._request=null}if(w=="ping")this._request=n(x,c("bind")(this,"exitState",{status:c("ChannelConstants").OK,stateId:x.stateId}),c("bind")(this,"exitState",{status:c("ChannelConstants").ERROR,stateId:x.stateId}));else if(w=="pull")this._request=q(x,c("bind")(this,"_processTransportData",x.stateId),c("bind")(this,"exitState",{status:c("ChannelConstants").OK,stateId:x.stateId}),c("bind")(this,"exitState",{status:c("ChannelConstants").ERROR,stateId:x.stateId}))}});f.exports={isSubdomain:k,getURI:l,Transport:r,CORSTransport:s,IframeTransport:t,IframeInnerTransport:u,sendActivePing:p,sendAdditionalBuddyRequest:o}}),null);
__d("ChannelTransportDataLogger",["Arbiter","JSLogger","MercuryLoggingHelper"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=[],i=10,j=function j(l){__p&&__p();return l.map(function(m){var n=m;if(m.message||m.delta&&m.delta.body){n=babelHelpers["extends"]({},m);if(m.message)n.message=c("MercuryLoggingHelper").obfuscateMessage(m.message);if(m.delta&&m.delta.body)n.delta=c("MercuryLoggingHelper").obfuscateMessage(m.delta)}return n})},k={log:function l(m){var n={t:m.t,seq:m.seq};if(m.ms)n.ms=j(m.ms);h.push(n);if(h.length>i)h.shift()}};c("Arbiter").subscribe(c("JSLogger").DUMP_EVENT,function(l,m){m.channelTransportLog=h});f.exports=k}),null);
__d("ChatProxyConnectionState",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.auxiliaryIrisQueues={};this.aiq=null}h.prototype.subscribeIrisQueue=function(i,j){this.auxiliaryIrisQueues[i]=j;this.updateCaches()};h.prototype.unsubscribeIrisQueue=function(i){delete this.auxiliaryIrisQueues[i];this.updateCaches()};h.prototype.updateCaches=function(){var i=[];for(var j in this.auxiliaryIrisQueues)if(Object.prototype.hasOwnProperty.call(this.auxiliaryIrisQueues,j)){i.push(j);i.push(this.auxiliaryIrisQueues[j])}if(i.length===0)this.aiq=null;else this.aiq=i.join(",")};f.exports=h}),null);
__d("ChatReliabilityEvents",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ERROR:"error",CHANNEL_DISCONNECT:"channel_disconnect",CHANNEL_CONNECT:"channel_connect",CHANNEL_INIT:"channel_init",CHANNEL_NOCONFIG:"channel_noconfig",CHANNEL_HISTORY_INVALID:"channel_history_invalid",CHANNEL_STALLED:"channel_stalled",MESSAGE_RECEIVED:"msg_received",MESSAGE_SEND_START:"msg_send_start",THREAD_INFO_ENDPOINT_FATAL:"thread_info_fatal",DFF_ENDPOINT_FATAL:"invalidate_global_state_fatal",DFF_DELTA_INIT:"dff_initiated_by_delta",DFF_HOLE_INIT:"dff_initiated_by_hole"})}),null);
__d("ChatReliabilityTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:ChatReliabilityLoggerConfig",this.$ChatReliabilityTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:ChatReliabilityLoggerConfig",this.$ChatReliabilityTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$ChatReliabilityTypedLogger1={};return this};h.prototype.updateData=function(j){this.$ChatReliabilityTypedLogger1=babelHelpers["extends"]({},this.$ChatReliabilityTypedLogger1,j);return this};h.prototype.setEvent=function(j){this.$ChatReliabilityTypedLogger1.event=j;return this};h.prototype.setEventData=function(j){this.$ChatReliabilityTypedLogger1.event_data=j;return this};var i={event:true,event_data:true};f.exports=h}),null);
__d("ChatReliabilityInstrumentation",["ChatReliabilityEvents","ChatReliabilityTypedLogger","gkx"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=function h(event,j){if(!c("gkx")("AT5ZjV8HMgIrvWAdtan2dRootzXgNDn_gwV31adDo4tXzlNarwl6mRO_oeBdt0f9htexVFvjQxI0k_n8DA4dQ67qv29jXbtX1X-VERmy6nzotA"))return;new(c("ChatReliabilityTypedLogger"))().setEvent(event).setEventData(j).log()},i={logERROR:function j(k){h(c("ChatReliabilityEvents").ERROR,k)},logCHANNEL_DISCONNECT:function j(k){h(c("ChatReliabilityEvents").CHANNEL_DISCONNECT,k)},logCHANNEL_CONNECT:function j(k){h(c("ChatReliabilityEvents").CHANNEL_CONNECT,k)},logCHANNEL_HISTORY_INVALID:function j(k){h(c("ChatReliabilityEvents").CHANNEL_HISTORY_INVALID,k)},logMESSAGE_RECEIVED:function j(k){h(c("ChatReliabilityEvents").MESSAGE_RECEIVED,k)},logMESSAGE_SEND_START:function j(k){h(c("ChatReliabilityEvents").MESSAGE_SEND_START,k)},logCHANNEL_STALLED:function j(k){h(c("ChatReliabilityEvents").CHANNEL_STALLED,k)},logCHANNEL_INIT:function j(k){h(c("ChatReliabilityEvents").CHANNEL_INIT,k)},logCHANNEL_NOCONFIG:function j(k){h(c("ChatReliabilityEvents").CHANNEL_NOCONFIG,k)},logDFF_DELTA_INIT:function j(k){h(c("ChatReliabilityEvents").DFF_DELTA_INIT,k)},logDFF_HOLE_INIT:function j(k){h(c("ChatReliabilityEvents").DFF_HOLE_INIT,k)}};f.exports=i}),null);
__d("PresenceUtil",["CurrentUser","randomInt"],(function a(b,c,d,e,f,g){var h=c("randomInt")(0,4294967295)+1;function i(){return h}function j(){return c("CurrentUser").isLoggedInNow()}f.exports={getSessionID:i,hasUserCookie:j}}),null);
__d("PresencePrivacy",["Arbiter","AsyncRequest","ChannelConstants","CurrentUser","PresencePrivacyInitialData","JSLogger","PresenceUtil"],(function a(b,c,d,e,f,g){__p&&__p();var h="/ajax/chat/privacy/settings.php",i="/ajax/chat/privacy/online_policy.php",j="/ajax/chat/privacy/visibility.php",k="friend_visibility",l="visibility",m="online_policy",n=babelHelpers["extends"]({},c("PresencePrivacyInitialData").privacyData),o=c("PresencePrivacyInitialData").visibility,p=babelHelpers["extends"]({},c("PresencePrivacyInitialData").privacyData),q=o,r=c("PresencePrivacyInitialData").onlinePolicy,s=r,t=[],u=false;function v(){return c("JSLogger").create("blackbird")}var w=Object.assign(new(c("Arbiter"))(),{WHITELISTED:1,BLACKLISTED:-1,UNLISTED:0,ONLINE:1,OFFLINE:0,ONLINE_TO_WHITELIST:0,ONLINE_TO_BLACKLIST:1});function x(J){__p&&__p();var K;for(K in J){var L=J[K];if(K==c("CurrentUser").getID()){v().error("set_viewer_visibility");throw new Error("Invalid to set current user's visibility")}switch(L){case w.WHITELISTED:case w.BLACKLISTED:case w.UNLISTED:break;default:v().error("set_invalid_friend_visibility",{id:K,value:L});throw new Error("Invalid state: "+L)}}for(K in J)n[K]=J[K];w.inform("privacy-changed")}function y(J,K){var L={};L[J]=K;x(L)}function z(J){switch(J){case w.ONLINE:case w.OFFLINE:break;default:v().error("set_invalid_visibility",{value:J});throw new Error("Invalid visibility: "+J)}o=J;w.inform("privacy-changed");w.inform("privacy-user-presence-changed")}function A(J){switch(J){case w.ONLINE_TO_WHITELIST:case w.ONLINE_TO_BLACKLIST:break;default:throw new Error("Invalid default online policy: "+J)}r=J;w.inform("privacy-user-presence-changed");w.inform("privacy-changed")}function B(J,K){u=true;J.send()}function C(J,K){t.push({request:J,data:K});if(!u){var L=t.shift();B(L.request,L.data)}}function D(J,K){__p&&__p();var L=J.type;if(L===k){w.inform("privacy-availability-changed");for(var M in J.settings)p[M]=J.settings[M]}else{if(L===l)q=J.visibility;else if(L===m)s=J.online_policy;w.inform("privacy-user-presence-response")}v().log("set_update_response",{data:J,response:K})}function E(J,K){if(o!==q)z(q);if(r!==s)A(s);Object.assign(n,p);w.inform("privacy-changed");t=[];v().log("set_error_response",{data:J,response:K})}function F(J){u=false;if(t.length>0){var K=t.shift();B(K.request,K.data)}}function G(J,K){if(c("PresenceUtil")!=null){var L=J.getData();L.window_id=c("PresenceUtil").getSessionID();J.setData(L)}J.setHandler(D.bind(this,K)).setErrorHandler(E.bind(this,K)).setTransportErrorHandler(E.bind(this,K)).setFinallyHandler(F.bind(this)).setAllowCrossPageTransition(true);return J}function H(J,K,L){return G(new(c("AsyncRequest"))(J).setData(K),L)}function I(J,K){__p&&__p();var L=K.obj;if(L.viewer_id!=c("CurrentUser").getID()){v().error("invalid_viewer_for_channel_message",{type:J,data:K});throw new Error("Viewer got from the channel is not the real viewer")}if(L.window_id===c("PresenceUtil").getSessionID())return;var M=L.data;if(L.event=="access_control_entry")M.target_ids.forEach(function(O){y(O,M.setting);p[O]=M.setting});else{if(L.event=="visibility_update"){var N=!!M.visibility?w.ONLINE:w.OFFLINE;z(N);q=N}else if(L.event=="online_policy_update"){A(M.online_policy);s=M.online_policy}w.inform("privacy-user-presence-response")}v().log("channel_message_received",{data:K.obj})}Object.assign(w,{WHITELISTED:1,BLACKLISTED:-1,UNLISTED:0,ONLINE:1,OFFLINE:0,ONLINE_TO_WHITELIST:0,ONLINE_TO_BLACKLIST:1,init:function J(K,L,M){},setVisibility:function J(K){q=o;z(K);var L={visibility:K},M={type:l,visibility:K},N=H(j,L,M);C(N,M);v().log("set_visibility",{data:L});return K},getVisibility:function J(){return o},setOnlinePolicy:function J(K){s=r;A(K);var L={online_policy:K},M={type:m,online_policy:K},N=H(i,L,M);C(N,M);v().log("set_online_policy",{data:L});return K},getOnlinePolicy:function J(){return r},getFriendVisibility:function J(K){return n[K]||w.UNLISTED},isUserOffline:function J(){return this.getVisibility()===w.OFFLINE},allows:function J(K){if(this.isUserOffline())return false;return this.allowsIfViewerIsOnline(K)},allowsIfViewerIsOnline:function J(K){var L=this.getOnlinePolicy();return L===w.ONLINE_TO_WHITELIST?n[K]==w.WHITELISTED:n[K]!=w.BLACKLISTED},setFriendsVisibility:function J(K,L){__p&&__p();if(K.length>0){var M={};for(var N=0;N<K.length;N++){var O=K[N];p[O]=n[O];M[O]=L}x(M);var P=L;if(P==w.UNLISTED)P=p[K[0]];var Q={users:K,setting:L,setting_type:P},R={type:k,settings:M},S=H(h,Q,R);C(S,R);v().log("set_friend_visibility",{data:Q})}return L},setFriendVisibilityMap:function J(K,L){for(var M in K)p[M]=n[M];x(K);var N={type:k,settings:K};C(G(L,N),N);v().log("set_friend_visibility_from_map",{data:K})},allow:function J(K){__p&&__p();if(this.allows(K)){v().error("allow_already_allowed");throw new Error("allow() should only be called for users that are not already allowed")}if(this.getVisibility()===w.OFFLINE){v().error("allow_called_while_offline");throw new Error("allow() should only be called when the user is already online")}var L=this.getOnlinePolicy()===w.ONLINE_TO_WHITELIST?w.WHITELISTED:w.UNLISTED;return this.setFriendsVisibility([K],L)},disallow:function J(K){__p&&__p();if(!this.allows(K)){v().error("disallow_already_disallowed");throw new Error("disallow() should only be called for users that are not already disallowed")}if(this.getVisibility()===w.OFFLINE){v().error("disallow_called_while_offline");throw new Error("disallow() should only be called when the user is already online")}var L=this.getOnlinePolicy()===w.ONLINE_TO_BLACKLIST?w.BLACKLISTED:w.UNLISTED;return this.setFriendsVisibility([K],L)},getBlacklist:function J(){var K=[];for(var L in n)if(n[L]===w.BLACKLISTED)K.push(L);return K},getWhitelist:function J(){var K=[];for(var L in n)if(n[L]===w.WHITELISTED)K.push(L);return K},getMapForTest:function J(){return n},setMapForTest:function J(K){n=K}});w.inform("privacy-changed");w.inform("privacy-user-presence-changed",c("Arbiter").BEHAVIOR_STATE);v().log("initialized",{visibility:o,policy:r});c("Arbiter").subscribe(c("JSLogger").DUMP_EVENT,function(J,K){K.presence_privacy={initial:c("PresencePrivacyInitialData").privacyData,current:n}});c("Arbiter").subscribe(c("ChannelConstants").getArbiterType("privacy_changed"),I.bind(this));c("Arbiter").subscribe(c("ChannelConstants").ON_CONFIG,function(J,K){var L=K.getConfig("visibility",null);if(L!==null&&typeof L!=="undefined"){var M=L?w.ONLINE:w.OFFLINE;z(M);v().log("config_visibility",{vis:M})}}.bind(this));f.exports=w}),null);
__d("ChatVisibility",["Arbiter","JSLogger","PresencePrivacy"],(function a(b,c,d,e,f,g){__p&&__p();var h={isOnline:function i(){return c("PresencePrivacy").getVisibility()===c("PresencePrivacy").ONLINE},hasBlackbirdEnabled:function i(){return this.isVisibleToMostFriends()||this.isVisibleToSomeFriends()},isVisibleToMostFriends:function i(){return c("PresencePrivacy").getOnlinePolicy()===c("PresencePrivacy").ONLINE_TO_BLACKLIST&&c("PresencePrivacy").getBlacklist().length>0},isVisibleToSomeFriends:function i(){return c("PresencePrivacy").getOnlinePolicy()===c("PresencePrivacy").ONLINE_TO_WHITELIST&&c("PresencePrivacy").getWhitelist().length>0},goOnline:function i(j){if(c("PresencePrivacy").getVisibility()===c("PresencePrivacy").OFFLINE){c("JSLogger").create("blackbird").log("chat_go_online");c("PresencePrivacy").setVisibility(c("PresencePrivacy").ONLINE);c("Arbiter").inform("chat-visibility/go-online")}j&&j()},goOffline:function i(j){if(c("PresencePrivacy").getVisibility()===c("PresencePrivacy").ONLINE){c("JSLogger").create("blackbird").log("chat_go_offline");c("PresencePrivacy").setVisibility(c("PresencePrivacy").OFFLINE);c("Arbiter").inform("chat-visibility/go-offline")}j&&j()},toggleVisibility:function i(){if(h.isOnline())h.goOffline();else h.goOnline()}};f.exports=h}),null);
__d("FBAjaxRequest",["AjaxRequest","getAsyncParams"],(function a(b,c,d,e,f,g){__p&&__p();function h(i,j,k){__p&&__p();k=babelHelpers["extends"]({},c("getAsyncParams")(i),k);var l=new(c("AjaxRequest"))(i,j,k);l.streamMode=false;var m=l._call;l._call=function(n){if(n=="onJSON"&&this.json){if(this.json.error){this.errorType=c("AjaxRequest").SERVER_ERROR;this.errorText="AsyncResponse error: "+this.json.error}this.json=this.json.payload}m.apply(this,arguments)};l.ajaxReqSend=l.send;l.send=function(n){this.ajaxReqSend(babelHelpers["extends"]({},n,k))};return l}f.exports=h}),null);
__d("AvailableListConstants",[],(function a(b,c,d,e,f,g){var h=Object.freeze({ON_AVAILABILITY_CHANGED:"buddylist/availability-changed",ON_UPDATE_ERROR:"buddylist/update-error",ON_UPDATED:"buddylist/updated",ON_CHAT_NOTIFICATION_CHANGED:"chat-notification-changed",OFFLINE:0,IDLE:1,ACTIVE:2,MOBILE:3,WEB_STATUS:"webStatus",FB_APP_STATUS:"fbAppStatus",MESSENGER_STATUS:"messengerStatus",OTHER_STATUS:"otherStatus",STATUS_ACTIVE:"active",STATUS_IDLE:"idle",STATUS_OFFLINE:"offline"});f.exports=h}),null);
__d("ChatConfig",["ChatConfigInitialData"],(function a(b,c,d,e,f,g){__p&&__p();var h={},i={get:function j(k,l){return k in h?h[k]:l},set:function j(k){if(arguments.length>1){var l={};l[k]=arguments[1];k=l}Object.assign(h,k)},getDebugInfo:function j(){return h}};i.set(c("ChatConfigInitialData"));f.exports=i}),null);
__d("LastActiveTimes",["fbt","ServerTime"],(function a(b,c,d,e,f,g,h){__p&&__p();var i={};function j(n){__p&&__p();if(!n||n<0)return null;var o=c("ServerTime").get()/1e3-n,p=Math.floor(o/60),q=Math.floor(p/60),r=Math.floor(q/24);if(p<=1)return h._({"*":"{count}m"},[h._param("count",1,[0])]);else if(p<60)return h._({"*":"{count}m"},[h._param("count",p,[0])]);else if(q<24)return h._({"*":"{count}h"},[h._param("count",q,[0])]);else if(r<3)return h._({"*":"{count}d"},[h._param("count",r,[0])]);else return null}function k(n,o){if(!(n in i)||i[n]<o)i[n]=o}function l(n){if(n in i)return i[n];else return 0}var m={update:function n(o){for(var p in o)k(p,o[p])},getShortDisplay:function n(o){return j(l(o))},get:function n(o){return l(o)},getDebugData:function n(){return i}};f.exports=m}),null);
__d("PresenceStatus",["ArbiterMixin","AvailableListConstants","BanzaiODS","Bootloader","ChatConfig","ChatVisibility","CurrentUser","FBIDCheck","LastActiveTimes","PresencePrivacy","ServerTime","createObjectFrom","debounceAcrossTransitions"],(function a(b,c,d,e,f,g){__p&&__p();c("BanzaiODS").setEntitySample("presence",1e-4);var h={},i={},j={},k={},l={},m=Object.assign({},c("ArbiterMixin")),n=c("debounceAcrossTransitions")(function(){return m.inform("change")},0);function o(p){var q,r=parseInt(p.topic.match(/\d+$/),10),s=parseInt(JSON.parse(p.payload).lat,10),t=Date.now()-s*1e3,u=c("ChatConfig").get("active_cutoff")*1e3-t;c("LastActiveTimes").update((q={},q[r]=s,q));m.checkPresence(r);if(m.get(r)===c("AvailableListConstants").ACTIVE){clearTimeout(k[r].timeout);k[r].timeout=setTimeout(function(){m.checkPresence(r)},u)}}Object.assign(m,{resetPresenceData:function p(){h={};i={}},reset:function p(){m.resetPresenceData();j={};l={}},get:function p(q){__p&&__p();if(q==c("CurrentUser").getID())return c("ChatVisibility").isOnline()?c("AvailableListConstants").ACTIVE:c("AvailableListConstants").OFFLINE;if(!c("FBIDCheck").isUser_deprecated(q)&&!k[q]){c("BanzaiODS").bumpEntityKey("presence","page_subscribe");k[q]={};if(c("ChatConfig").get("presence_page_green_dot_sub"))c("Bootloader").loadModules(["RTISubscriptionManager"],function(s){s.subscribe("presence_push/fb/"+q,o)},"PresenceStatus")}var r=c("AvailableListConstants").OFFLINE;if(q in h)r=h[q];if(!c("PresencePrivacy").allows(q))r=c("AvailableListConstants").OFFLINE;return r},getCapabilities:function p(q){var r=i[q];return r?r:0},getViewerInitialCapabilities:function p(){return c("ChatConfig").get("viewer_presence_capabilities")},isPlayingCanvasGameUser:function p(q){return!!j[q]},getGroup:function p(q){return q.some(function(r){if(r==c("CurrentUser").getID())return false;return m.get(r)===c("AvailableListConstants").ACTIVE})?c("AvailableListConstants").ACTIVE:c("AvailableListConstants").OFFLINE},set:function p(q,r,s,t,u,v){__p&&__p();if(q==c("CurrentUser").getID())return false;var w;if(r!==null&&r!==undefined){r=r==c("AvailableListConstants").ACTIVE?c("AvailableListConstants").ACTIVE:c("AvailableListConstants").OFFLINE;var x=m.get(q);w=x!=r;if((w||r==c("AvailableListConstants").ACTIVE)&&c("FBIDCheck").isUser_deprecated(q)){var y;c("LastActiveTimes").update((y={},y[q]=c("ServerTime").get()/1e3,y))}h[q]=r}var z=false;if(u!==undefined&&u!==null){z=m.getCapabilities(q)!=u;i[q]=u}var A=w||z;if(A&&!v)n();return A},setPlayingCanvasGameFriends:function p(q){j=c("createObjectFrom")(q)},setFriendToGameData:function p(q){l=q},getOnlineIDs:function p(){var q,r=[];for(q in h)if(m.get(q)===c("AvailableListConstants").ACTIVE)r.push(q);return r},getAllIDs:function p(){return Object.keys(h)},getOnlineCount:function p(){return m.getOnlineIDs().length},getPresenceStats:function p(){__p&&__p();var q=0,r=0,s=0;for(var t in h){q+=1;switch(m.get(t)){case c("AvailableListConstants").OFFLINE:r+=1;break;case c("AvailableListConstants").ACTIVE:s+=1;break;default:break}}return{total:q,offline:r,active:s}},getAllDebugInfo:function p(){var q={};for(var r in h)q[r]={p:h[r],vc:i[r]};return q},setMultiChatproxy:function p(q){var r={};for(var s in q){if(q[s].lat)r[s]=q[s].lat;var t=q[s].p;m.set(s,t,false,"chatproxy",q[s].vc,true)}c("LastActiveTimes").update(r);n()},setMultiActive:function p(q,r){var s=false;q.forEach(function(t){m.set(t,c("AvailableListConstants").ACTIVE,false,r,null,true)&&(s=true)});if(s)n()},checkPresence:function p(q){var r=false,s=Math.ceil(Date.now()/1e3)-c("LastActiveTimes").get(q);m.set(q,s<c("ChatConfig").get("active_cutoff")?c("AvailableListConstants").ACTIVE:c("AvailableListConstants").OFFLINE,false,"pylon",null,true)&&(r=true);if(r)n()}});f.exports=m}),null);
__d("FantailLogger",["FantailConfig"],(function a(b,c,d,e,f,g){__p&&__p();var h=c("FantailConfig").FantailLogQueue,i={debug:function j(k,l){var m;for(var n=arguments.length,o=Array(n>2?n-2:0),p=2;p<n;p++)o[p-2]=arguments[p];h&&(m=h.get(k)).debug.apply(m,[l].concat(o))},info:function j(k,l){var m;for(var n=arguments.length,o=Array(n>2?n-2:0),p=2;p<n;p++)o[p-2]=arguments[p];h&&(m=h.get(k)).info.apply(m,[l].concat(o))},warn:function j(k,l){var m;for(var n=arguments.length,o=Array(n>2?n-2:0),p=2;p<n;p++)o[p-2]=arguments[p];h&&(m=h.get(k)).warn.apply(m,[l].concat(o))},error:function j(k,l){var m;for(var n=arguments.length,o=Array(n>2?n-2:0),p=2;p<n;p++)o[p-2]=arguments[p];h&&(m=h.get(k)).error.apply(m,[l].concat(o))}};f.exports=i}),null);
__d("MovingStat",[],(function a(b,c,d,e,f,g){__p&&__p();function h(i){__p&&__p();i=i||6e4;var j={t:new Date(),count:0,v:0},k=j,l=0,m=0;function n(){var o=new Date()-i;while(k&&k.next&&k.t<o){l-=k.v;m-=k.count;k=k.next}}this.add=function(o){__p&&__p();l+=o;m++;var p=new Date();if(p-j.t<1e3){j.v+=o;j.count++}else{j.next={t:p,v:o,count:1};j=j.next;n()}};this.tally=function(o){o=o||1e3;n();return{sum:l,count:m,timeAverage:l*o/i}}}f.exports=h}),null);
__d("Dcode",[],(function a(b,c,d,e,f,g){__p&&__p();var h,i={},j={_:"%",A:"%2",B:"000",C:"%7d",D:"%7b%22",E:"%2c%22",F:"%22%3a",G:"%2c%22ut%22%3a1",H:"%2c%22bls%22%3a",I:"%2c%22n%22%3a%22%",J:"%22%3a%7b%22i%22%3a0%7d",K:"%2c%22pt%22%3a0%2c%22vis%22%3a",L:"%2c%22ch%22%3a%7b%22h%22%3a%22",M:"%7b%22v%22%3a2%2c%22time%22%3a1",N:".channel%22%2c%22sub%22%3a%5b",O:"%2c%22sb%22%3a1%2c%22t%22%3a%5b",P:"%2c%22ud%22%3a100%2c%22lc%22%3a0",Q:"%5d%2c%22f%22%3anull%2c%22uct%22%3a",R:".channel%22%2c%22sub%22%3a%5b1%5d",S:"%22%2c%22m%22%3a0%7d%2c%7b%22i%22%3a",T:"%2c%22blc%22%3a1%2c%22snd%22%3a1%2c%22ct%22%3a",U:"%2c%22blc%22%3a0%2c%22snd%22%3a1%2c%22ct%22%3a",V:"%2c%22blc%22%3a0%2c%22snd%22%3a0%2c%22ct%22%3a",W:"%2c%22s%22%3a0%2c%22blo%22%3a0%7d%2c%22bl%22%3a%7b%22ac%22%3a",X:"%2c%22ri%22%3a0%7d%2c%22state%22%3a%7b%22p%22%3a0%2c%22ut%22%3a1",Y:"%2c%22pt%22%3a0%2c%22vis%22%3a1%2c%22bls%22%3a0%2c%22blc%22%3a0%2c%22snd%22%3a1%2c%22ct%22%3a",Z:"%2c%22sb%22%3a1%2c%22t%22%3a%5b%5d%2c%22f%22%3anull%2c%22uct%22%3a0%2c%22s%22%3a0%2c%22blo%22%3a0%7d%2c%22bl%22%3a%7b%22ac%22%3a"};(function(){var l=[];for(var m in j){i[j[m]]=m;l.push(j[m])}l.reverse();h=new RegExp(l.join("|"),"g")})();var k={encode:function l(m){return encodeURIComponent(m).replace(/([_A-Z])|%../g,function(n,o){return o?"%"+o.charCodeAt(0).toString(16):n}).toLowerCase().replace(h,function(n){return i[n]})},decode:function l(m){return decodeURIComponent(m.replace(/[_A-Z]/g,function(n){return j[n]}))}};f.exports=k}),null);
__d("PresenceCookieManager",["Cookie","CurrentUser","Dcode","ErrorUtils","JSLogger","PresenceInitialData","PresenceUtil","WebStorage","WorkModeConfig"],(function a(b,c,d,e,f,g){__p&&__p();var h=c("PresenceInitialData").cookieVersion,i="presence",j={},k=null,l=null,m=c("JSLogger").create("presence_cookie");function n(y){var z=c("Cookie").get(i)||"";if(z.length===0)return null;if(z[0]!==y)return null;return z.substring(1)}function o(y,z){c("Cookie").set(i,y+z)}function p(){if(!(c("PresenceInitialData").useWebStorage||false))return null;return c("WebStorage").getSessionStorage()}function q(){var y=p(),z=y!=null?y.getItem(i):null;if(z!=null)return z.substring(1);return null}function r(y){var z=p();if(z==null)return false;z.setItem(i,"E"+y);return true}function s(){var y=q();if(y!=null)return y;return n("E")}function t(y){var z=y.state;if(z==null)return"";var A=n("S")||"",B=c("WorkModeConfig").is_work_user?"w":"f",C=c("WorkModeConfig").is_work_user?z.t3w:z.t3,D=C!=null?C.length>0:false,E=A.indexOf(B)!==-1;if(E&&!D)A=A.replace(B,"");if(!E&&D)A+=B;return A}function u(y,z){var A=r(y);if(A)o("S",z);else{if(y.length>1024)m.warn("big_cookie",y.length);o("E",y)}}function v(){__p&&__p();try{var y=s();if(k!==y){k=y;l=null;if(y){y=c("Dcode").decode(y);l=JSON.parse(y)}}if(l){if(l.user&&l.user!==c("CurrentUser").getID())return null;if(l.v!==h)return null;return l}}catch(z){m.warn("getcookie_error",z)}return null}function w(){return parseInt(Date.now()/1e3,10)}var x={register:function y(z,A){j[z]=A},store:function y(){__p&&__p();var z=v();if(z&&z.v&&h<z.v){m.debug("stale_cookie",h);return}var A={v:h,time:w(),user:c("CurrentUser").getID()};for(var B in j)A[B]=c("ErrorUtils").applyWithGuard(j[B],j,[z&&z[B]],function(D){D.presence_subcookie=B});var C=c("Dcode").encode(JSON.stringify(A));if(c("PresenceUtil").hasUserCookie())u(C,t(A))},clear:function y(){c("Cookie").clear(i);var z=c("WebStorage").getSessionStorage();if(z!=null)z.removeItem(i)},getSubCookie:function y(z){var A=v();if(!A)return null;return A[z]}};f.exports=x}),null);
__d("FantaConst",[],(function a(b,c,d,e,f,g){"use strict";var h={DEFAULT_ALLOWED_RAISED_TABS:2,DEFAULT_MESSAGE_COUNT:10,cookieIDs:{PERSONAL_COOKIE_ID:"t3",PERSONAL_FOCUS_COOKIE_ID:"lm3",PERSONAL_TIME_COOKIE_ID:"utc3",WORK_COOKIE_ID:"t3w",WORK_FOCUS_COOKIE_ID:"lm3w",WORK_TIME_COOKIE_ID:"utc3w"},getCookieIDs:function i(){return[h.cookieIDs.PERSONAL_COOKIE_ID,h.cookieIDs.PERSONAL_FOCUS_COOKIE_ID,h.cookieIDs.PERSONAL_TIME_COOKIE_ID,h.cookieIDs.WORK_COOKIE_ID,h.cookieIDs.WORK_FOCUS_COOKIE_ID,h.cookieIDs.WORK_TIME_COOKIE_ID]}};f.exports=h}),null);
__d("PresenceState",["Arbiter","ErrorUtils","FantaConst","JSLogger","PresenceCookieManager","debounceAcrossTransitions","setIntervalAcrossTransitions","PresenceInitialData"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("PresenceInitialData").cookiePollInterval||2e3,i=c("PresenceInitialData").shouldSuppress||false,j=[],k=[],l=null,m=null,n=0,o=null,p=0,q=["sb2","tr","tw","at","wml"].concat(c("FantaConst").getCookieIDs()),r=c("JSLogger").create("presence_state");function s(){return c("PresenceCookieManager").getSubCookie("state")}function t(){n=Date.now();c("PresenceCookieManager").store();x(m)}var u=c("debounceAcrossTransitions")(t,0);function v(C){if(C==undefined||isNaN(C)||C==Number.POSITIVE_INFINITY||C==Number.NEGATIVE_INFINITY)C=0;return C}function w(C){__p&&__p();var D={};if(C){q.forEach(function(G){if(C&&C[G])D[G]=C[G]});if(n<C.ut)r.error("new_cookie",{cookie_time:C.ut,local_time:n})}D.ut=n;for(var E=0,F=j.length;E<F;E++)c("ErrorUtils").applyWithGuard(j[E],null,[D]);m=D;return m}function x(C){__p&&__p();p++;n=v(C&&C.ut);if(!l)l=c("setIntervalAcrossTransitions")(A,h);m=C;if(o===null)o=C;for(var D=0,E=k.length;D<E;D++)c("ErrorUtils").applyWithGuard(k[D],null,[C]);p--}function y(C){if(C&&C.ut)if(n<C.ut)return true;else if(C.ut<n)r.error("old_cookie",{cookie_time:C.ut,local_time:n});return false}function z(){var C=s();if(y(C))m=C;return m}function A(){var C=s();if(y(C))x(C)}c("PresenceCookieManager").register("state",w);c("Arbiter").subscribe(c("JSLogger").DUMP_EVENT,function(C,D){D.presence_state={initial:babelHelpers["extends"]({},o),state:babelHelpers["extends"]({},m),update_time:n,sync_paused:p,poll_time:h}});(function(){var C=z();if(C)x(C);else{r.debug("no_cookie_initial");x(w());return}})();var B={doSync:function C(D){if(p)return;if(D)t();else u()},registerStateStorer:function C(D){j.push(D)},registerStateLoader:function C(D){k.push(D)},get:function C(){return z()},getInitial:function C(){return o},shouldSuppress:function C(){return i},verifyNumber:v};f.exports=B}),null);
__d("RTISession",["invariant","URI","AjaxRequest","ErrorUtils","ChatproxyClientErrorsTypedLogger","BanzaiODS"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();function i(j,k,l,m,n,o,p,q,r,s){__p&&__p();j||h(0);n||h(0);o||h(0);this.domain=j;this.topLevelDomain=k;this.port=l;this.edgePoolName=m;this.stickyToken=n;this.loggedInId=o;this.accountId=p;this.clientProfile=q||"desktop";this.clientId=r;this.capabilities=s}i.prototype.issueRequest=function(j,k,l,m,n){__p&&__p();j||h(0);k||h(0);m||h(0);var o=this.domain+"."+this.topLevelDomain,p=(1048576*Math.random()|0).toString(36),q={cb:p,sticky_token:this.stickyToken,uid:this.loggedInId,viewer_uid:this.accountId,sticky_pool:this.edgePoolName,profile:this.clientProfile,clientid:this.clientId,cap:this.capabilities};for(var r in q)!k[r]||h(0);Object.assign(q,k);var s=new(c("URI"))(j).setDomain(o).setPort(this.port).setSecure(new(c("URI"))(window.location.href).isSecure()).setQueryData(q),t=l?"POST":"GET",u=new(c("AjaxRequest"))(t,s);u.timeout=n?n*1e3:3e4;if(u.xhr)u.xhr.withCredentials=true;var v={};u.onSuccess=function(){c("BanzaiODS").bumpEntityKey("RTISession","request.success")};u.onJSON=function(){v.data=u.json;v.error=null;c("ErrorUtils").applyWithGuard(m,this,[v])}.bind(this);u.onError=function(){var w=[];if(l!==undefined&&l.subscriptions!==undefined)for(var x=0;x<l.subscriptions.length;x++)w.push(l.subscriptions[x].topic);v.data=null;v.error=u.errorType||"error";c("BanzaiODS").bumpEntityKey("RTISession","request.error");this.logRequestFailure(u,w);c("ErrorUtils").applyWithGuard(m,this,[v])}.bind(this);u.send(JSON.stringify(l))};i.prototype.logRequestFailure=function(j,k){__p&&__p();var l=new(c("ChatproxyClientErrorsTypedLogger"))();l.setStatusCode(j.status);if(j.xhr!=null){var m=j.xhr.getResponseHeader("x-fb-chat-failure-reason");if(m)l.setErrorReason(m)}l.setSubscriberID(this.loggedInId);l.setSessionID(this.clientId);l.setErrorMessage(j.errorType);l.setErrorText(j.errorText);l.setTopics(k);if(j.uri)l.setURL(j.uri.getPath());if(navigator)l.setAppVersion(navigator.appVersion);l.log()};f.exports=i}),null);
__d("ChannelManager",["errorCode","Promise","AjaxRequest","Arbiter","AsyncRequest","BanzaiODS","ChannelClientID","ChannelConstants","ChannelInitialData","ChannelSubdomain","ChannelTransport","ChannelTransportDataLogger","ChatVisibility","ChatReliabilityInstrumentation","DTSG","Env","FantailLogger","FBAjaxRequest","FBRTCSupport","ISB","JSLogger","LogHistory","MovingStat","PresenceCookieManager","PresenceState","PresenceUtil","Random","RTISession","SystemEvents","URI","UserActivity","ChatProxyConnectionState","emptyFunction","requestAnimationFrameAcrossTransitions","setIntervalAcrossTransitions","setTimeoutAcrossTransitions","clearTimeout"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j=c("JSLogger").create("channel"),k=c("LogHistory").getInstance("channel_manager"),l=null,m=c("emptyFunction"),n=new(c("Promise"))(function(z,A){m=z});function o(z){l=z}var p={idle:{ok:"init!"},init:{ok:"pull!",error:"reconnect",sys_online:"init",sys_timetravel:"init"},pull:{ok:"pull!",error:"ping",error_missing:"pull",error_msg_type:"pull",refresh_0:"reconnect",refresh_110:"reconnect",refresh_111:"reconnect",refresh_112:"pull",refresh_113:"pull",refresh_117:"reconnect"},ping:{ok:"pull!",error:"ping",error_stale:"reconnect!"},reconnect:{ok:"init!",error:"reconnect",sys_online:"reconnect",sys_timetravel:"reconnect"},shutdown:{},_all:{error_max:"shutdown!",error_shutdown:"shutdown!",sys_owner:"reconnect",sys_nonowner:"idle!",sys_online:"ping",sys_offline:"idle!",sys_timetravel:"ping"}},q={state:new(c("ChatProxyConnectionState"))(),userActive:Date.now(),created:Date.now(),ready:false,seqTurSentAt:-1,queueMade:"",sequenceId:0,lastPresenceState:null,lastRequestErrorReason:null,seq:0,pingFailuresOnSubdomain:0,pws:"fresh",estimatedReceived:0,sessionID:c("ChannelClientID").getID(),capabilities:c("FBRTCSupport").getCapabilities(),streamingCapable:false,inStreaming:false,shouldSuppressPresence:c("PresenceState").shouldSuppress(),LONGPOLL_TIMEOUT:6e4,STREAMING_TIMEOUT:6e4,P_TIMEOUT:3e4,IFRAME_LOAD_TIMEOUT:3e4,MIN_RETRY_INTERVAL:5e3,MAX_RETRY_INTERVAL:32e4,MIN_12002_TIMEOUT:9e3,MIN_504_TIMEOUT:2e4,STALL_THRESHOLD:18e4,JUMPSTART_THRESHOLD:9e4,MIN_INIT_PROBE_DELAY:3e3,INIT_PROBE_DELAY_RANDOMIZE_RANGE:12e3,CHANNEL_PROXY_REPORTING_MIN_INTERVAL:1e4,PROBE_DELAY:6e4,PROBE_HEARTBEATS_INTERVAL_LOW:1e3,PROBE_HEARTBEATS_INTERVAL_HIGH:5e3,STREAMING_EXIT_STATE_ON_CONTINUE:false},r=1,s={},t=0;function u(){return c("AsyncRequest").lastSuccessTime?Math.round((Date.now()-c("AsyncRequest").lastSuccessTime)/1e3):-1}function v(){var z={};if(i.getConfig("host"))z[i.getConfig("user_channel")]=i.getConfig("seq",0);return z}function w(){__p&&__p();var z=Date.now(),A=Date.now(),B={total:0},C="idle",D=false;c("SystemEvents").subscribe([c("SystemEvents").USER,c("SystemEvents").ONLINE,c("SystemEvents").TIME_TRAVEL],function(G,H){__p&&__p();x(true);A=null;i.lastPullTime=Date.now();var I;switch(G){case c("SystemEvents").USER:I=c("SystemEvents").isPageOwner()?c("ChannelConstants").SYS_OWNER:c("ChannelConstants").SYS_NONOWNER;break;case c("SystemEvents").ONLINE:I=H?c("ChannelConstants").SYS_ONLINE:c("ChannelConstants").SYS_OFFLINE;break;case c("SystemEvents").TIME_TRAVEL:if(q.skipTimeTravel)return;if(0<H){c("FantailLogger").warn(c("ChannelConstants").FANTAIL_SERVICE,"skipping time travel failure. %s",H);return}I=c("ChannelConstants").SYS_TIMETRAVEL;break}i.exitState({status:I,stateId:r})});var E=function E(G,H){__p&&__p();var I=Date.now(),J=null;if(H){z=I;J=H.nextState||H.state}else J=C;c("SystemEvents").checkTimeTravel();if(A){var K=Math.round((I-A)/1e3);if(K>0){B[C]=(B[C]||0)+K;B.total+=K}}C=J;A=I;if(!G){B.lastSuccessTime=u();B.online=c("SystemEvents").isOnline();k.log("rollup",JSON.stringify(B))}};c("Arbiter").subscribe(c("ChannelConstants").ON_ENTER_STATE,E);c("setIntervalAcrossTransitions")(E,6e4);c("Arbiter").subscribe(c("JSLogger").DUMP_EVENT,function(G,H){H.channelRollup=B});var F=function F(){__p&&__p();if(i.isShutdown()||i.shouldIdle())return;c("SystemEvents").checkTimeTravel();var G=Date.now()-(i.lastPullTime||c("Env").start);if(!D&&G>q.STALL_THRESHOLD){var H=u();k.error("stall",JSON.stringify({lastSuccessTime:H,rollupState:C}));c("ChatReliabilityInstrumentation").logCHANNEL_STALLED(G.toString());D=true}var I=Date.now()-z;if(i.state=="pull"&&I>q.JUMPSTART_THRESHOLD){z=null;k.warn("jumpstart",JSON.stringify({state:i.state,dormant:I}));c("Arbiter").inform(c("ChannelConstants").JUMPSTART,I);i.enterState("init")}};c("setIntervalAcrossTransitions")(F,5e3)}function x(z){if(z){t=0;s={}}else t++}function y(z,A){var B=!c("AjaxRequest").supportsCORS(),C=c("ChannelTransport").isSubdomain(q.subdomain);if(!C||B)q.fullHost=q.host;else q.fullHost=q.subdomain+"-"+q.host;c("FantailLogger").info(c("ChannelConstants").FANTAIL_SERVICE,"received lb info: %s at seq: %s{%s} with ".concat("sticky: %s/%s, subdomain: %s, fullHost: %s, state: %s,").concat(" source: %s, args: %s"),q.sessionID,q.seq,q.sequenceId,q.sticky_token,q.sticky_pool,q.subdomain,q.fullHost,i.state,z,A)}i={state:"idle",nextState:null,proxyDown:false,lastPullTime:Date.now(),lastReportOnMisguidedMsgTime:Date.now(),heartbeats:[],setTestCallback:o,backoff:false,sessionRegistered:false,init:function z(A,B){__p&&__p();c("FantailLogger").info(c("ChannelConstants").FANTAIL_SERVICE,"initializing sessionid:%s at iris-seq:%s",q.sessionID,q.sequenceId);this.init=c("emptyFunction");c("Arbiter").subscribe(c("ChannelConstants").GET_RTI_SESSION_REQUEST,function(event,G){this.informCurrentSession()}.bind(this));c("requestAnimationFrameAcrossTransitions")(function(){__p&&__p();c("FantailLogger").info(c("ChannelConstants").FANTAIL_SERVICE,"using session id: %s at seq: %s {%s} with sticky: %s/%s",q.sessionID,q.seq,q.sequenceId,q.sticky_token,q.sticky_pool);c("UserActivity").subscribe(function(){var G=c("ChannelTransport").getURI(q,"/U");c("FantailLogger").info(c("ChannelConstants").FANTAIL_SERVICE,"user activity sessionid: %s at seq: %s/{%s} with sticky: %s/%s state: %s uri: %s",q.sessionID,q.seq,q.sequenceId,q.sticky_token,q.sticky_pool,i.state,G);if(i.state=="pull"){q.userActive=Date.now();c("ChannelTransport").sendActivePing(q)}});c("Arbiter").subscribe(c("ChannelConstants").ENTITY_PRESENCE_ACTIVE_PING,function(G){var H=c("ChannelTransport").getURI(q,"/U");c("FantailLogger").info(c("ChannelConstants").FANTAIL_SERVICE,"entity presence activity sessionid: %s at seq: %s/{%s} with sticky: %s/%s state: %s uri: %s",q.sessionID,q.seq,q.sequenceId,q.sticky_token,q.sticky_pool,i.state,H);if(i.state=="pull")q.userActive=Date.now()})});c("PresenceCookieManager").register("ch",v);var C=this.getConfig("max_conn",2);q.subdomain=c("ChannelSubdomain").allocate(C);if(!c("ChannelTransport").isSubdomain(q.subdomain)){c("FantailLogger").info(c("ChannelConstants").FANTAIL_SERVICE,"invalid subdomain from ChannelSubdomain: %s",q.subdomain);q.subdomain=null}this._transportRate=new(c("MovingStat"))(3e4);var D=c("AjaxRequest").supportsCORS()?"CORSTransport":"IframeTransport";c("BanzaiODS").bumpEntityKey("ChannelManager","transport_chosen."+D);this.transport=new(c("ChannelTransport")[D])(this);m(this.transport);if(A)this.enterState(A,B);c("requestAnimationFrameAcrossTransitions")(function(){c("Arbiter").subscribe(c("JSLogger").DUMP_EVENT,function(event,G){if(this._transportRate){G.transportRate=this._transportRate.tally();G.transportType=D;G.transportVersion=2}}.bind(this));w()}.bind(this));if(i.getConfig("fullHost")&&c("AjaxRequest").supportsCORS()){if(i.getConfig("tryStreaming")){var E=q.MIN_INIT_PROBE_DELAY+c("Random").random()*q.INIT_PROBE_DELAY_RANDOMIZE_RANGE;c("setTimeoutAcrossTransitions")(this._probeTest,E)}if(i.getConfig("trySSEStreaming")){var F=q.MIN_INIT_PROBE_DELAY+c("Random").random()*q.INIT_PROBE_DELAY_RANDOMIZE_RANGE;c("setTimeoutAcrossTransitions")(this._sseProbeTest,F)}}},configure:function z(){for(var A=arguments.length,B=Array(A),C=0;C<A;C++)B[C]=arguments[C];k.log("configure",JSON.stringify(B));B.forEach(function(D){return Object.assign(q,D)});y("reconnect",JSON.stringify(B));c("Arbiter").inform(c("ChannelConstants").ON_CONFIG,this)},getConfig:function z(A,B){return Object.prototype.hasOwnProperty.call(q,A)?q[A]:B},getCompleteConfig:function z(){return q},subscribeIrisQueue:function z(A,B){q.state.subscribeIrisQueue(A,B);this.exitState({status:c("ChannelConstants").OK,stateId:r})},unsubscribeIrisQueue:function z(A){q.state.unsubscribeIrisQueue(A)},informCurrentSession:function z(){var A=null;if(this.sessionRegistered&&q&&q.fullHost&&q.sticky_token&&q.uid)A=new(c("RTISession"))(q.fullHost,q.domain,q.port,q.sticky_pool,q.sticky_token,q.uid,q.viewerUid,q.profile,q.sessionID,q.capabilities);c("Arbiter").inform(c("ChannelConstants").RTI_SESSION,A)},isShutdown:function z(){return this.state=="shutdown"},shouldIdle:function z(){return!(c("SystemEvents").isPageOwner()&&c("SystemEvents").isOnline())},_sendIframeError:function z(A){var B=new(c("AsyncRequest"))().setURI("/ajax/presence/reconnect.php").setData({reason:A,fb_dtsg:c("DTSG").getToken()}).setOption("suppressErrorHandlerWarning",true).setOption("retries",1).setMethod("GET").setReadOnly(true).setAllowCrossPageTransition(true);B.specifiesWriteRequiredParams()&&B.send()},_getDelay:function z(){var A=Math.min(q.MIN_RETRY_INTERVAL*Math.pow(2,Math.max(0,t-1)),q.MAX_RETRY_INTERVAL);if(this.proxyDown&&"proxy_down_delay_millis"in q)A=q.proxy_down_delay_millis;this.proxyDown=false;return Math.floor(A*(1+Math.random()*.5))},resetDelay:function z(){x(true)},enterState:function z(){__p&&__p();if(this._inEnterState){k.warn("enterstate_recursion",JSON.stringify({state:this.state,args:arguments}));c("ChatReliabilityInstrumentation").logERROR("enterstate_recursion")}this._inEnterState=true;try{this._enterState.apply(this,arguments);this._inEnterState=false}catch(A){this._inEnterState=false;throw A}},_enterState:function z(A){__p&&__p();var B=this.backoff?this._getDelay():0;this.backoff=false;if(this.isShutdown()){c("FantailLogger").warn(c("ChannelConstants").FANTAIL_SERVICE,"not executing state due to shutdown mode: %s",A);return}if(A!="idle!"&&this.shouldIdle()){c("FantailLogger").warn(c("ChannelConstants").FANTAIL_SERVICE,"forced idleness");return}r++;q.stateId=r;c("clearTimeout")(this._deferredTransition);this._deferredTransition=null;if(!this.transport){n.done(function(H){return H.enterState("idle")});c("ChatReliabilityInstrumentation").logERROR("called enterState "+A+" before transport init")}else this.transport.enterState("idle");this.state="idle";this.nextState=null;if(/!$/.test(A)){if(this._transportRate){var C=this._transportRate.tally().timeAverage,D=i.getConfig("MAX_CHANNEL_STATES_PER_SEC",1);if(C>=D){if(!this._throttled){this._throttled=true;k.warn("throttled","{}");c("Arbiter").inform(c("ChannelConstants").THROTTLED,C)}j.bump("throttle");B=1e3/D}}}else if(!/#$/.test(A))B=this._getDelay();A=A.replace(/\W*$/,"");if(!p[A]){c("FantailLogger").error(c("ChannelConstants").FANTAIL_SERVICE,"invalid state: %s",A);throw new Error("invalid state:"+A)}var E=Array.from(arguments),F;if(B<=0){F={state:A};if(this._transportRate)this._transportRate.add(1);this.state=A;var G=this["_enter_"+this.state];if(G){E.shift();G.apply(this,E)}if(/init|idle|pull|ping/.test(this.state)){if(q.streamingCapable&&/pull/.test(this.state))this.heartbeats=[];q.is_offline=!c("ChatVisibility").isOnline();q.capabilities=c("FBRTCSupport").getCapabilities();c("FantailLogger").info(c("ChannelConstants").FANTAIL_SERVICE,"entering transport state: %s",this.state);if(!this.transport){n.done(function(H){return H.enterState(this.state,q)}.bind(this));c("ChatReliabilityInstrumentation").logERROR("called enterState "+A+" before transport init")}else this.transport.enterState(this.state,q);if(this.state=="ping"){F.url=c("ChannelTransport").getURI(q).toString();F.port=q.port||"undefined"}}}else{this.state="idle";this.nextState=A;F={state:this.state,delay:B,nextState:A};E[0]=A+"#";this._deferredTransition=c("setTimeoutAcrossTransitions")(function(){this._deferredTransition=null;this.enterState.apply(this,E)}.bind(this),B)}if(/pull/.test(A)){F.client_id=q.sessionID;F.streaming=q.inStreaming}c("Arbiter").inform(c("ChannelConstants").ON_ENTER_STATE,F)},exitState:function z(A,B){__p&&__p();var C=A.stateId,D=A.status;if(this.isShutdown()||C<r)return;var E=this.state,F=Array.from(arguments);F[0]=A.status;var G={state:E,status:D};if(/pull/.test(E)){G.client_id=q.sessionID;G.streaming=q.inStreaming}if(/ping/.test(E)&&D!=c("ChannelConstants").OK)G.url=c("ChannelTransport").getURI(q).toString();if(this.nextState)G.nextState=this.nextState;if(B&&B.errorType){q.lastRequestErrorReason=B.errorType;G.xhr=B.toJSON?B.toJSON():B;if(B.errorType==c("AjaxRequest").SERVICE_UNAVAILABLE){c("FantailLogger").error(c("ChannelConstants").FANTAIL_SERVICE,"got 5xx http status code, setting long delay");this.proxyDown=true}delete G.xhr.json}else if(D!=c("ChannelConstants").OK)q.lastRequestErrorReason=D;if(B&&B.json){if(B.json.t)G.t=B.json.t;if(B.json.reason)G.reason=B.json.reason;if(B.json.seq)G.seq=B.json.seq}c("Arbiter").inform(c("ChannelConstants").ON_EXIT_STATE,G);var H=this["_exit_"+E];if(H)D=H.apply(this,F)||D;if(D!=c("ChannelConstants").OK){x();s[E]=(s[E]||0)+1}var I=p[this.nextState||E][D]||p._all[D],J=I&&I.replace(/!*$/,"");if(!J){k.error("terminal_transition",JSON.stringify(G));this._shutdownHint=c("ChannelConstants").HINT_INVALID_STATE;I="shutdown!";c("FantailLogger").error(c("ChannelConstants").FANTAIL_SERVICE,"entering shutdown state")}this._lastState=E;this._lastStatus=D;this.enterState(I)},_processTransportData:function z(A,B){this._processTransportData0(A,B,B.json)},_processTransportData0:function z(A,B,C){__p&&__p();var D=C.t;if("s"in C){C.seq=C.s;delete C.s}if(C.u&&q.user&&C.u!=q.user){k.warn("misguided_msg",JSON.stringify({user:q.user,target:C.u}));this._reportProxyMisguidedMsg(C.u,q.user);return}c("ChannelTransportDataLogger").log(C);var E=q.seq;if("seq"in C){q.seq=C.seq;c("PresenceState").doSync()}switch(D){case"continue":if(q.inStreaming&&this.heartbeats.length<1){q.streamingCapable=false;k.log("switch_to_longpoll","{}");c("setTimeoutAcrossTransitions")(this._probeTest,q.PROBE_DELAY)}x(true);if(!q.inStreaming||q.STREAMING_EXIT_STATE_ON_CONTINUE)this.exitState({status:c("ChannelConstants").OK,stateId:A});break;case"refresh":case"refreshDelay":c("FantailLogger").info(c("ChannelConstants").FANTAIL_SERVICE,"got refresh with reason: %s",C.reason);this.exitState({status:"refresh_"+(C.reason||0),stateId:A},B);break;case"backoff":c("FantailLogger").warn(c("ChannelConstants").FANTAIL_SERVICE,"server told client to back off");x();this.backoff=true;break;case"lb":var F=C.lb_info;if(F){q.sticky_token=F.sticky;if("pool"in F)q.sticky_pool=F.pool;if("sd"in F){var G=F.subdomain;if(c("ChannelTransport").isSubdomain(G))q.subdomain=F.subdomain}if("vip"in F)q.host=F.vip;y("chatproxy",JSON.stringify(C))}else k.error("missing_lb_info","{}");break;case"test_streaming":c("setTimeoutAcrossTransitions")(this._probeTest,500);break;case"fullReload":c("PresenceCookieManager").clear();k.log("full_reload","{}");this.sessionRegistered=true;this.informCurrentSession();c("Arbiter").inform(c("ChannelConstants").ON_INVALID_HISTORY);x(true);c("FantailLogger").info(c("ChannelConstants").FANTAIL_SERVICE,"full reload incurred");var H=c("ChannelConstants").OK;this.exitState({status:H,stateId:A},B);if("ms"in C)this._processMessages(C,E);break;case"msg":x(true);this._processMessages(C,E);break;case"heartbeat":if(q.inStreaming){var I=Date.now();if(this.heartbeats.length>0)var J=I-this.heartbeats[this.heartbeats.length-1];k.log("heartbeat_interval",JSON.stringify({client_id:q.sessionID,interval:J}));this.heartbeats.push(I)}break;case"batched":var K=C.batches,L;for(L=0;L<K.length;L++)this._processTransportData0(A,B,K[L]);break;default:c("FantailLogger").error(c("ChannelConstants").FANTAIL_SERVICE,"got an unknown protocol message: %s",D);k.error("unknown_msg_type",JSON.stringify({type:D}));break}},_processMessages:function z(A,B){__p&&__p();var C,D,E,F;if("tr"in A)q.trace_id=A.tr;D=A.ms;E=q.seq-D.length;for(C=0;C<D.length;C++,E++){q.estimatedReceived++;if(E>=B){F=D[C];if(F.type){var G=c("ChannelConstants").getArbiterType(F.type);if(F.type==="messaging"){var H={type:"messaging",event:F.event};if(F.message){H.inbox_unread=F.unread_counts&&F.unread_counts.inbox;H.tid=F.message.tid;H.mid=F.message.mid;c("FantailLogger").info(c("ChannelConstants").FANTAIL_SERVICE,"got message with id: %s",F.message.mid)}}else if(F.type==="skywalker")G=c("ChannelConstants").SKYWALKER;else if(F.type==="qprimer"){F.first=!q.ready;if(F.first){q.ready=true;q.timeUntilReady=Date.now()-q.created;q.queueMade=F.made}G=c("ChannelConstants").CHANNEL_ESTABLISHED}else if(F.type==="pws")q.pws=F.pws;else if(F.type==="delta")q.sequenceId=F.iseq;try{c("Arbiter").inform(G,{obj:F})}catch(I){c("BanzaiODS").bumpEntityKey("ChannelManager","processMessages.error."+F.type);c("FantailLogger").info(c("ChannelConstants").FANTAIL_SERVICE,"message threw exception: %s %s",I,F)}}}else k.warn("seq_regression",JSON.stringify({last_seq:B,messages:D.length,seq:E}))}},_enter_init:function z(){if(s.init>=i.getConfig("MAX_INIT_FAILS",2))return c("setTimeoutAcrossTransitions")(function(){return this.exitState({status:c("ChannelConstants").ERROR_MAX,stateId:r})}.bind(this),0);this._initTimer=c("setTimeoutAcrossTransitions")(function(){return this.exitState({status:c("ChannelConstants").ERROR,stateId:r},"timeout")}.bind(this),q.IFRAME_LOAD_TIMEOUT)},_enter_reconnect:function z(A){__p&&__p();k.warn("enter_reconnect",A);c("FantailLogger").info(c("ChannelConstants").FANTAIL_SERVICE,"entered reconnect with reason: %s",A);var B=r;if(!c("PresenceUtil").hasUserCookie()){c("FantailLogger").warn(c("ChannelConstants").FANTAIL_SERVICE,"user has no cookie???");k.warn("no_user_cookie","{}");c("setTimeoutAcrossTransitions")(function(){this._shutdownHint=c("ChannelConstants").HINT_AUTH;this.exitState({status:c("ChannelConstants").ERROR_SHUTDOWN,stateId:B})}.bind(this),0);return}var C={reason:A,fb_dtsg:c("DTSG").getToken()};if(c("ISB").token)C.fb_isb=c("ISB").token;if(l)l(C);var D=new(c("FBAjaxRequest"))("GET","/ajax/presence/reconnect.php",C);D.onSuccess=function(){i.configure(D.json);c("PresenceCookieManager").store();this.exitState({status:c("ChannelConstants").OK,stateId:B})}.bind(this);D.onError=function(){__p&&__p();var E=D.json&&D.json.error;c("FantailLogger").error(c("ChannelConstants").FANTAIL_SERVICE,"reconnect error: %s",D.errorType);if(D.errorType==c("AjaxRequest").TRANSPORT_ERROR||D.errorType==c("AjaxRequest").PROXY_ERROR||D.errorType==c("AjaxRequest").SERVICE_UNAVAILABLE)this._shutdownHint=c("ChannelConstants").HINT_CONN;if(E&&E==1356007)this._shutdownHint=c("ChannelConstants").HINT_MAINT;else if(E==1357001||E==1357004||E==1348009)this._shutdownHint=c("ChannelConstants").HINT_AUTH;else this._shutdownHint=null;this.exitState({status:this._shutdownHint?c("ChannelConstants").ERROR_SHUTDOWN:c("ChannelConstants").ERROR,stateId:B},D)}.bind(this);D.send()},_enter_shutdown:function z(){c("Arbiter").inform(c("ChannelConstants").ON_SHUTDOWN,{reason:this._shutdownHint});if("shutdown_recovery_interval_seconds"in q&&q.shutdown_recovery_interval_seconds>0){var A=q.shutdown_recovery_interval_seconds*1e3;c("setTimeoutAcrossTransitions")(function(){c("Arbiter").inform(c("ChannelConstants").ATTEMPT_RECONNECT);this._shutdownHint=null;this.state="reconnect!";this.enterState("reconnect!")}.bind(this),A)}},_exit_init:function z(A){if(this._initTimer)this._initTimer=c("clearTimeout")(this._initTimer);if(A==c("ChannelConstants").ERROR_MAX)this._sendIframeError(c("ChannelConstants").reason_IFrameLoadGiveUp)},_exit_pull:function z(A,B){var C=A==c("ChannelConstants").OK;if(C)this.lastPullTime=Date.now();else{var D="exit status: "+A;if(B&&B.errorType)D+=" ajax request error: "+B.errorType;c("FantailLogger").error(c("ChannelConstants").FANTAIL_SERVICE,"pull failed with status: %s",D)}},_exit_ping:function z(A){if(A==c("ChannelConstants").OK){var B=Date.now()-(this.lastPullTime||c("Env").start);if(B>q.STALL_THRESHOLD){c("FantailLogger").error(c("ChannelConstants").FANTAIL_SERVICE,"didnt complete a successful pull for too long");return c("ChannelConstants").ERROR_STALE}}else c("FantailLogger").error(c("ChannelConstants").FANTAIL_SERVICE,"ping failed with status: %s",A)},_reportProxyMisguidedMsg:function z(A,B){__p&&__p();c("FantailLogger").error(c("ChannelConstants").FANTAIL_SERVICE,"misguided message to %s meant for %s",B,A);var C=Date.now();if(C-this.lastReportOnMisguidedMsgTime<=q.CHANNEL_PROXY_REPORTING_MIN_INTERVAL)return;this.lastReportOnMisguidedMsgTime=C;var D={received_uid:A,expected_uid:B};if(q.sticky_token)D.sticky_token=q.sticky_token;var E=new(c("URI"))("/err_misguided_msg").setDomain(q.host+"."+q.domain).setPort(q.port).setSecure(new(c("URI"))(window.location.href).isSecure()).setQueryData(D),F=new(c("AjaxRequest"))("GET",E);if(c("AjaxRequest").supportsCORS())F.xhr.withCredentials=true;F.onSuccess=function(G){};F.onError=function(G){};F.onJSON=function(G,H){};F.send()},_probeTest:function z(){__p&&__p();q.streamingCapable=false;var A=[],B={mode:"stream",format:"json"};if(q.sticky_token)B.sticky_token=q.sticky_token;var C=new(c("URI"))("/probe").setDomain(q.fullHost+"."+q.domain).setPort(q.port).setSecure(new(c("URI"))(window.location.href).isSecure()).setQueryData(B);c("BanzaiODS").bumpEntityKey("ChannelManager","probe.attempt");var D=new(c("AjaxRequest"))("GET",C);D.onJSON=function(E,F){__p&&__p();if(E&&E.json&&E.json.t==="heartbeat"){A.push(Date.now());if(A.length>=2){var G=A[1]-A[0];if(G>=q.PROBE_HEARTBEATS_INTERVAL_LOW&&G<=q.PROBE_HEARTBEATS_INTERVAL_HIGH){q.streamingCapable=true;c("BanzaiODS").bumpEntityKey("ChannelManager","probe.switch_to_streaming");k.log("switch_to_streaming","{}")}else c("BanzaiODS").bumpEntityKey("ChannelManager","probe.failure.delayed")}}};D.onSuccess=function(E){if(A.length!=2){q.streamingCapable=false;c("BanzaiODS").bumpEntityKey("ChannelManager","probe.failure.data_loss");k.error("probe_error",JSON.stringify({error:"beats.length = "+A.length}))}c("BanzaiODS").bumpEntityKey("ChannelManager","probe.success");k.log("probe_success","{}")};D.onError=function(E){q.streamingCapable=false;c("BanzaiODS").bumpEntityKey("ChannelManager","probe.failure.error");k.error("probe_error",JSON.stringify(E))};D.send()},_sseProbeTest:function z(){__p&&__p();if(!window.EventSource){c("BanzaiODS").bumpEntityKey("ChannelManager","sse_probe.failure.no_event_source");k.log("sse_probe.failure.no_event_source","{}");return}var A=[],B={mode:"sse",format:"json"};if(q.sticky_token)B.sticky_token=q.sticky_token;var C=new(c("URI"))("/sse_probe").setDomain(q.fullHost+"."+q.domain).setPort(q.port).setSecure(new(c("URI"))(window.location.href).isSecure()).setQueryData(B);c("BanzaiODS").bumpEntityKey("ChannelManager","sse_probe.attempt");var D=new EventSource(C),E=c("setTimeoutAcrossTransitions")(function(){D.close();c("BanzaiODS").bumpEntityKey("ChannelManager","sse_probe.failure.timeout");k.log("sse_probe.failure.timeout","{}")},q.PROBE_HEARTBEATS_INTERVAL_HIGH*6);D.addEventListener("heartbeat",function(F){__p&&__p();A.push(Date.now());if(A.length>=2){var G=A[1]-A[0];if(G>=q.PROBE_HEARTBEATS_INTERVAL_LOW&&G<=q.PROBE_HEARTBEATS_INTERVAL_HIGH){c("BanzaiODS").bumpEntityKey("ChannelManager","sse_probe.success");k.log("sse_probe.success","{}")}else{c("BanzaiODS").bumpEntityKey("ChannelManager","sse_probe.failure.delayed");k.log("sse_probe.failure.delayed","{}")}c("clearTimeout")(E);D.close()}});D.onerror=function(F){c("BanzaiODS").bumpEntityKey("ChannelManager","sse_probe.failure.error");k.error("sse_probe.failure.error",JSON.stringify(F));c("clearTimeout")(E);D.close()}},startChannelManager:function z(){if(c("ChannelInitialData").channelConfig){i.configure(c("ChannelInitialData").channelConfig);if(/shutdown/.test(c("ChannelInitialData").state))i._shutdownHint=c("ChannelConstants")[c("ChannelInitialData").reason];i.init(c("ChannelInitialData").state,c("ChannelInitialData").reason);c("ChatReliabilityInstrumentation").logCHANNEL_INIT();this.startChannelManager=c("emptyFunction")}else c("ChatReliabilityInstrumentation").logCHANNEL_NOCONFIG()}};f.exports=i}),null);
__d("ChatproxyPresence",["Arbiter","AvailableListConstants","AvailableListInitialData","BanzaiODS","ChannelConstants","LastActiveTimes","PresenceStatus","debounceAcrossTransitions","gkx","ClientChromeExperimentsData"],(function a(b,c,d,e,f,g){__p&&__p();var h=c("ClientChromeExperimentsData").ClientChromeAvailableListInitialDataPreloader;function i(k){__p&&__p();var l=k.activeList,m=k.lastActiveTimes,n=k.playingNow,o=k.gameIDs;if(n&&c("gkx")("AT7yBpg1V7CzKVaTkCsDW_DkXA2fczgihYwI2HQX5LeBop45hQUdEiqH1VoxT7WnKBTDSj2fGjsqWwvOmixi9XTEC3KJkl26uGSBOQ2EPjno0g")){c("PresenceStatus").setPlayingCanvasGameFriends(n);if(o)c("PresenceStatus").setFriendToGameData(o)}if(l)c("PresenceStatus").setMultiActive(l,"available_list_active");if(m&&!Array.isArray(m))c("LastActiveTimes").update(m)}function j(k){"use strict";this.$ChatproxyPresence1=k;this.$ChatproxyPresence2=false;this.$ChatproxyPresence3=c("AvailableListInitialData").chatNotif;this.$ChatproxyPresence4=false;if(h)h.onLoaded(i);else i(c("AvailableListInitialData"))}j.prototype.subscribe=function(){"use strict";__p&&__p();c("Arbiter").subscribe(c("ChannelConstants").getArbiterType("chatproxy-presence"),this.updatePresenceInfo.bind(this));c("Arbiter").subscribe(c("ChannelConstants").ON_INVALID_HISTORY,function(){this.$ChatproxyPresence2=true}.bind(this));c("Arbiter").subscribe(c("ChannelConstants").RTI_SESSION,function(k,l){if(l)this.$ChatproxyPresence4=l}.bind(this));c("Arbiter").subscribe(c("ChannelConstants").getArbiterType("get_debug_presence"),function(k,l){__p&&__p();var m=c("PresenceStatus").getAllDebugInfo(),n=c("LastActiveTimes").getDebugData();for(var o in n){var p=m[o];if(p===undefined){p={};m[o]=p}p.l=Math.floor(n[o])}this.$ChatproxyPresence4.issueRequest("/debug_presence",{},m,function(){c("BanzaiODS").bumpEntityKey("ChatproxyPresence","debug_presence.sucess")})}.bind(this))};j.prototype.getRTISession=function(){"use strict";return this.$ChatproxyPresence4};j.prototype.updatePresenceInfo=function(k,l){"use strict";__p&&__p();if(this.$ChatproxyPresence2){this.$ChatproxyPresence2=false;c("PresenceStatus").resetPresenceData()}l=l.obj;var m=l.buddyList;c("PresenceStatus").setMultiChatproxy(m);var n=false;if(l.chatNotif!==undefined)n=this.$ChatproxyPresence3!==l.chatNotif;if(n)this.$ChatproxyPresence3=l.chatNotif;if(l.gamers)if(c("gkx")("AT4ZK4-HJfHD7oj43iGtVof3AGIE4_u3z6F0HOgDTJ4fOy3YfjtGPsjx32l5qWfj1k3ucgmRet0aKZYemlSZXFKbUm1LMDVAH-yVQcR_OagZzg")&&l.gamers[0]===-1){var o=[],p={};for(var q=1;q<l.gamers.length;q+=2){o.push(l.gamers[q]);p[l.gamers[q]]=l.gamers[q+1]}c("PresenceStatus").setPlayingCanvasGameFriends(o);c("PresenceStatus").setFriendToGameData(p)}else c("PresenceStatus").setPlayingCanvasGameFriends(l.gamers);if(n)this.$ChatproxyPresence1(c("AvailableListConstants").ON_CHAT_NOTIFICATION_CHANGED,this.$ChatproxyPresence3);c("debounceAcrossTransitions")(function(){this.$ChatproxyPresence1(c("AvailableListConstants").ON_AVAILABILITY_CHANGED)}.bind(this),0)()};j.prototype.getWebChatNotification=function(){"use strict";return this.$ChatproxyPresence3};f.exports=j}),null);
__d("ChatDispatcher",["ExplicitRegistrationDispatcher"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("ExplicitRegistrationDispatcher"));i=h&&h.prototype;function j(){h.apply(this,arguments)}f.exports=new j({strict:false})}),null);
__d("PresenceStatusActionTypes",["keyMirror"],(function a(b,c,d,e,f,g){"use strict";f.exports=c("keyMirror")({AVAILABILITY_CHANGED:null})}),null);
__d("TypingStates",[],(function a(b,c,d,e,f,g){var h=Object.freeze({INACTIVE:0,TYPING:1,QUITTING:2});f.exports=h}),null);
__d("AvailableList",["Arbiter","ArbiterMixin","AsyncRequest","AvailableListConstants","BanzaiODS","Bootloader","ChannelConstants","ChatConfig","ChatDispatcher","ChatproxyPresence","ChatReliabilityInstrumentation","ChatVisibility","CurrentUser","FBIDCheck","ErrorUtils","JSLogger","LastActiveTimes","PresencePrivacy","PresenceStatus","PresenceStatusActionTypes","Run","ServerTime","TypingStates","debounceAcrossTransitions","emptyFunction","requireWeak"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();c("BanzaiODS").setEntitySample("presence",1e-4);var h=babelHelpers["extends"]({},c("AvailableListConstants"),c("ArbiterMixin")),i=/\D/;h.subscribe([c("AvailableListConstants").ON_AVAILABILITY_CHANGED,c("AvailableListConstants").ON_UPDATE_ERROR],function(p,q){c("Arbiter").inform(p,q)});c("PresenceStatus").subscribe("change",c("debounceAcrossTransitions")(function(){h.inform(c("AvailableListConstants").ON_AVAILABILITY_CHANGED)},0));var j=c("debounceAcrossTransitions")(function(){h.inform(c("AvailableListConstants").ON_AVAILABILITY_CHANGED);c("ChatDispatcher").dispatch({type:c("PresenceStatusActionTypes").AVAILABILITY_CHANGED})},0);function k(q,r,s,t,u){if(q===c("CurrentUser").getID())return;var v=c("PresenceStatus").set(q,r,s,t,u);if(v){var w=c("debounceAcrossTransitions")(function(){h.inform(c("AvailableListConstants").ON_AVAILABILITY_CHANGED,q);c("ChatDispatcher").dispatch({type:c("PresenceStatusActionTypes").AVAILABILITY_CHANGED,id:q})},0);w()}}function l(q){var r=q.payload.availability||{};for(var s in r)k(s&&s.toString(),r[s].a,true,"mercury_tabs",r[s].c)}function m(q){if(!q||q==="0"||i.test(q)){c("ChatReliabilityInstrumentation").logERROR("bad id for available list: "+q);return}new(c("AsyncRequest"))("/ajax/mercury/tabs_presence.php").setData({target_id:q}).setHandler(l).setErrorHandler(c("emptyFunction")).setAllowCrossPageTransition(true).send()}function n(q,r){r.chat_config=c("ChatConfig").getDebugInfo();r.available_list_debug_info={count:c("PresenceStatus").getOnlineIDs().length}}var o=undefined;try{o=new(c("ChatproxyPresence"))(function(event){h.inform(event)});o.subscribe()}catch(p){c("ErrorUtils").reportError&&c("ErrorUtils").reportError(p,false);c("ChatReliabilityInstrumentation").logERROR(p.getMessage())}Object.assign(h,{getChatproxyPresenceObject:function q(){return o},get:function q(r){return c("PresenceStatus").get(r)},updateForID:function q(r){if(c("ChatConfig").get("presence_page_green_dot_sub")&&!c("FBIDCheck").isUser_deprecated(r))return;m(r);if(c("PresencePrivacy").getVisibility()==c("PresencePrivacy").ONLINE)c("Run").onAfterLoad(function(){return c("Bootloader").loadModules(["ChannelManager","ChannelTransport"],function(s,t){s.startChannelManager();t.sendAdditionalBuddyRequest(s.getCompleteConfig(),r)},"AvailableList")})},getWebChatNotification:function q(){return o&&o.getWebChatNotification()},isReady:function q(){return!!o},set:function q(r,s,t,u){k(r,s,true,t,u)}});c("Arbiter").subscribe(c("JSLogger").DUMP_EVENT,n);c("PresencePrivacy").subscribe(["privacy-changed","privacy-availability-changed","privacy-user-presence-response"],j);c("requireWeak")("ChannelConnection",function(q){return q.subscribe([q.CONNECTED,q.RECONNECTING,q.SHUTDOWN,q.MUTE_WARNING,q.UNMUTE_WARNING],j)});c("Arbiter").subscribe(c("ChannelConstants").getArbiterType("buddylist_overlay"),function(q,r){var s={},t=r.obj.overlay;for(var u in t){h.set(u,t[u].a,t[u].s||"channel",t[u].vc);if(t[u].la)s[u]=t[u].la}c("LastActiveTimes").update(s)});c("Arbiter").subscribe([c("ChannelConstants").getArbiterType("typ"),c("ChannelConstants").getArbiterType("ttyp")],function(q,r){__p&&__p();var s=r.obj;if(s.st===c("TypingStates").TYPING){var t=s.from;if(c("ChatVisibility").isOnline()){c("BanzaiODS").bumpEntityKey("presence","stale_presence_check_typing");var u=c("PresenceStatus").get(t);if(u!=c("AvailableListConstants").ACTIVE){var v=c("LastActiveTimes").get(t)*1e3,w=c("ServerTime").get();if(!v)c("BanzaiODS").bumpEntityKey("presence","no_detailed_presence_typing");else if(w-v>5*60*1e3){var x="stale_presence_typing",y=w-v;if(y<10*60*1e3)x+="600";else if(y<60*60*1e3)x+="3600";c("BanzaiODS").bumpEntityKey("presence",x)}}}h.set(t&&t.toString(),c("AvailableListConstants").ACTIVE,"channel-typing")}});c("Arbiter").subscribe(c("ChannelConstants").getArbiterType("messaging"),function(q,r){__p&&__p();if(!c("ChatVisibility").isOnline())return;var s=r.obj;if(s.message&&s.message.timestamp&&s.message.sender_fbid){var t=c("ServerTime").get(),u=s.message.timestamp;if(t-u<2*60*1e3){c("BanzaiODS").bumpEntityKey("presence","stale_presence_check");var v=s.message.sender_fbid,w=c("PresenceStatus").get(v);if(w==c("AvailableListConstants").ACTIVE)return;var x=c("LastActiveTimes").get(v)*1e3;if(!x)c("BanzaiODS").bumpEntityKey("presence","no_detailed_presence");else if(u-x>5*60*1e3){var y="stale_presence",z=u-x;if(z<10*60*1e3)y+="600";else if(z<60*60*1e3)y+="3600";c("BanzaiODS").bumpEntityKey("presence",y)}}}});f.exports=h}),null);
__d("ChatOpenTabEventLogger",["Banzai","Bootloader"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h="messaging_tracking",i={_log:function j(k,l,m,n){var o={referrer:k||"",message_thread_id:l,message_view:"chat",timestamp_send:Date.now(),message_target_ids:[]};if(m!==undefined)o.message_target_ids=[m];c("Bootloader").loadModules(["ChatImpressionLogger"],function(p){p.logImpression(k,m,n);c("Banzai").post(h,o,{delay:0,retry:true})},"ChatOpenTabEventLogger")},logClickOpen:function j(k,l,m,n){c("Bootloader").loadModules(["MercuryIDs","getPageIDFromThreadID","ChatImpressionLogger"],function(o,p){this._log(k,l,m,n);var q=p(String(l));if(q)this._logPageClick(k,q)}.bind(this),"ChatOpenTabEventLogger")},logUserClickOpen:function j(k,l,m){c("Bootloader").loadModules(["MercuryIDs","ChatImpressionLogger"],function(n){var o=n.getThreadIDFromUserID(l);this.logClickOpen(k,o,l,m)}.bind(this),"ChatOpenTabEventLogger")},logAutoOpen:function j(k,l,m,n){this._log(k,l,m,n)},logUserAutoOpen:function j(k,l){c("Bootloader").loadModules(["MercuryIDs","ChatImpressionLogger"],function(m){var n=m.getThreadIDFromUserID(l);this._log(k,n,l)}.bind(this),"ChatOpenTabEventLogger")},_logPageClick:function j(k,l){c("Banzai").post("page_message_button_click",{page_id:l,ref:k});c("Bootloader").loadModules(["PagesLogger","PagesLoggerEventEnum","PagesLoggerEventTargetEnum"],function(m,n,o){m.log(l,n.CLICK,o.PAGE_MESSAGE,k)},"ChatOpenTabEventLogger")}};f.exports=i}),null);
__d("ChatSidebarActionTypes",["keyMirror"],(function a(b,c,d,e,f,g){"use strict";f.exports=c("keyMirror")({INIT:null,LOADED:null,SET_ENABLED:null,SHOW:null})}),null);
__d("ChatSidebarHideReason",[],(function a(b,c,d,e,f,g){var h=Object.freeze({VIEWPORT_INCAPABLE:0,LOW_FRIEND_COUNT:1,NOT_ENABLED:2});f.exports=h}),null);
__d("ChatSidebarStore",["ChatDispatcher","ChatOptionsInitialData","ChatSidebarActionTypes","FluxStore","performanceAbsoluteNow"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("FluxStore"));i=h&&h.prototype;function j(){i.constructor.call(this,c("ChatDispatcher"));this.__moduleID=f.id;this.$ChatSidebarStore2={initialized:false,initTime:c("performanceAbsoluteNow")(),loaded:false,enabled:!!c("ChatOptionsInitialData").sidebar_mode,visible:null};this.$ChatSidebarStore1={}}j.prototype.__onDispatch=function(k){__p&&__p();var l=k.type;this.$ChatSidebarStore1=babelHelpers["extends"]({},this.$ChatSidebarStore2);switch(l){case c("ChatSidebarActionTypes").INIT:if(!this.$ChatSidebarStore1.initialized)this.$ChatSidebarStore2.initTime=c("performanceAbsoluteNow")();this.$ChatSidebarStore2.initialized=true;break;case c("ChatSidebarActionTypes").LOADED:this.$ChatSidebarStore2.loaded=true;break;case c("ChatSidebarActionTypes").SHOW:this.$ChatSidebarStore2.visible=k.sidebarType;break;case c("ChatSidebarActionTypes").SET_ENABLED:this.$ChatSidebarStore2.enabled=k.enabled;this.$ChatSidebarStore2.visible=k.sidebarType;break}for(var m in this.$ChatSidebarStore2)if(Object.prototype.hasOwnProperty.call(this.$ChatSidebarStore2,m))if(this.$ChatSidebarStore2[m]!==this.$ChatSidebarStore1[m]){this.__emitChange();break}};j.prototype.getPrevState=function(){return this.$ChatSidebarStore1};j.prototype.getState=function(){return this.$ChatSidebarStore2};j.prototype.isInitialized=function(){return this.$ChatSidebarStore2.initialized};j.prototype.isLoaded=function(){return this.$ChatSidebarStore2.loaded};j.prototype.isEnabled=function(){return this.$ChatSidebarStore2.enabled};j.prototype.getInitTime=function(){return this.$ChatSidebarStore2.initTime};j.prototype.getVisibleType=function(){return this.$ChatSidebarStore2.visible};f.exports=new j()}),null);
__d("ChatSidebarPreloadStore",["InitialChatFriendsList"],(function a(b,c,d,e,f,g){"use strict";var h={onLoaded:function i(j){j({buddies:c("InitialChatFriendsList").list,groups:c("InitialChatFriendsList").groups,shortProfiles:c("InitialChatFriendsList").shortProfiles,nearby:c("InitialChatFriendsList").nearby,recents:c("InitialChatFriendsList").recents,adminedPages:c("InitialChatFriendsList").adminedPages,pageListModule:c("InitialChatFriendsList").pageListModule,pymmList:c("InitialChatFriendsList").pymmList||{},profiles:[]})}};f.exports=h}),null);
__d("ChatProfileStore",["ChatSidebarPreloadStore"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={},i={init:function j(){c("ChatSidebarPreloadStore").onLoaded(function(k){var l=k.profiles,m=k.nearby;return l.filter(function(n){return!m||m.indexOf(n.id)===-1}).forEach(function(n){var o=new Date(),p=n.birthdate&&o.getDate()===n.birthdate.day&&o.getMonth()+1===n.birthdate.month,q=n.profile_picture&&n.profile_picture.uri?n.profile_picture.uri:null;h[n.id]={id:n.id,is_birthday:p,thumbSrc:q,name:n.name,is_messenger_only:!!n.is_messenger_only}})})},get:function j(k){return h[k]}};f.exports=i}),null);
__d("OrderedFriendsList",["AvailableListConstants","ChatProfileStore","ChatSidebarPreloadStore","MercuryIDs","PresenceStatus","SearchableEntry","ShortProfiles","WorkModeConfig","createArrayFromMixed","isValidUniqueID"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=null,i={},j=[],k={};function l(r){r=String(r);return c("MercuryIDs").isValid(r)?r:c("MercuryIDs").getParticipantIDFromUserID(r)}function m(r,s){var t=c("createArrayFromMixed")(r);s(t.filter(function(u){var v=c("ShortProfiles").getNow(u);return!v||p(v)||v.is_nonfriend_messenger_contact}))}function n(r){h=[];var s=0;r.forEach(function(t){var u=t.slice(0,-2),v=t.slice(-1);if(c("PresenceStatus").get(u)==v){h[s]=u;i[u]=s++}})}function o(r){var s=0;r.forEach(function(t){var u=t.slice(0,-2),v=t.slice(-1);if(v==c("AvailableListConstants").ACTIVE){j[s]=u;k[u]=s++}})}function p(r){return r.type==="friend"||c("WorkModeConfig").is_work_user&&r.type==="fb4c"}var q={contains:function r(s){return s in i},getList:function r(s){if(h&&h.length){m(h,s);return}c("ChatSidebarPreloadStore").onLoaded(function(t){var u=t.buddies;n(u);m(h,s)})},getSearchableEntries:function r(s,t,u){__p&&__p();q.getList(function(v){__p&&__p();c("ChatSidebarPreloadStore").onLoaded(function(w){var x=w.groups;c("ShortProfiles").getMulti(v.slice(0,s),function(y){var z=[];for(var A in y)z.push(q.normalizeProfileEntry(y[A],A));var B=t?x.map(q.normalizeThreadEntry):[];u(z.concat(B).filter(function(C){return!!C}).sort(function(C,D){return C.getOrder()-D.getOrder()}))})})})},normalizeProfileEntry:function r(s,t){var u=s.searchTokens||[],v=s.name,w=null;return new(c("SearchableEntry"))({uniqueID:s.id||t,keywordString:u.join(" "),order:q.getRank(s.id||t),photo:s.thumbSrc,title:v,subtitle:w,type:s.type,uri:s.uri,auxiliaryData:{isMessengerUser:s.is_messenger_user}})},normalizeThreadEntry:function r(s,t){__p&&__p();var u=s.mercury_thread,v=s.participants_to_render.map(function(B){return babelHelpers["extends"]({},B,{id:l(B.id)})});u.participants=u.participants.map(l);var w=s.text,x=null;if(!w)w=u.name;var y=v.map(function(B){return B.name}),z=y.join(", ");if(!w)w=z;else x=z;var A=s.uid;if(!w||!c("isValidUniqueID")(A))return null;return new(c("SearchableEntry"))({uniqueID:A,order:t,photo:u.image_src,title:w,subtitle:x,type:"thread",auxiliaryData:{participantsToRender:v,tooltipContent:y.join("\n"),thread:u}})},getRank:function r(s){if(s in i)return i[s];return h?h.length:0},getActiveList:function r(s){if(j.length>0){s(j);return}q.getList(function(t){return s(t)})},getActiveRank:function r(s){return s in k?k[s]:q.getRank(s)}};(function(){c("ChatSidebarPreloadStore").onLoaded(function(r){var s=r.buddies,t=r.shortProfiles;c("ShortProfiles").setMulti(t);o(s);n(s)});c("ChatProfileStore").init()})();f.exports=q}),null);
__d("SidebarType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({SIDEBAR:"sidebar",BUDDYLIST:"buddylist",BUDDYLIST_NUB:"buddylist_nub"})}),null);
__d("ChatSidebarVisibility",["ChatConfig","ChatSidebarHideReason","ChatSidebarStore","OrderedFriendsList","SidebarType","getViewportDimensions","gkx"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("ChatConfig").get("sidebar.min_friends"),i=c("ChatConfig").get("sidebar.minimum_width"),j={getViewport:function k(){return c("gkx")("AT4gz_bRY5sNyXC9w4Akayj0OxvthyCO40TL1o3mvHk46uC52cZoFYJtJRK1uwlf9JMyhc21L_1vGUfFxZI19a9hOgbL7cH2dTTH2gcs-MFRwA")?c("getViewportDimensions")():c("getViewportDimensions").withoutScrollbars()},shouldShowSidebar:function k(l,m){j.shouldShowSidebarIgnoreEnabled(l,function(n,o){var p=c("ChatSidebarStore").isEnabled();m(n&&p,p?o:o.concat([c("ChatSidebarHideReason").NOT_ENABLED]))})},shouldShowSidebarIgnoreEnabled:function k(l,m){__p&&__p();c("OrderedFriendsList").getActiveList(function(n){__p&&__p();var o=l||j.getViewport(),p=o.width>i,q=n.length<h,r=true,s=[];if(!p){r=false;s.push(c("ChatSidebarHideReason").VIEWPORT_INCAPABLE)}if(q){r=false;s.push(c("ChatSidebarHideReason").LOW_FRIEND_COUNT)}m(r,s)})},isSidebarVisible:function k(){return c("ChatSidebarStore").getVisibleType()===c("SidebarType").SIDEBAR},isBuddyListVisible:function k(){return c("ChatSidebarStore").getVisibleType()===c("SidebarType").BUDDYLIST}};f.exports=j}),null);
__d("ChatSidebarActions",["ChatDispatcher","ChatSidebarActionTypes","ChatSidebarVisibility","SidebarType"],(function a(b,c,d,e,f,g){"use strict";var h={init:function i(){c("ChatDispatcher").dispatch({type:c("ChatSidebarActionTypes").INIT})},loaded:function i(){c("ChatDispatcher").dispatch({type:c("ChatSidebarActionTypes").LOADED})},disable:function i(){c("ChatDispatcher").dispatch({type:c("ChatSidebarActionTypes").SET_ENABLED,enabled:false,sidebarType:c("SidebarType").BUDDYLIST})},enable:function i(j){c("ChatDispatcher").dispatch({type:c("ChatSidebarActionTypes").SET_ENABLED,enabled:true,sidebarType:j})},show:function i(j){c("ChatDispatcher").dispatch({type:c("ChatSidebarActionTypes").SHOW,sidebarType:j})}};f.exports=h}),null);
__d("FBRTCDispatcher",["Dispatcher_DEPRECATED"],(function a(b,c,d,e,f,g){"use strict";f.exports=new(c("Dispatcher_DEPRECATED"))()}),null);
__d("FBRTCStore",["FBRTCDispatcher","FluxStore"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("FluxStore"));i=h&&h.prototype;function j(){i.constructor.call(this,c("FBRTCDispatcher"));this.__moduleID=f.id}j.prototype.__emitChange=function(){this.__emitter.emit(this.__changeEvent)};f.exports=j}),null);
__d("VideoCallTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:VideoCallLoggerConfig",this.$VideoCallTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:VideoCallLoggerConfig",this.$VideoCallTypedLogger1,c("Banzai").VITAL)};h.prototype.logImmediately=function(){c("GeneratedLoggerUtils").log("logger:VideoCallLoggerConfig",this.$VideoCallTypedLogger1,{signal:true})};h.prototype.clear=function(){this.$VideoCallTypedLogger1={};return this};h.prototype.getData=function(){return babelHelpers["extends"]({},this.$VideoCallTypedLogger1)};h.prototype.updateData=function(j){this.$VideoCallTypedLogger1=babelHelpers["extends"]({},this.$VideoCallTypedLogger1,j);return this};h.prototype.setCallID=function(j){this.$VideoCallTypedLogger1.call_id=j;return this};h.prototype.setEvent=function(j){this.$VideoCallTypedLogger1.event=j;return this};h.prototype.setIsClient=function(j){this.$VideoCallTypedLogger1.is_client=j;return this};h.prototype.setMessage=function(j){this.$VideoCallTypedLogger1.message=j;return this};h.prototype.setMessageType=function(j){this.$VideoCallTypedLogger1.message_type=j;return this};h.prototype.setPeerID=function(j){this.$VideoCallTypedLogger1.peer_id=j;return this};var i={call_id:true,event:true,is_client:true,message:true,message_type:true,peer_id:true};f.exports=h}),null);
__d("FBRTCCallBlockingStore",["Arbiter","AsyncRequest","ChannelConstants","FBRTCDispatcher","FBRTCStore","VideoCallTypedLogger","setTimeoutAcrossTransitions"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=false,k=0,l=null,m="call_block_setting_changed";h=babelHelpers.inherits(n,c("FBRTCStore"));i=h&&h.prototype;n.prototype.init=function(o){this.$FBRTCCallBlockingStore1(o);c("Arbiter").subscribe(c("ChannelConstants").getArbiterType("videocall_block_setting"),this.$FBRTCCallBlockingStore2.bind(this))};n.prototype.__onDispatch=function(o){if(o.type!==m)return;this.$FBRTCCallBlockingStore1(o.data)};n.prototype.$FBRTCCallBlockingStore1=function(o){__p&&__p();switch(o){case 0:j=false;this.$FBRTCCallBlockingStore3();break;case-1:j=true;this.$FBRTCCallBlockingStore3();break;default:j=true;this.$FBRTCCallBlockingStore4(o)}this.__emitChange()};n.prototype.$FBRTCCallBlockingStore4=function(o){if(l===null)l=c("setTimeoutAcrossTransitions")(this.turnOnVideoCalling.bind(this),o*1e3)};n.prototype.getBlockingStatus=function(){return j};n.prototype.turnOnVideoCalling=function(){new(c("AsyncRequest"))("/ajax/chat/settings.php").setHandler(this.$FBRTCCallBlockingStore5.bind(this)).setData({call_blocked_until:0}).send()};n.prototype.turnOffVideoCalling=function(o){k=o;new(c("AsyncRequest"))("/ajax/chat/settings.php").setHandler(this.$FBRTCCallBlockingStore6.bind(this)).setData({call_blocked_until:o}).send()};n.prototype.$FBRTCCallBlockingStore3=function(){if(l){clearTimeout(l);l=null}};n.prototype.$FBRTCCallBlockingStore5=function(){c("FBRTCDispatcher").dispatch({type:m,data:0});new(c("VideoCallTypedLogger"))().setEvent(m).setMessage("enable").log()};n.prototype.$FBRTCCallBlockingStore6=function(){c("FBRTCDispatcher").dispatch({type:m,data:k});new(c("VideoCallTypedLogger"))().setEvent(m).setMessage("disable_"+k).log()};n.prototype.$FBRTCCallBlockingStore2=function(o,p){c("FBRTCDispatcher").dispatch({type:m,data:p.obj.value})};function n(){h.apply(this,arguments)}f.exports=new n()}),null);
__d("ChatOptions",["Arbiter","ChannelConstants","ChatSidebarActions","ChatSidebarVisibility","FBRTCCallBlockingStore","JSLogger","PresenceUtil","SidebarType","ChatOptionsInitialData"],(function a(b,c,d,e,f,g){__p&&__p();var h=c("JSLogger").create("chat_options"),i={};(function(){var k=c("ChatOptionsInitialData");for(var l in k){var m=k[l];if(l==="call_blocked_until")c("FBRTCCallBlockingStore").init(m);else i[l]=!!m}})();var j=Object.assign(new(c("Arbiter"))(),{getSetting:function k(l){return i[l]},setSetting:function k(l,m,n){__p&&__p();if(l==="sidebar_mode"){c("ChatSidebarVisibility").shouldShowSidebarIgnoreEnabled(null,function(o,p){if(m)c("ChatSidebarActions").enable(o?c("SidebarType").SIDEBAR:c("SidebarType").BUDDYLIST);else c("ChatSidebarActions").disable()});return}if(this.getSetting(l)==m)return;if(n){n="from_"+n;h.log(n,{name:l,new_value:m,old_value:this.getSetting(l)})}i[l]=!!m;c("Arbiter").inform("chat/option-changed",{name:l,value:m})}});c("Arbiter").subscribe(c("ChannelConstants").getArbiterType("setting"),function(k,l){var m=l.obj;if(m.window_id===c("PresenceUtil").getSessionID())return;j.setSetting(m.setting,!!m.value,"channel")});c("Arbiter").subscribe(c("JSLogger").DUMP_EVENT,function(k,l){l.chat_options=i});f.exports=j}),null);
__d("ChatUnreadCountActionTypes",["keyMirror"],(function a(b,c,d,e,f,g){"use strict";f.exports=c("keyMirror")({COUNT_UPDATED:null})}),null);
__d("ErrorMarker.react",["React"],(function a(b,c,d,e,f,g){"use strict";function h(i){return i.children}f.exports=h}),null);
__d("expectationViolation",["ErrorMessageConsoleDEVOnly","FBLogger","emptyFunction","sprintf"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("ErrorMessageConsoleDEVOnly").module,i=c("emptyFunction");function j(l){var m;for(var n=arguments.length,o=Array(n>1?n-1:0),p=1;p<n;p++)o[p-1]=arguments[p];(m=c("FBLogger")("expectation_violation").blameToPreviousFrame()).warn.apply(m,[l].concat(o))}j.setHandler=k;function k(l){i=l}f.exports=j}),null);
__d("getReactComponentDisplayName",[],(function a(b,c,d,e,f,g){"use strict";function h(i){return i.displayName||i.name||"Unknown"}f.exports=h}),null);
__d("getReactElementDisplayName",["getReactComponentDisplayName"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i){if(i==null)return"#empty";if(typeof i==="string"||typeof i==="number")return"#text";if(typeof i.type==="string")return i.type;return c("getReactComponentDisplayName")(i.type)}f.exports=h}),null);
__d("ErrorBoundary.react",["ErrorMarker.react","ErrorMessageConsoleDEVOnly","expectationViolation","FBLogger","React","getReactElementDisplayName"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("ErrorMessageConsoleDEVOnly").module;h=babelHelpers.inherits(k,c("React").Component);i=h&&h.prototype;function k(l){i.constructor.call(this,l);this.hideErrorDialogIUnderstandThisWillMakeBugsHarderToFindAndFix=this.props.hideErrorDialogIUnderstandThisWillMakeBugsHarderToFindAndFix;var m=c("React").Children.only(this.props.children);this.state={error:null,moduleName:c("getReactElementDisplayName")(m)}}k.prototype.componentDidCatch=function(l){var m=this.state.moduleName?this.state.moduleName:"UNKNOWN";try{c("FBLogger")("react_error_boundary").catching(l).mustfix("caught error in module "+m)}catch(n){c("expectationViolation")("encountered error: "+(n&&n.message)+" when logging to FBLogger.\n        Please check error boundary at module "+m)}try{this.props.onHandleError&&this.props.onHandleError(l,m)}catch(n){c("expectationViolation")("encountered error: "+(n&&n.message)+" when executing\n        onHandleError. Please check error boundary at module "+m)}this.setState({error:l})};k.prototype.componentDidUpdate=function(){if(this.state.error){var l=this.state.moduleName?this.state.moduleName:"UNKNOWN";try{this.props.onRenderFallback&&this.props.onRenderFallback(l)}catch(m){c("expectationViolation")("encountered error: "+(m&&m.message)+" when\n          executing onRenderFallback. please check error boundary at module\n          "+l)}}};k.prototype.render=function(){var l=this.state,m=l.error,n=l.moduleName;if(m){var o=this.props.fallbackComponent,p=null;if(o)p=c("React").createElement(o,{error:m,moduleName:n});return c("React").createElement(c("ErrorMarker.react"),null,p)}return c("React").Children.only(this.props.children)};k.defaultProps={hideErrorDialogIUnderstandThisWillMakeBugsHarderToFindAndFix:false};f.exports=k}),null);
__d("ChatPerfTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:ChatPerfLoggerConfig",this.$ChatPerfTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:ChatPerfLoggerConfig",this.$ChatPerfTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$ChatPerfTypedLogger1={};return this};h.prototype.updateData=function(j){this.$ChatPerfTypedLogger1=babelHelpers["extends"]({},this.$ChatPerfTypedLogger1,j);return this};h.prototype.setDuration=function(j){this.$ChatPerfTypedLogger1.duration=j;return this};h.prototype.setEndpoint=function(j){this.$ChatPerfTypedLogger1.endpoint=j;return this};h.prototype.setEvent=function(j){this.$ChatPerfTypedLogger1.event=j;return this};h.prototype.setTabsOpen=function(j){this.$ChatPerfTypedLogger1.tabs_open=j;return this};var i={duration:true,endpoint:true,event:true,tabs_open:true};f.exports=h}),null);
__d("ChatPerfInstrumentation",["Promise","BaseEventEmitter","ChatPerfEvent","ChatPerfTypedLogger","FantaConst","PresenceState","WorkModeConfig","emptyFunction","performanceAbsoluteNow"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("WorkModeConfig").is_work_user,i=h?c("FantaConst").cookieIDs.WORK_COOKIE_ID:c("FantaConst").cookieIDs.PERSONAL_COOKIE_ID,j=c("PresenceState").getInitial(),k=j&&j[i]?j[i].length:0,l=void 0,m={_startTime:Number,_sidebarStartTime:Number,init:function n(){this._startTime=c("performanceAbsoluteNow")();return new(c("Promise"))(function(o){return o()})},initDivebar:function n(){this._sidebarStartTime=c("performanceAbsoluteNow")()},_log:function n(event,o){var p=c("performanceAbsoluteNow")()-(o||this._startTime);if(l)l.emit(event,p);var q=new(c("ChatPerfTypedLogger"))();q.setEvent(event).setDuration(p);q.setTabsOpen(k);q.log()},addPerfTimingsListener:function n(event,o){if(!l)l=new(c("BaseEventEmitter"))();return l.once(event,o)},logInitStores:function n(){this.logInitStores=c("emptyFunction");this._log(c("ChatPerfEvent").CHAT_INIT_STORES)},logInitData:function n(){this.logInitData=c("emptyFunction");this._log(c("ChatPerfEvent").CHAT_INIT_DATA)},logInitUI:function n(){this.logInitUI=c("emptyFunction");this._log(c("ChatPerfEvent").CHAT_INIT_UI)},logInitSound:function n(){this.logInitSound=c("emptyFunction");this._log(c("ChatPerfEvent").CHAT_INIT_SOUND)},logDisplayDone:function n(){this.logDisplayDone=c("emptyFunction");this._log(c("ChatPerfEvent").CHAT_DISPLAY_DONE)},logTTI:function n(){this.logTTI=c("emptyFunction");this._log(c("ChatPerfEvent").TTI)},logCHAT_CONVERSATION_TTI:function n(){this.logCHAT_CONVERSATION_TTI=c("emptyFunction");this._log(c("ChatPerfEvent").CHAT_CONVERSATION_TTI)},logSIDEBAR_FROM_CLIENT_TTI:function n(){this.logSIDEBAR_FROM_CLIENT_TTI=c("emptyFunction");this._log(c("ChatPerfEvent").SIDEBAR_FROM_CLIENT_TTI,this._sidebarStartTime)},logSIDEBAR_DISPLAY_DONE:function n(){this.logSIDEBAR_DISPLAY_DONE=c("emptyFunction");this._log(c("ChatPerfEvent").SIDEBAR_DISPLAY_DONE,this._sidebarStartTime)}};f.exports=m}),null);
__d("FantaDispatcher",["ExplicitRegistrationDispatcher"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("ExplicitRegistrationDispatcher"));i=h&&h.prototype;function j(){h.apply(this,arguments)}f.exports=new j({strict:false})}),null);
__d("WebMessengerThreadPermalinks",["MercuryIDs","MessagingTag","MessengerURIConstants","URI","WWWBase","requireWeak"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={getThreadURI:function j(k,l,m){var n="";if(c("MercuryIDs").isCanonical(k))n=c("MercuryIDs").tokenize(k).value;else c("requireWeak")("MercuryThreadIDMap",function(p){n=p.get().getServerIDFromClientIDNow(k)});var o=h.getThreadURIFromServerID(n||"",m);l&&l(o)},getThreadURIFromServerID:function j(k,l){__p&&__p();var m=new(c("URI"))(c("WWWBase").uri),n=c("MessengerURIConstants").FACEBOOK_PREFIX;if(l)switch(l){case c("MessagingTag").OTHER:n+="/filtered";break;case c("MessagingTag").PENDING:n+="/requests";break;case c("MessagingTag").INBOX:break;default:n+="/"+l;break}m.setPath(n+c("MessengerURIConstants").THREAD_PREFIX+k);return m.toString()},getThreadURIFromUserID:function j(k,l){var m=new(c("URI"))(c("WWWBase").uri),n=c("MessengerURIConstants").FACEBOOK_PREFIX;m.setPath(i(n,l)+"/t/"+k);return m.toString()}};function i(j,k){if(k&&k!=c("MessagingTag").INBOX)j+="/"+k;return j}f.exports=h}),null);
__d("FantaTabActions",["Bootloader","CurrentUser","FantaDispatcher","MessengerURIConstants","URI","WebMessengerThreadPermalinks","gkx","goURI","ifRequired","keyMirror"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("keyMirror")({BLUR_TAB:null,CLOSE_ALL_TABS:null,CLOSE_AND_TAB_NEXT:null,CLOSE_TAB:null,DELETE_TAB:null,FOCUS_NEXT_TAB:null,FOCUS_PREVIOUS_TAB:null,FOCUS_TAB:null,HOVERED_TAB:null,LOAD_FROM_DATA:null,MINIMIZE_ALL_TABS:null,MINIMIZE_TAB:null,OPEN_TAB_WITH_INTERSTITIAL_DATA:null,OPEN_TAB:null,REPLACE_TAB:null,SCROLL_BOTTOM_CHANGED:null,SET_ALLOWED_RAISED_TABS:null,SET_MESSAGE_COUNT:null,SHOW_UNSEEN_MESSAGES:null,UNHOVERED_TAB:null,UNMINIMIZE_TAB:null});function i(k,l){var m=k?new(c("URI"))(c("WebMessengerThreadPermalinks").getThreadURIFromServerID(k)):new(c("URI"))(c("MessengerURIConstants").COMPOSE_SUBPATH);c("ifRequired")("BusinessURI.brands",function(n){return c("goURI")(n(m))},function(){return setTimeout(function(){j.openTab(k,l)},100)})}var j={Types:h,openTab:function k(l,m){__p&&__p();if(c("CurrentUser").isWorkUser()&&c("gkx")("AT7jinnyRPDg4OtD2DVZhvkvAcwN4UEfD67JxgYKN8ktNW7yrzWDgUhjX86ZgaJp_pMk__upuP12-9rZjDRDprZwcbUv5zDffty-rkNZ2YUXjQ")){c("goURI")("workchat://"+(l||""));return}c("ifRequired")("FantaTabsEagerBootloader",function(n){return n.bootload()});this.dispatchOrBootloadGetMessages(function(){c("FantaDispatcher").dispatch({type:h.OPEN_TAB,tabID:l,entryPoint:m});c("ifRequired")("FantaTabsReactApp",function(n){this._tryLoadSlimApp(l,m)}.bind(this),function(){this._tryLoadSlimApp(l,m,function(){return i(l,m)})}.bind(this))}.bind(this))},openInterstitialTab:function k(l,m,n){this.dispatchOrBootloadGetMessages(function(){c("FantaDispatcher").dispatch({type:h.OPEN_TAB_WITH_INTERSTITIAL_DATA,tabID:l,interstitialData:m,entryPoint:n});c("ifRequired")("FantaTabsReactApp",function(o){this._tryLoadSlimAppWithInterstitialData(l,m,n)}.bind(this),function(){this._tryLoadSlimAppWithInterstitialData(l,m,n)}.bind(this))}.bind(this))},_tryLoadSlimApp:function k(l,m,n){c("ifRequired")("FantaTabsSlimApp",function(o){c("ifRequired")("FantaAppStore",function(){},function(){o.getPumpedUp(function(){c("FantaDispatcher").dispatch({type:h.OPEN_TAB,tabID:l,entryPoint:m})})})},function(){return n&&n(l)})},_tryLoadSlimAppWithInterstitialData:function k(l,m,n){c("ifRequired")("FantaTabsSlimApp",function(o){c("ifRequired")("FantaAppStore",function(){},function(){o.getPumpedUp(function(){c("FantaDispatcher").dispatch({type:h.OPEN_TAB_WITH_INTERSTITIAL_DATA,tabID:l,interstitialData:m,entryPoint:n})})})})},replaceTab:function k(l,m){c("FantaDispatcher").dispatch({type:h.REPLACE_TAB,tabID:l,newTabID:m})},minimizeTab:function k(l){c("FantaDispatcher").dispatch({type:h.MINIMIZE_TAB,tabID:l})},minimizeAllTabs:function k(){c("FantaDispatcher").dispatch({type:h.MINIMIZE_ALL_TABS})},unminimizeTab:function k(l){c("FantaDispatcher").dispatch({type:h.UNMINIMIZE_TAB,tabID:l})},closeTab:function k(l){c("FantaDispatcher").dispatch({type:h.CLOSE_TAB,tabID:l})},closeAllTabs:function k(){c("FantaDispatcher").dispatch({type:h.CLOSE_ALL_TABS})},closeAndTabNext:function k(l){c("FantaDispatcher").dispatch({type:h.CLOSE_AND_TAB_NEXT,tabID:l})},deleteTab:function k(l){c("FantaDispatcher").dispatch({type:h.DELETE_TAB,tabID:l})},focusTab:function k(l){c("FantaDispatcher").dispatch({type:h.FOCUS_TAB,tabID:l})},blurTab:function k(l){c("FantaDispatcher").dispatch({type:h.BLUR_TAB,tabID:l})},hoveredTab:function k(l){c("FantaDispatcher").dispatch({type:h.HOVERED_TAB,tabID:l})},unhoveredTab:function k(l){c("FantaDispatcher").dispatch({type:h.UNHOVERED_TAB,tabID:l})},setAllowedRaisedTabs:function k(l){c("FantaDispatcher").dispatch({type:h.SET_ALLOWED_RAISED_TABS,allowedRaisedTabs:l})},loadFromData:function k(l){this.dispatchOrBootloadGetMessages(function(){if(l)c("FantaDispatcher").dispatch({type:h.LOAD_FROM_DATA,tabData:l})})},focusNextTab:function k(event){c("FantaDispatcher").dispatch({type:h.FOCUS_NEXT_TAB,event:event})},focusPreviousTab:function k(event){c("FantaDispatcher").dispatch({type:h.FOCUS_PREVIOUS_TAB,event:event})},scrollBottomChanged:function k(l,m,n){c("FantaDispatcher").dispatch({type:h.SCROLL_BOTTOM_CHANGED,isScrolledToBottom:m,tabID:l,showUnseenMessages:n})},showUnseenMessages:function k(l){c("FantaDispatcher").dispatch({type:h.SHOW_UNSEEN_MESSAGES,tabID:l})},dispatchOrBootloadGetMessages:function k(l){c("ifRequired")("FantaReducersGetMessages",function(){l()},function(){c("ifRequired")("FantaAppStore",function(m){c("Bootloader").loadModules(["FantaReducersGetMessages"],function(n){m.addReducers(n);l()},"FantaTabActions")},function(){l()})})}};f.exports=j}),null);
__d("onAfterLoadSafe",["Run","TimeSlice","requestIdleCallback"],(function a(b,c,d,e,f,g){"use strict";var h=function h(i){return c("TimeSlice").guard(function(){return c("Run").onAfterLoad(function(){c("requestIdleCallback")(i)})},"delayed after load",{propagationType:c("TimeSlice").PropagationType.ORPHAN})()};f.exports=h}),null);
__d("ChatSidebar",["csx","Arbiter","AsyncRequest","Bootloader","ChatConfig","ChatDispatcher","ChatPerfInstrumentation","ChatSidebarActions","ChatSidebarBotsDispatcher","ChatSidebarBotsStore","ChatSidebarCachedViewport","ChatSidebarStore","ChatSidebarVisibility","CSS","CurrentUser","DOM","DOMDimensions","Event","LitestandClassicPlaceHolders","Parent","PresencePrivacy","PresenceUtil","SidebarType","Style","TimeSlice","ViewportBounds","emptyFunction","ge","gkx","onAfterLoadSafe","queryThenMutateDOM"],(function a(b,c,d,e,f,g,h){__p&&__p();var i=c("ChatSidebarBotsDispatcher").module,j=c("ChatSidebarBotsStore").module,k,l,m,n,o,p,q=null,r=false,s,t=true,u=c("ChatSidebarCachedViewport").viewport,v=44,w=30,x=c("ChatConfig").get("expanded_divebar_width");function y(){return c("ChatSidebarStore").getVisibleType()===c("SidebarType").SIDEBAR}function z(N,O){if(!y())return;if(c("CurrentUser").isWorkUser())A(!O);if(O)o.hide();else{o.show();E()}}function A(N){if(q)if(N&&r)c("CSS").show(q);else{r=c("CSS").shown(q);c("CSS").hide(q)}}function B(){return!y()||!n?0:x}function C(){c("CSS").removeClass(document.documentElement,"sidebarMode");if(c("ChatSidebarStore").isInitialized()){o.hide();c("CSS").hide(n);c("CSS").hide(m)}c("Arbiter").inform("sidebar/visibility",false,c("Arbiter").BEHAVIOR_STATE);c("Arbiter").inform("reflow");c("ViewportBounds").inform("change")}function D(N){E(N,M._cacheViewport)}function E(N,O){var P=void 0;c("queryThenMutateDOM")(function(){O&&O();if(!N||N.height!==u.height)P=I()},function(){if(N==null||N.width!==u.width)c("ChatSidebarVisibility").shouldShowSidebar(u,function(Q,R){c("ChatSidebarActions").show(Q?c("SidebarType").SIDEBAR:c("SidebarType").BUDDYLIST)});J(P)})}function F(){c("ChatSidebarVisibility").shouldShowSidebar(u,function(N,O){c("ChatSidebarActions").show(N?c("SidebarType").SIDEBAR:c("SidebarType").BUDDYLIST)});J(I())}function G(N){__p&&__p();var O=u||c("ChatSidebarVisibility").getViewport(),P=O.height;if(N&&N.length){N.forEach(function(Q){if(Q&&Q!==k&&!c("CSS").hasClass(Q,"hidden_elem"))P-=c("DOMDimensions").getElementDimensions(Q).height});if(s)P-=s.getOffset();if(p)P-=c("DOMDimensions").getElementDimensions(p).height}else{P-=v;P-=w}return Math.max(0,P)}function H(){c("CSS").show(m);c("CSS").show(n);if(x>206)c("CSS").addClass(document.documentElement,"sidebarLarger");c("CSS").addClass(document.documentElement,"sidebarMode");o.show();c("Arbiter").inform("sidebar/visibility",true,c("Arbiter").BEHAVIOR_STATE);c("LitestandClassicPlaceHolders").destroy("sidebar");c("ViewportBounds").inform("change")}function I(){return{body:M.getBodyHeight(),item:o.getItemHeight()}}function J(N){if(!N)return;var O=8,P=Math.floor((N.body-O)/N.item);o.setNumTopFriends(P,t,c("SidebarType").SIDEBAR);t=false;var Q=Math.floor(N.body-O);c("Style").set(k,"height",N.body+"px");c("Arbiter").inform("sidebar/resized",Q,c("Arbiter").BEHAVIOR_STATE);c("Arbiter").inform("reflow")}function K(){var N=void 0;c("queryThenMutateDOM")(function(){N=I()},function(){return J(N)})}function L(){new(c("AsyncRequest"))("/ajax/chat/settings.php").setHandler(c("emptyFunction")).setErrorHandler(c("emptyFunction")).setData({sidebar_mode:c("ChatSidebarStore").isEnabled(),window_id:c("PresenceUtil").getSessionID()}).setAllowCrossPageTransition(true).send()}var M={init:function N(O,P,Q){__p&&__p();M.init=c("emptyFunction");c("ChatPerfInstrumentation").initDivebar();c("ChatDispatcher").explicitlyRegisterStore(c("ChatSidebarStore"));if(i&&j)i.explicitlyRegisterStore(j);c("ChatSidebarActions").loaded();n=O;o=P;q=Q;k=c("DOM").find(O,"div.fbChatSidebarBody");m=c("DOM").find(O,"._51x_");p=c("DOM").find(O,"._5qqe");c("Event").listen(window,"resize",function(){var R=babelHelpers["extends"]({},u)||{};D(R)});c("Bootloader").loadModules(["KeyboardShortcuts"],function(R){__p&&__p();R.register("q",function(event){__p&&__p();if(c("ChatSidebarStore").getVisibleType()!==c("SidebarType").SIDEBAR)return;if(!l){var S=c("DOM").scry(O,"._3rhb input");if(S.length>0)l=S[0]}if(l){l.focus();event.prevent()}},{persistOnTransition:true})},"ChatSidebar");o.setScrollContainer(c("Parent").byClass(o.getRoot(),"uiScrollableAreaWrap"));c("Arbiter").subscribe("chat/option-changed",function(R,S){var T=S.name;if(T==="hide_groups"||T==="hide_admined_pages"||T==="hide_businesses")K()});c("Arbiter").subscribe(["AppsDivebar/show-apps","AppsDivebar/hide-apps","PagesDivebar/show-pages","PagesDivebar/hide-pages"],K);c("Arbiter").subscribe("sidebar/typeahead/active",z);c("PresencePrivacy").subscribe("privacy-user-presence-changed",E);c("ChatSidebarStore").addListener(function(){var R=c("ChatSidebarStore").getState(),S=c("ChatSidebarStore").getPrevState();if(R.visible!==S.visible)switch(R.visible){case c("SidebarType").SIDEBAR:H();break;case c("SidebarType").BUDDYLIST:C();break}if(R.enabled!==S.enabled)L()});if(j)j.addListener(function(){return K()});if(c("gkx")("AT4xuZ6KicTRHJ7-VVo2al5OuIgAH2UnbvppZwmWOFgaXXw1Df_vJXJR_TJQJ8YKN1RjtB4EWptwOe1mw8W6tT1FjYsXDZ_wxr3ljwpzw17dng")){F();c("onAfterLoadSafe")(function(){if(u.needsRefresh)D()})}else D();c("onAfterLoadSafe")(function(){c("Bootloader").loadModules(["ChatImpressionLogger"],function(R){R.init(o)},"ChatSidebar")});c("ViewportBounds").addPersistentRight(B);c("Arbiter").inform("sidebar/initialized",M,c("Arbiter").BEHAVIOR_STATE);c("ChatSidebarActions").init();c("ChatPerfInstrumentation").logSIDEBAR_DISPLAY_DONE()},ensureLoaded:function N(){__p&&__p();if(!c("ChatSidebarStore").isEnabled())return;if(c("ChatSidebarStore").isLoaded())return;if(c("ge")("pagelet_sidebar"))return;c("Bootloader").loadModules(["UIPagelet"],function(O){var P=c("DOM").create("div",{id:"pagelet_sidebar"});c("DOM").appendContent(document.body,P);O.loadFromEndpoint("SidebarPagelet","pagelet_sidebar")},"ChatSidebar");c("ChatSidebarActions").loaded()},hide:function N(){if(!c("ChatSidebarStore").isEnabled())return;c("ChatSidebarActions").disable()},unhide:function N(){if(c("ChatSidebarStore").isEnabled())return;c("ChatSidebarVisibility").shouldShowSidebarIgnoreEnabled(null,function(O,P){c("ChatSidebarActions").enable(O?c("SidebarType").SIDEBAR:c("SidebarType").BUDDYLIST)})},_cacheViewport:function N(){u=c("ChatSidebarVisibility").getViewport()},getBodyHeight:function N(){return c("gkx")("AT6ezxCFIuDr3f155YU0cVompttkL6-4ye5A4xnJR5wWiQ5IOmLV0d94XM9VgwajF9248OtJTIz0cnvOn5PCMW2_")?G():G(Array.from(m.childNodes))}};M.init=c("TimeSlice").guard(M.init,"ChatSidebar init");f.exports=M}),null);
__d("MercuryParticipantListRenderer",["fbt","MercuryIDs"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();function i(){__p&&__p();this.$MercuryParticipantListRenderer6=function(s){var t=this.$MercuryParticipantListRenderer5;if(t){var u=c("MercuryIDs").getUserIDFromParticipantID(s.id);if(u&&t[u])return t[u]}return this.$MercuryParticipantListRenderer2?s.short_name:s.name}.bind(this);this.$MercuryParticipantListRenderer1=false;this.$MercuryParticipantListRenderer2=false;this.$MercuryParticipantListRenderer3=false;this.$MercuryParticipantListRenderer4=0;this.$MercuryParticipantListRenderer5=null}i.prototype.renderParticipantList=function(s){var t=s.map(this.$MercuryParticipantListRenderer6);switch(t.length){case 0:return j(this.$MercuryParticipantListRenderer1);case 1:return k(t);case 2:return this.$MercuryParticipantListRenderer3?m(t):l(t);case 3:return this.$MercuryParticipantListRenderer3?o(t):n(t);default:return this.$MercuryParticipantListRenderer3?q(t,this.$MercuryParticipantListRenderer4):p(t,this.$MercuryParticipantListRenderer4)}};i.prototype.setIsNewThread=function(s){this.$MercuryParticipantListRenderer1=s;return this};i.prototype.setNameRenderer=function(s){this.$MercuryParticipantListRenderer6=s;return this};i.prototype.setUseShortName=function(s){this.$MercuryParticipantListRenderer2=s;return this};i.prototype.setNickname=function(s){this.$MercuryParticipantListRenderer5=s;return this};i.prototype.setUseAndSeparator=function(s){this.$MercuryParticipantListRenderer3=s;return this};i.prototype.setTotalParticipantCount=function(s){this.$MercuryParticipantListRenderer4=s;return this};function j(s){if(s)return h._("New message");else return h._("No Participants")}function k(s){return s[0]}function l(s){return h._("{participant1}, {participant2}",[h._param("participant1",s[0]),h._param("participant2",s[1])])}function m(s){return h._("{participant1} and {participant2}",[h._param("participant1",s[0]),h._param("participant2",s[1])])}function n(s){return h._("{participant1}, {participant2}, {participant3}",[h._param("participant1",s[0]),h._param("participant2",s[1]),h._param("participant3",s[2])])}function o(s){return h._("{participant1}, {participant2}  and {participant3}",[h._param("participant1",s[0]),h._param("participant2",s[1]),h._param("participant3",s[2])])}function p(s,t){return h._("{participant1}, {participant2}, {participant3}, {others_link}",[h._param("participant1",s[0]),h._param("participant2",s[1]),h._param("participant3",s[2]),h._param("others_link",r((t||s.length)-3))])}function q(s,t){return h._("{participant1}, {participant2} and {others_link}",[h._param("participant1",s[0]),h._param("participant2",s[1]),h._param("others_link",r((t||s.length)-2))])}function r(s){if(s>1)return h._({"*":"{others_count} others"},[h._param("others_count",s,[0])]);else return h._("1 other")}f.exports=i}),null);
__d("SplitImage.react",["cx","React","Image.react","joinClasses"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;function k(){__p&&__p();var l,m;"use strict";for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.renderImages=function(){__p&&__p();if(!this.props.srcs)return null;var q=this.props.srcs,r=Array.isArray(q);if(r){q=q.filter(function(s){return s!==null});if(!q.length)return null}if(!r||q.length==1)return this.renderOne(r?q[0]:q);return q.length==2?this.renderTwo(q):this.renderThree(q)}.bind(this),this.renderOne=function(q){return c("React").createElement(c("Image.react"),{src:q,width:this.props.size,height:this.props.size,alt:""})}.bind(this),this.renderTwo=function(q){var r=this.props.size,s=Math.floor(r/2),t=-Math.floor(s/2),u="_55lu"+(this.props.border?" _57xo":"");return c("React").createElement("div",null,c("React").createElement("div",{className:"_55lu",style:{width:s}},c("React").createElement(c("Image.react"),{src:q[0],width:r,height:r,style:{marginLeft:t},alt:""})),c("React").createElement("div",{className:u,style:{width:s}},c("React").createElement(c("Image.react"),{src:q[1],width:r,height:r,style:{marginLeft:t},alt:""})))}.bind(this),this.renderThree=function(q){var r=this.props.size,s=Math.floor(r/3*2),t=-Math.floor((r-s)/2),u=Math.floor(r/2),v=r-s,w=-Math.floor((u-v)/2),x="_55lu"+(this.props.border?" _57pl":""),y="_55lu"+(this.props.border?" _57pm":"");return c("React").createElement("div",null,c("React").createElement("div",{className:x,style:{width:s}},c("React").createElement(c("Image.react"),{src:q[0],width:r,height:r,style:{marginLeft:t},alt:""})),c("React").createElement("div",{className:y,style:{width:v,height:u}},c("React").createElement(c("Image.react"),{src:q[1],width:u,height:u,style:{marginLeft:w},alt:""})),c("React").createElement("div",{className:"_55lu",style:{width:v,height:u}},c("React").createElement(c("Image.react"),{src:q[2],width:u,height:u,style:{marginLeft:w},alt:""})))}.bind(this),m}k.prototype.render=function(){"use strict";var l=babelHelpers["extends"]({},this.props);delete l.srcs;var m=this.props.size;return c("React").createElement("div",babelHelpers["extends"]({},l,{className:c("joinClasses")(this.props.className,"_55lt"),style:babelHelpers["extends"]({},this.props.style||{},{width:m,height:m})}),this.renderImages())};f.exports=k}),null);
__d("FluxMixinLegacyInstrumentation",["FluxContainerInstrumentation"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(k){return k.constructor.displayName||k.constructor.name||"FluxMixinLegacy(unknown)"}var i={_callCalculateState:function k(){var l=c("FluxContainerInstrumentation").onCalculateStateStart(h(this)),m=this._FluxMixinLegacyInstrumentationCalculateStateCaller.apply(this,arguments);l&&l();return m},UNSAFE_componentWillMount:function k(){if(!this.constructor._FluxMixinLegacyInstrumentationOnInitCalled){c("FluxContainerInstrumentation").onInit(this.constructor);this.constructor._FluxMixinLegacyInstrumentationOnInitCalled=true}},componentDidUpdate:function k(l,m){var n=c("FluxContainerInstrumentation").getDidUpdateCallback();n&&n({name:h(this),props:{prev:l,cur:this.props},state:{prev:m,cur:this.state}})}};function j(k){if(c("FluxContainerInstrumentation").hasInstrumentation()){k.mixins=k.mixins||[];k.mixins.push(i);k._FluxMixinLegacyInstrumentationCalculateStateCaller=k._callCalculateState;delete k._callCalculateState}return k}f.exports={addInstrumentation:j}}),null);
__d("StoreAndPropBasedStateMixin",["invariant","FluxMixinLegacyInstrumentation","StoreBasedStateMixinHelper","setImmediate"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=function(){__p&&__p();for(var j=arguments.length,k=Array(j),l=0;l<j;l++)k[l]=arguments[l];return c("FluxMixinLegacyInstrumentation").addInstrumentation({_callCalculateState:function m(n){return this.constructor.calculateState(n)},getInitialState:function m(){return this._callCalculateState(this.props)},UNSAFE_componentWillMount:function m(){__p&&__p();this.constructor.calculateState||h(0);this._recalculateStateID=null;var n=function(){if(this.isMounted())this.setState(this._callCalculateState(this.props));this._recalculateStateID=null}.bind(this);this._mixin=new(c("StoreBasedStateMixinHelper"))(k);this._mixin.subscribeCallback(function(){if(this._recalculateStateID===null)this._recalculateStateID=c("setImmediate")(n)}.bind(this))},UNSAFE_componentWillReceiveProps:function m(n){this.setState(this._callCalculateState(n))},componentWillUnmount:function m(){this._mixin.release();this._mixin=null}})}.bind(this);f.exports=i}),null);
__d("Utf16",[],(function a(b,c,d,e,f,g){var h={decode:function i(j){switch(j.length){case 1:return j.charCodeAt(0);case 2:return 65536|(j.charCodeAt(0)-55296)*1024|j.charCodeAt(1)-56320;default:return null}},encode:function i(j){if(j<65536)return String.fromCharCode(j);else return String.fromCharCode(55296+(j-65536>>10))+String.fromCharCode(56320+j%1024)}};f.exports=h}),null);
__d("EmoticonEmojiList",[],(function a(b,c,d,e,f,g){f.exports={names:{":)":"slightsmile",":-)":"slightsmile",":]":"slightsmile","=)":"smile","(:":"slightsmile","(=":"smile",":(":"frown",":-(":"frown",":[":"frown","=(":"frown",")=":"frown",";-P":"winktongue",";P":"winktongue",";-p":"winktongue",";p":"winktongue",":poop:":"poop",":P":"tongue",":-P":"tongue",":-p":"tongue",":p":"tongue","=P":"tongue","=p":"tongue","=D":"grin",":-D":"slightgrin",":D":"slightgrin",":o":"gasp",":-O":"gasp",":O":"gasp",":-o":"gasp",";)":"wink",";-)":"wink","8-)":"glasses","8)":"glasses","B-)":"glasses","B)":"glasses",">:(":"grumpy",">:-(":"grumpy",":/":"unsure",":-/":"unsure",":\\":"unsure",":-\\":"unsure","=/":"unsure","=\\":"unsure",":'(":"cry",":'-(":"cry",":\u2019(":"cry",":\u2019-(":"cry","3:)":"devil","3:-)":"devil","O:)":"angel","O:-)":"angel","0:)":"angel","0:-)":"angel",":*":"kiss",":-*":"kiss",";-*":"winkkiss",";*":"winkkiss","<3":"heart","&lt;3":"heart","\u2665":"heart","^_^":"kiki","^~^":"kiki","-_-":"expressionless",":-|":"squint",":|":"squint",">:o":"upset",">:O":"upset",">:-O":"upset",">:-o":"upset",">_<":"persevere",">.<":"persevere",'<(")':"penguin",O_O:"flushface",o_o:"flushface","0_0":"flushface",T_T:"crying","T-T":"crying",ToT:"crying","T.T":"crying","-3-":"flushkiss","'-_-":"sweating","\u2019-_-":"sweating","(y)":"like",":like:":"like","(Y)":"like","(n)":"dislike","(N)":"dislike"},emote2emojis:{slightsmile:"1f642",smile:"1f60a",frown:"1f61e",winktongue:"1f61c",poop:"1f4a9",tongue:"1f61b",slightgrin:"1f600",grin:"1f603",gasp:"1f62e",wink:"1f609",glasses:"1f60e",grumpy:"1f620",unsure:"1f615",cry:"1f622",devil:"1f608",angel:"1f607",kiss:"1f617",winkkiss:"1f618",heart:"2764",kiki:"1f60a",expressionless:"1f611",squint:"1f610",upset:"1f620",persevere:"1f623",penguin:"1f427",flushface:"1f633",crying:"1f62d",flushkiss:"1f61a",sweating:"1f613",like:"f0000",dislike:"1f44e"},symbols:{slightsmile:":)",smile:"=)",frown:":(",winktongue:";-P",poop:":poop:",tongue:":P",slightgrin:":D",grin:"=D",gasp:":o",wink:";)",glasses:"8-)",grumpy:">:(",unsure:":/",cry:":'(",devil:"3:)",angel:"O:)",kiss:":*",winkkiss:";*",heart:"<3",kiki:"^_^",expressionless:"-_-",squint:":-|",upset:">:o",persevere:">_<",penguin:'<(")',flushface:"O_O",crying:"T_T",flushkiss:"-3-",sweating:"'-_-",like:"(y)",dislike:"(n)"},regexp:/(^|[\s\'\".])(:\)(?!\))|:\-\)(?!\))|:\]|=\)(?!\))|\(:|\(=|:\(|:\-\(|:\[|=\(|\)=|;P|;\-P|;\-p|;p|:poop:|:P|:\-P|:\-p|:p|=P|=p|=D|:\-D|:D|:o|:\-O|:O|:\-o|;\)(?!\))|;\-\)(?!\))|8\-\)(?!\))|B\-\)(?!\))|B\)(?!\))|8\)(?!\))|>:\(|>:\-\(|:\/|:\-\/|:\\|:\-\\|=\/|=\\|:\'\(|:\'\-\(|:\u2019\(|:\u2019\-\(|3:\)(?!\))|3:\-\)(?!\))|O:\)(?!\))|O:\-\)(?!\))|0:\)(?!\))|0:\-\)(?!\))|:\*|:\-\*|;\*|;\-\*|<3|&lt;3|\u2665|\^_\^|\^~\^|\-_\-|:\-\||:\||>:o|>:O|>:\-O|>:\-o|>_<|>\.<|<\(\"\)(?!\))|O_O|o_o|0_0|T_T|T\-T|ToT|T\.T|\-3\-|\'\-_\-|\u2019\-_\-|\(y\)(?!\))|:like:|\(Y\)(?!\))|\(n\)(?!\))|\(N\)(?!\)))([\s\'\".,!?]|<br>|$)/,noncapturingRegexp:/(?:^|[\s\'\".])(:\)(?!\))|:\-\)(?!\))|:\]|=\)(?!\))|\(:|\(=|:\(|:\-\(|:\[|=\(|\)=|;P|;\-P|;\-p|;p|:poop:|:P|:\-P|:\-p|:p|=P|=p|=D|:\-D|:D|:o|:\-O|:O|:\-o|;\)(?!\))|;\-\)(?!\))|8\-\)(?!\))|B\-\)(?!\))|B\)(?!\))|8\)(?!\))|>:\(|>:\-\(|:\/|:\-\/|:\\|:\-\\|=\/|=\\|:\'\(|:\'\-\(|:\u2019\(|:\u2019\-\(|3:\)(?!\))|3:\-\)(?!\))|O:\)(?!\))|O:\-\)(?!\))|0:\)(?!\))|0:\-\)(?!\))|:\*|:\-\*|;\*|;\-\*|<3|&lt;3|\u2665|\^_\^|\^~\^|\-_\-|:\-\||:\||>:o|>:O|>:\-O|>:\-o|>_<|>\.<|<\(\"\)(?!\))|O_O|o_o|0_0|T_T|T\-T|ToT|T\.T|\-3\-|\'\-_\-|\u2019\-_\-|\(y\)(?!\))|:like:|\(Y\)(?!\))|\(n\)(?!\))|\(N\)(?!\)))(?:[\s\'\".,!?]|<br>|$)/}}),null);
__d("LeadGenInfoFieldTypes",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CUSTOM:"CUSTOM",CITY:"CITY",COMPANY_NAME:"COMPANY_NAME",COUNTRY:"COUNTRY",DOB:"DOB",EMAIL:"EMAIL",GENDER:"GENDER",FIRST_NAME:"FIRST_NAME",FULL_NAME:"FULL_NAME",JOB_TITLE:"JOB_TITLE",LAST_NAME:"LAST_NAME",MARITIAL_STATUS:"MARITIAL_STATUS",PHONE:"PHONE",POST_CODE:"POST_CODE",PROVINCE:"PROVINCE",RELATIONSHIP_STATUS:"RELATIONSHIP_STATUS",STATE:"STATE",STREET_ADDRESS:"STREET_ADDRESS",ZIP:"ZIP",WORK_EMAIL:"WORK_EMAIL",MILITARY_STATUS:"MILITARY_STATUS",WORK_PHONE_NUMBER:"WORK_PHONE_NUMBER",MESSENGER:"MESSENGER",STORE_LOOKUP:"STORE_LOOKUP",DATE_TIME:"DATE_TIME",ID_CPF:"ID_CPF"})}),null);
__d("WorkInviteSource",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({RHC_MODULE:"rhc_module",FEED_END_STATE:"feed_end_state",NEWSFEED_NUX:"newsfeed_nux",BULK_UPLOAD:"bulk_upload",GROUP_BULK_UPLOAD:"group_bulk_upload",GROUP_BULK_UPLOAD_FROM_SETTINGS:"group_bulk_upload_from_settings",GROUP_BULK_UPLOAD_FROM_RHC:"group_bulk_upload_from_rhc",GROUP_BULK_UPLOAD_FROM_MEMBERS:"group_bulk_upload_from_members",GROUP_INVITE_DIALOG:"group_invite_dialog",GROUP_INVITE_TYPEAHEAD:"group_invite_typeahead",GROUP_RHC_LINK:"group_rhc_link",GROUP_WORK_GOAL:"group_work_goal",SEARCH_RESULT:"search_result",SEARCH_RHC:"search_rhc",SEARCH_TYPEAHEAD:"search_typeahead",INSTANCE_INVITE_LINK:"instance_invite_link",SIGN_UP:"sign_up",SIGN_UP_CHAT_FIRST:"sign_up_chat_first",SIGN_UP_NON_GENESIS:"sign_up_non_genesis",SIGN_UP_M_SITE:"sign_up_m_site",SETUP_TEAM_SIGNUP_STEP:"setup_team_signup_step",SETUP_TEAM_SIGNUP_STEP_CHAT_FIRST:"setup_team_signup_step_chat_first",FORWARD_INVITE_EMAIL:"forward_invite_email",WORK_GOALS:"work_goals",ACCESS_REQUESTED:"access_requested",ADMIN_ADD_PEOPLE_LINK:"admin_app_people_link",WORK_GOAL_INLINE:"work_goal_inline",AZURE:"azure",AZURE_BULK:"azure_bulk",GSUITE:"gsuite",GSUITE_BULK:"gsuite_bulk",SELF_INVITE:"self_invite",SELF_INVITE_VIA_INVITE_LINK:"self_invite_via_invite_link",SELF_INVITE_VIA_SSO:"self_invite_via_sso",WORKPLACE_FB_COM:"workplace_fb_com",MCG_EXTERNAL_INVITE:"mcg_external_invite",GUEST_MEMBER_INVITE:"guest_member_invite",SUBCOMMUNITY_INVITE:"subcommunity_invite",M2_ADS_TO_NGO:"m2_ads_to_ngo",M2_AYMT_TO_NGO:"m2_aymt_to_ngo",MOBILE_APP_CLAIM:"mobile_app_claim",COMPANY_SUBDOMAIN_LOGIN_PAGE:"company_subdomain_login_page",WORK_FACEBOOK_COM:"work_facebook_com",AYMT:"aymt",TESTS:"tests",E2E_TESTS:"e2e_tests",WWW_BOOKMARK:"www_bookmark",MSITE_BOOKMARK:"msite_bookmark",WWW_BLUEBAR:"www_bluebar",WWW_BLUEBAR_LINK:"www_bluebar_link",WWW_CHAT_SIDEBAR:"www_chat_sidebar",WWW_SIDEBAR_PENDING_SECTION:"www_sidebar_pending_section",WWW_CHAT_THREAD_LIST:"www_chat_thread_list",WWW_FOLLOW_SUGGESTIONS_PAGE:"www_follow_suggestions_page",WWW_FEED_QP:"www_feed_qp",ANDROID_APP:"android_app",ANDROID_INVITE_OPTION_PICKER:"android_invite_option_picker",ANDROID_TYPED_EMAIL:"android_typed_email",ANDROID_GROUP_TYPED_EMAIL:"android_group_typed_email",ANDROID_CONTACT_EMAIL:"android_contact_email",ANDROID_ALL_CONTACT_EMAILS:"android_all_contact_emails",IOS_APP:"ios_app",IOS_GROUP_TYPED_EMAIL:"ios_group_typed_email",IOS_INSTANCE_TYPED_EMAIL:"ios_instance_typed_email",IOS_CONTACT_EMAIL:"ios_contact_email",IOS_ALL_CONTACT_EMAILS:"ios_all_contact_emails",SIGNUP4_E2E_STANDARD_GENESIS:"signup4_e2e_test_standard_genesis",SIGNUP4_E2E_PREMIUM_GENESIS:"signup4_e2e_test_premium_genesis",WORK_MANAGED_CLAIM_TEST:"work_managed_claim_test",UNKNOWN:"unknown"})}),null);
__d("XWorkInviteCoworkersDialogController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/work/invite_coworkers/dialog/",{source:{type:"Enum",required:true,enumType:1},source_product:{type:"Enum",enumType:1},__asyncDialog:{type:"Int"}})}),null);