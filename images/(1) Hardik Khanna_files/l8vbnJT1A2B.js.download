if (self.CavalryLogger) { CavalryLogger.start_js(["iPHRv"]); }

__d("ProfileFrameDiscoveryActionsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:ProfileFrameDiscoveryActionsLoggerConfig",this.$ProfileFrameDiscoveryActionsTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:ProfileFrameDiscoveryActionsLoggerConfig",this.$ProfileFrameDiscoveryActionsTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$ProfileFrameDiscoveryActionsTypedLogger1={};return this};h.prototype.updateData=function(j){this.$ProfileFrameDiscoveryActionsTypedLogger1=babelHelpers["extends"]({},this.$ProfileFrameDiscoveryActionsTypedLogger1,j);return this};h.prototype.setEvent=function(j){this.$ProfileFrameDiscoveryActionsTypedLogger1.event=j;return this};h.prototype.setFrameID=function(j){this.$ProfileFrameDiscoveryActionsTypedLogger1.frame_id=j;return this};h.prototype.setVC=function(j){this.$ProfileFrameDiscoveryActionsTypedLogger1.vc=j;return this};var i={event:true,frame_id:true,vc:true};f.exports=h}),null);
__d("ProfilePictureOverlayTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:ProfilePictureOverlayLoggerConfig",this.$ProfilePictureOverlayTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:ProfilePictureOverlayLoggerConfig",this.$ProfilePictureOverlayTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$ProfilePictureOverlayTypedLogger1={};return this};h.prototype.updateData=function(j){this.$ProfilePictureOverlayTypedLogger1=babelHelpers["extends"]({},this.$ProfilePictureOverlayTypedLogger1,j);return this};h.prototype.setActionID=function(j){this.$ProfilePictureOverlayTypedLogger1.action_id=j;return this};h.prototype.setAppID=function(j){this.$ProfilePictureOverlayTypedLogger1.appid=j;return this};h.prototype.setAppversion=function(j){this.$ProfilePictureOverlayTypedLogger1.appversion=j;return this};h.prototype.setAttachmentType=function(j){this.$ProfilePictureOverlayTypedLogger1.attachment_type=j;return this};h.prototype.setClientCarrier=function(j){this.$ProfilePictureOverlayTypedLogger1.client_carrier=j;return this};h.prototype.setClientMediaType=function(j){this.$ProfilePictureOverlayTypedLogger1.client_media_type=j;return this};h.prototype.setClientOverlaySourceMediaID=function(j){this.$ProfilePictureOverlayTypedLogger1.client_overlay_source_media_id=j;return this};h.prototype.setClientUserID=function(j){this.$ProfilePictureOverlayTypedLogger1.client_userid=j;return this};h.prototype.setClienttime=function(j){this.$ProfilePictureOverlayTypedLogger1.clienttime=j;return this};h.prototype.setContainermodule=function(j){this.$ProfilePictureOverlayTypedLogger1.containermodule=j;return this};h.prototype.setCountry=function(j){this.$ProfilePictureOverlayTypedLogger1.country=j;return this};h.prototype.setDeviceid=function(j){this.$ProfilePictureOverlayTypedLogger1.deviceid=j;return this};h.prototype.setDialogSource=function(j){this.$ProfilePictureOverlayTypedLogger1.dialog_source=j;return this};h.prototype.setEnterCropping=function(j){this.$ProfilePictureOverlayTypedLogger1.enter_cropping=j;return this};h.prototype.setEntryPoint=function(j){this.$ProfilePictureOverlayTypedLogger1.entry_point=j;return this};h.prototype.setEventName=function(j){this.$ProfilePictureOverlayTypedLogger1.event_name=j;return this};h.prototype.setEventid=function(j){this.$ProfilePictureOverlayTypedLogger1.eventid=j;return this};h.prototype.setExpirationTime=function(j){this.$ProfilePictureOverlayTypedLogger1.expiration_time=j;return this};h.prototype.setExpirationTimeDuration=function(j){this.$ProfilePictureOverlayTypedLogger1.expiration_time_duration=j;return this};h.prototype.setFrameType=function(j){this.$ProfilePictureOverlayTypedLogger1.frame_type=j;return this};h.prototype.setHashid=function(j){this.$ProfilePictureOverlayTypedLogger1.hashid=j;return this};h.prototype.setHeismanComposerSessionID=function(j){this.$ProfilePictureOverlayTypedLogger1.heisman_composer_session_id=j;return this};h.prototype.setIsPage=function(j){this.$ProfilePictureOverlayTypedLogger1.is_page=j;return this};h.prototype.setIsemployee=function(j){this.$ProfilePictureOverlayTypedLogger1.isemployee=j;return this};h.prototype.setMfStoryKey=function(j){this.$ProfilePictureOverlayTypedLogger1.mf_story_key=j;return this};h.prototype.setMsqrdMaskID=function(j){this.$ProfilePictureOverlayTypedLogger1.msqrd_mask_id=j;return this};h.prototype.setName=function(j){this.$ProfilePictureOverlayTypedLogger1.name=j;return this};h.prototype.setNumLeftSwipes=function(j){this.$ProfilePictureOverlayTypedLogger1.num_left_swipes=j;return this};h.prototype.setNumRightSwipes=function(j){this.$ProfilePictureOverlayTypedLogger1.num_right_swipes=j;return this};h.prototype.setNumSwipeDirectionChanges=function(j){this.$ProfilePictureOverlayTypedLogger1.num_swipe_direction_changes=j;return this};h.prototype.setNumSwipeableFrames=function(j){this.$ProfilePictureOverlayTypedLogger1.num_swipeable_frames=j;return this};h.prototype.setOtherComposerSessionID=function(j){this.$ProfilePictureOverlayTypedLogger1.other_composer_session_id=j;return this};h.prototype.setPaymentID=function(j){this.$ProfilePictureOverlayTypedLogger1.payment_id=j;return this};h.prototype.setPhotoID=function(j){this.$ProfilePictureOverlayTypedLogger1.photo_id=j;return this};h.prototype.setPhotoSource=function(j){this.$ProfilePictureOverlayTypedLogger1.photo_source=j;return this};h.prototype.setPosterID=function(j){this.$ProfilePictureOverlayTypedLogger1.poster_id=j;return this};h.prototype.setProfileMediaMaskCtaMediaID=function(j){this.$ProfilePictureOverlayTypedLogger1.profile_media_mask_cta_media_id=j;return this};h.prototype.setProfileVideoComposerSessionID=function(j){this.$ProfilePictureOverlayTypedLogger1.profile_video_composer_session_id=j;return this};h.prototype.setProxiedAppID=function(j){this.$ProfilePictureOverlayTypedLogger1.proxied_app_id=j;return this};h.prototype.setSeq=function(j){this.$ProfilePictureOverlayTypedLogger1.seq=j;return this};h.prototype.setSessionid=function(j){this.$ProfilePictureOverlayTypedLogger1.sessionid=j;return this};h.prototype.setSource=function(j){this.$ProfilePictureOverlayTypedLogger1.source=j;return this};h.prototype.setStickerID=function(j){this.$ProfilePictureOverlayTypedLogger1.sticker_id=j;return this};h.prototype.setUseCropping=function(j){this.$ProfilePictureOverlayTypedLogger1.use_cropping=j;return this};h.prototype.setUuid=function(j){this.$ProfilePictureOverlayTypedLogger1.uuid=j;return this};h.prototype.setVC=function(j){this.$ProfilePictureOverlayTypedLogger1.vc=j;return this};h.prototype.setVideoID=function(j){this.$ProfilePictureOverlayTypedLogger1.video_id=j;return this};h.prototype.updateExtraData=function(j){j=c("nullthrows")(c("GeneratedLoggerUtils").serializeMap(j));c("GeneratedLoggerUtils").checkExtraDataFieldNames(j,i);this.$ProfilePictureOverlayTypedLogger1=babelHelpers["extends"]({},this.$ProfilePictureOverlayTypedLogger1,j);return this};h.prototype.addToExtraData=function(j,k){var l={};l[j]=k;return this.updateExtraData(l)};var i={action_id:true,appid:true,appversion:true,attachment_type:true,client_carrier:true,client_media_type:true,client_overlay_source_media_id:true,client_userid:true,clienttime:true,containermodule:true,country:true,deviceid:true,dialog_source:true,enter_cropping:true,entry_point:true,event_name:true,eventid:true,expiration_time:true,expiration_time_duration:true,frame_type:true,hashid:true,heisman_composer_session_id:true,is_page:true,isemployee:true,mf_story_key:true,msqrd_mask_id:true,name:true,num_left_swipes:true,num_right_swipes:true,num_swipe_direction_changes:true,num_swipeable_frames:true,other_composer_session_id:true,payment_id:true,photo_id:true,photo_source:true,poster_id:true,profile_media_mask_cta_media_id:true,profile_video_composer_session_id:true,proxied_app_id:true,seq:true,sessionid:true,source:true,sticker_id:true,use_cropping:true,uuid:true,vc:true,video_id:true};f.exports=h}),null);
__d("PhotoEditorImageData",[],(function a(b,c,d,e,f,g){__p&&__p();function h(j,k,l,m){"use strict";this.r=j;this.g=k;this.b=l;this.a=m}h.fromArray=function(j,k){return new h(j[k],j[k+1],j[k+2],j[k+3])};function i(j){"use strict";this.image_data=j;this.width=j.width;this.height=j.height;this.array=j.data}i.prototype.getData=function(){"use strict";return this.image_data};i.prototype.getWidth=function(){"use strict";return this.width};i.prototype.getHeight=function(){"use strict";return this.height};i.prototype.getPixel=function(j,k){"use strict";var l=this.getIndex(j,k);return h.fromArray(this.array,l)};i.prototype.setPixel=function(j,k,l){"use strict";var m=this.getIndex(j,k);this.array[m]=l.r;this.array[m+1]=l.g;this.array[m+2]=l.b;this.array[m+3]=l.a};i.prototype.getIndex=function(j,k){"use strict";return 4*(j+k*this.width)};i.prototype.forEach=function(j){"use strict";for(var k=0;k<this.getWidth();k++)for(var l=0;l<this.getHeight();l++)this.setPixel(k,l,j(this.getPixel(k,l)))};i.Pixel=h;f.exports=i}),null);
__d("PhotoEditorCanvas",["BlobFactory","DOM","PhotoEditorImageData","PhotoResizeModeConst","Vector","sprintf"],(function a(b,c,d,e,f,g){__p&&__p();function h(i){"use strict";this._editor=i;this._canvas=c("DOM").create("canvas");this._ctx=this._canvas.getContext("2d");this._drawHandler=null}h.prototype.setImageContent=function(i){"use strict";this._canvas.width=i.width;this._canvas.height=i.height;this._ctx.drawImage(i,0,0);return this};h.prototype.drawGraphic=function(){"use strict";this._ctx.drawImage.apply(this._ctx,arguments);return this};h.prototype.isBlobSupported=function(){"use strict";return!!this._canvas.toBlob};h.prototype.getElement=function(){"use strict";return this._canvas};h.prototype.getDimensions=function(){"use strict";return new(c("Vector"))(this._canvas.width,this._canvas.height,"document")};h.prototype.getWidth=function(){"use strict";return this._canvas.width};h.prototype.getHeight=function(){"use strict";return this._canvas.height};h.prototype.getContext=function(){"use strict";return this._ctx};h.prototype.setWidth=function(i){"use strict";this._canvas.width=i;return this};h.prototype.setHeight=function(i){"use strict";this._canvas.height=i;return this};h.prototype.toBlob=function(i){"use strict";if(this.isBlobSupported()){this._canvas.toBlob(i);return}this.getBlobFromDataURL(i)};h.prototype.getBlobFromDataURL=function(i){"use strict";var j=this.toDataURL("image/png"),k=j.match(/^data:(.*?);base64,/),l=k[1],m=j.substr(k[0].length),n=b.atob(m),o=new ArrayBuffer(n.length),p=new Uint8Array(o);for(var q=0;q<n.length;q++)p[q]=n.charCodeAt(q);var r=c("BlobFactory").getBlob([o],{type:l});i(r)};h.prototype.toBlobURL=function(i){"use strict";this.toBlob(function(j){i(b.URL.createObjectURL(j))})};h.prototype.toURL=function(i){"use strict";if(this.isBlobSupported()){this.toBlobURL(i);return}i(this.toDataURL())};h.prototype.toDataURL=function(i){"use strict";return this._canvas.toDataURL(i)};h.prototype.resizedCopy=function(i,j){"use strict";__p&&__p();var k=i.x/this.getWidth(),l=i.y/this.getHeight();if(j==c("PhotoResizeModeConst").CONTAIN)if(k>l)return this.scaledCopy(l);else return this.scaledCopy(k);else if(j==c("PhotoResizeModeConst").COVER)if(k<l)return this.scaledCopy(l);else return this.scaledCopy(k);else throw new Error("mode must be one of PhotoResizeModeConst")};h.prototype.scaledCopy=function(i){"use strict";var j=this._canvas.width*i,k=this._canvas.height*i;return new h().setWidth(j).setHeight(k).drawGraphic(this._canvas,0,0,j,k)};h.prototype.copy=function(){"use strict";return this.scaledCopy(1)};h.prototype.getPixelColor=function(i,j,k){"use strict";var l=new(c("PhotoEditorImageData"))(this.getImageData(i,j,1,1)).getPixel(0,0);if(k)l=k(l);return c("sprintf")("rgba(%s,%s,%s,%s)",l.r,l.g,l.b,l.a)};h.prototype.getImageData=function(i,j,k,l){"use strict";return this._ctx.getImageData(i||0,j||0,k||this.getWidth(),l||this.getHeight())};h.prototype.putImageData=function(i,j,k){"use strict";this._ctx.putImageData(i,j||0,k||0);return this};h.prototype.toDataURI=function(){"use strict";return this._canvas.toDataURL("image/png")};h.prototype.toBase64=function(){"use strict";var i="data:image/png;base64,",j=this.toDataURI();return j.slice(i.length)};h.prototype.applyFilter=function(i,j){"use strict";this.putImageData(new i(this).run(j))};h.prototype.enableDrawing=function(i,j){"use strict";if(!this._editor)return;this.disableDrawing();this._drawHandler=new i(this._editor,j).start();return this._drawHandler};h.prototype.setDrawingFillStyle=function(i){"use strict";if(!this._drawHandler)return;this._drawHandler.setFillStyle(i)};h.prototype.setFillStyle=function(i){"use strict";this._ctx.fillStyle=i};h.prototype.disableDrawing=function(){"use strict";if(!this._drawHandler)return;this._drawHandler.stop();this._drawHandler=null};h.prototype.clear=function(){"use strict";this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height);return this};h.prototype.crop=function(i,j,k,l){"use strict";var m=new h().setWidth(k).setHeight(l);m.drawGraphic(this._canvas,Math.max(0,i),Math.max(0,j),k,l,0,0,k,l);this.setImageContent(m.getElement());return this};h.prototype.fillText=function(i,j,k,l,m,n){"use strict";__p&&__p();this._ctx.font=j;if(n){this._canvas.width=this._ctx.measureText(i).width;this._ctx.font=j}this._ctx.textBaseline="top";this._ctx.fillStyle=k;this._ctx.fillText(i,l,m);return this};h.prototype.fillCircle=function(i,j,k,l){"use strict";this._ctx.fillStyle=l||"black";this._ctx.beginPath();this._ctx.arc(i,j,k,0,Math.PI*2);this._ctx.closePath();this._ctx.fill()};h.prototype.fillRect=function(i,j,k,l,m){"use strict";this._ctx.fillStyle=m||"black";this._ctx.fillRect(i||0,j||0,k||this._canvas.width,l||this._canvas.height);return this};f.exports=h}),null);
__d("PhotoEditorDragRegistrar",["Event","SubscriptionsHandler"],(function a(b,c,d,e,f,g){__p&&__p();function h(i){"use strict";this.root=i;this.$PhotoEditorDragRegistrar1=false;this.$PhotoEditorDragRegistrar2=new(c("SubscriptionsHandler"))();this.$PhotoEditorDragRegistrar2.addSubscriptions(c("Event").listen(this.root,"mousedown",this.$PhotoEditorDragRegistrar3.bind(this)),c("Event").listen(window,"mousemove",this.$PhotoEditorDragRegistrar4.bind(this)),c("Event").listen(window,"mouseup",this.$PhotoEditorDragRegistrar5.bind(this)))}h.prototype.onMouseDown=function(event){"use strict"};h.prototype.onMouseMove=function(event){"use strict"};h.prototype.onMouseUp=function(event){"use strict"};h.prototype.getElement=function(){"use strict";return this.root};h.prototype.$PhotoEditorDragRegistrar3=function(event){"use strict";if(!(event.which&&event.which===1||event.button&&event.button===1))return;this.$PhotoEditorDragRegistrar1=true;this.onMouseDown(event);c("Event").kill(event)};h.prototype.$PhotoEditorDragRegistrar4=function(event){"use strict";if(this.$PhotoEditorDragRegistrar1){this.onMouseMove(event);c("Event").kill(event)}};h.prototype.$PhotoEditorDragRegistrar5=function(event){"use strict";if(this.$PhotoEditorDragRegistrar1){this.onMouseMove(event);this.onMouseUp(event);this.$PhotoEditorDragRegistrar1=false;c("Event").kill(event)}};f.exports=h}),null);
__d("PhotoEditorFont",["PhotoEditorConfig","sprintf"],(function a(b,c,d,e,f,g){__p&&__p();var h=c("PhotoEditorConfig").Constants;function i(j,k,l){"use strict";this.$PhotoEditorFont1=j||h.DEFAULT_FONT_FAMILY;this.$PhotoEditorFont2=k||h.DEFAULT_FONT_SIZE;this.$PhotoEditorFont3=l||h.DEFAULT_FONT_METRIC}i.prototype.setFamily=function(j){"use strict";this.$PhotoEditorFont1=j};i.prototype.getFamily=function(){"use strict";return this.$PhotoEditorFont1};i.prototype.setSize=function(j){"use strict";this.$PhotoEditorFont2=j};i.prototype.getSize=function(){"use strict";return this.$PhotoEditorFont2};i.prototype.setMetric=function(j){"use strict";this.$PhotoEditorFont3=j};i.prototype.getMetric=function(){"use strict";return this.$PhotoEditorFont3};i.prototype.toString=function(){"use strict";return c("sprintf")("%s%s %s",this.$PhotoEditorFont2,this.$PhotoEditorFont3,this.$PhotoEditorFont1)};i.prototype.copy=function(){"use strict";return new i(this.$PhotoEditorFont1,this.$PhotoEditorFont2,this.$PhotoEditorFont3)};i.getDefault=function(){return new i()};f.exports=i}),null);
__d("PhotoEditorGraphic",["cx","ArbiterMixin","PhotoEditorCanvas","CSS","DOM","Draggable","Event","PhotoEditorFont","Rect","SimpleDrag","Style","SubscriptionsHandler","UserAgent_DEPRECATED","Vector","clamp","emptyFunction","mixin","throttle"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j,k,l,m,n,o,p,q,r,s=0,t=[],u=.7,v=.25,w=30,x=50,y=4,z=.8,A=150,B=5,C=function C(M){return{"-webkit-transform":M,"-moz-transform":M,"-ms-transform":M,transform:M}},D=function D(M,N){var O=M.x*N.x+M.y*N.y,P=O/(M.magnitude()*N.magnitude());P=c("clamp")(P,-1,1);var Q=Math.acos(P)*(180/Math.PI),R=M.x*N.y-N.x*M.y;if(R<0)Q*=-1;return Q};function E(){"use strict";__p&&__p();this.root=c("DOM").create("div");c("CSS").addClass(this.root,"_5g8y");c("CSS").addClass(this.root,"_5a2z");var M=c("DOM").create("div");c("CSS").addClass(M,"_2fb7");c("CSS").addClass(M,"_5a2-");this.root.appendChild(M);this.$FreeFormEditButton1=c("emptyFunction");this.$FreeFormEditButton2=c("emptyFunction");this.$FreeFormEditButton3=c("emptyFunction");var N=new(c("SimpleDrag"))(this.root);N.subscribe("start",function(O,event){if(event.button!==0)return false;this.$FreeFormEditButton4=true;c("CSS").addClass(this.root,"_2fb8");this.$FreeFormEditButton1(event)}.bind(this));N.subscribe("update",c("throttle")(this.$FreeFormEditButton5,w,this));N.subscribe("end",function(O,event){this.$FreeFormEditButton4=false;c("CSS").removeClass(this.root,"_2fb8");c("Style").apply(this.root,C("translate(50%, -50%)"));this.$FreeFormEditButton2(event)}.bind(this))}E.prototype.$FreeFormEditButton5=function(M,event){"use strict";if(!this.$FreeFormEditButton4)return;this.$FreeFormEditButton3(event)};E.prototype.setDragStartHandler=function(M){"use strict";this.$FreeFormEditButton1=M;return this};E.prototype.setDragMoveHandler=function(M){"use strict";this.$FreeFormEditButton3=M;return this};E.prototype.setDragEndHandler=function(M){"use strict";this.$FreeFormEditButton2=M;return this};E.prototype.getElement=function(){"use strict";return this.root};function F(){"use strict";this.$DOMDrawer1=new(c("Vector"))();this.$DOMDrawer2=new XMLSerializer();this.$DOMDrawer3=undefined}F.prototype.setDimensions=function(M){"use strict";this.$DOMDrawer1=M;return this};F.prototype.render=function(M){"use strict";var N='<svg xmlns="http://www.w3.org/2000/svg" width="'+this.$DOMDrawer1.x+'" height="'+this.$DOMDrawer1.y+'"><foreignObject width="100%" height="100%"><div xmlns="http://www.w3.org/1999/xhtml">'+this.$DOMDrawer2.serializeToString(M)+"</div></foreignObject></svg>",O=new Image();O.width=this.$DOMDrawer1.x;O.height=this.$DOMDrawer1.y;O.src=this.$DOMDrawer4(N);return O};F.prototype.$DOMDrawer4=function(M){"use strict";return"data:image/svg+xml;base64,"+b.btoa(M)};i=babelHelpers.inherits(G,c("mixin")(c("ArbiterMixin")));j=i&&i.prototype;function G(M,N,O){"use strict";__p&&__p();j.constructor.call(this);this.id=s++;this.photoEditor=M;t.push(this);this.root=c("DOM").create("div");this.maxWidth=N;this.maxHeight=O;c("CSS").addClass(this.root,"_55gm");var P=c("DOM").create("div");c("CSS").addClass(P,"_5g8y");c("CSS").addClass(P,"_bbn");var Q=c("DOM").create("div");c("CSS").addClass(Q,"_2fb7");c("CSS").addClass(Q,"_bbo");P.appendChild(Q);this.root.appendChild(P);this.$Graphic1=c("DOM").create("div");c("CSS").addClass(this.$Graphic1,"_5lzw");this.$Graphic1.appendChild(this.root);this.$Graphic2=new(c("Vector"))(0,0,"document");this.subscriptionsHandler=new(c("SubscriptionsHandler"))();this.subscriptionsHandler.addSubscriptions(c("Event").listen(P,"click",this.remove.bind(this)),c("Event").listen(P,"mousedown",function(event){c("CSS").addClass(P,"_2fb8");event.stopPropagation()}),c("Event").listen(P,"mouseleave",function(event){c("CSS").removeClass(P,"_2fb8")}))}G.prototype.serialize=function(){"use strict";var M=this.getPos(),N=this.getDimensions(),O=this.photoEditor.getCanvasDimensions();return{type:this.constructor,left:M.x/O.x,top:M.y/O.y,width:N.x/O.x,height:N.y/O.y,rotation:this.getRotation()}};G.prototype.initFromSerializedState=function(M){"use strict";var N=this.photoEditor.getCanvasDimensions();this.setDimensions(new(c("Vector"))(M.width*N.x,M.height*N.y));this.setPos(new(c("Vector"))(M.left*N.x,M.top*N.y));this.setRotation(M.rotation)};G.prototype.onActive=function(){"use strict";this.__draggable=this.__draggable||new(c("Draggable"))(this.$Graphic1).setUseAbsolute(true).setUseScroller(false).addHandle(this.root).setDragHandler(this.onDrag.bind(this)).setDropHandler(this.onDrop.bind(this));c("CSS").addClass(this.root,"_36w9");this.updateDraggableBoundingBox()};G.prototype.onInactive=function(){"use strict";this.__draggable&&this.__draggable.destroy();this.__draggable=null;c("CSS").removeClass(this.root,"_36w9")};G.prototype.updateDraggableBoundingBox=function(){"use strict";if(this.__draggable){var M=this.getDimensions(),N=this.photoEditor.getGraphicsLayer(),O=c("Vector").getElementPosition(N),P=c("Vector").getElementDimensions(N),Q=new(c("Rect"))(O.y-M.y,O.x+P.x+M.x,O.y+P.y+M.y,O.x-M.x);this.__draggable.setBoundingBox(Q)}};G.prototype.onBeforeSuddenTransformation=function(){"use strict"};G.prototype.onAfterSuddenTransformation=function(){"use strict"};G.prototype.getElement=function(){"use strict";return this.$Graphic1};G.prototype.getInitialDimensions=function(){"use strict";return new(c("Vector"))(this.maxWidth,this.maxHeight,"document").mul(v)};G.prototype.getPos=function(){"use strict";return this.$Graphic2};G.prototype.getCenterPos=function(){"use strict";return this.getPos().add(this.getDimensions().div(2))};G.prototype.getCenterCoordinates=function(){"use strict";return c("Vector").getElementPosition(this.$Graphic1).add(this.getDimensions().div(2))};G.prototype.isRemoved=function(){"use strict";return!this.$Graphic1.parentNode};G.prototype.setPos=function(M){"use strict";this.$Graphic2=M;c("Style").apply(this.$Graphic1,{left:this.$Graphic2.x+"px",top:this.$Graphic2.y+"px"})};G.prototype.updatePos=function(){"use strict";this.setPos(this.getNewPos())};G.prototype.getNewPos=function(){"use strict";return new(c("Vector"))(c("Style").get(this.$Graphic1,"left"),c("Style").get(this.$Graphic1,"top"))};G.prototype.setDimensions=function(M){"use strict";c("Style").apply(this.root,{width:M.x+"px",height:M.y+"px"});this.updateDraggableBoundingBox()};G.prototype.remove=function(event){"use strict";this.subscriptionsHandler.release();c("DOM").remove(this.$Graphic1);this.photoEditor.removeGraphic(this)};G.prototype.getDrawableObj=function(){"use strict"};G.prototype.getDimensions=function(){"use strict";return c("Vector").getElementDimensions(this.$Graphic1)};G.prototype.getDimensionsForDrawable=function(){"use strict";return c("Vector").getElementDimensions(this.root)};G.prototype.getRotation=function(){"use strict";return 0};G.prototype.setRotation=function(M){"use strict"};G.prototype.onDrag=function(M){"use strict"};G.prototype.onDrop=function(M){"use strict";this.updatePos()};k=babelHelpers.inherits(H,G);l=k&&k.prototype;function H(M,N,O,P,Q){"use strict";__p&&__p();l.constructor.call(this,M,O,P);this.$ImageGraphic1=c("DOM").create("div");c("CSS").addClass(this.$ImageGraphic1,"_36wa");this.root.appendChild(this.$ImageGraphic1);this.$ImageGraphic2=O/P;this.$ImageGraphic3=0;this.$ImageGraphic4=0;this.$ImageGraphic5=true;this.$ImageGraphic6=true;this.$ImageGraphic7=Math.sqrt(2);this.$ImageGraphic8=false;this.$ImageGraphic9=new Image();this.$ImageGraphic9.crossOrigin="anonymous";c("Style").apply(this.$ImageGraphic9,{maxWidth:O+"px",maxHeight:P+"px"});c("CSS").addClass(this.root,"_55jn");c("CSS").addClass(this.root,"loading");this.$ImageGraphic10=c("DOM").create("div");c("CSS").addClass(this.$ImageGraphic10,"_5a2y");if(!Q)this.$ImageGraphic11();this.subscriptionsHandler.addSubscriptions(c("Event").listen(this.$ImageGraphic9,"load",this.$ImageGraphic12.bind(this)),c("Event").listen(this.root,"dragenter",c("Event").prevent),c("Event").listen(this.root,"dragover",c("Event").prevent),c("Event").listen(this.$ImageGraphic1,"mousedown",this.$ImageGraphic13.bind(this)));this.$ImageGraphic9.src=N;this.imageURL=N;this.setDimensions(this.getInitialDimensions())}H.prototype.serialize=function(){"use strict";return babelHelpers["extends"]({},l.serialize.call(this),{imageURL:this.imageURL})};H.prototype.getDrawableObj=function(){"use strict";return this.$ImageGraphic9};H.prototype.onDragStart=function(M){"use strict";l.onDragStart.call(this,M);M.dataTransfer.setData("text/plain",this.$ImageGraphic9.src)};H.prototype.$ImageGraphic11=function(){"use strict";__p&&__p();var M=new E();this.$ImageGraphic10.appendChild(M.getElement());this.root.appendChild(this.$ImageGraphic10);this.subscriptionsHandler.addSubscriptions(c("Event").listen(M.getElement(),"mousedown",function(event){event.stopPropagation()}));M.setDragStartHandler(function(){this.$ImageGraphic14=this.getCenterCoordinates();this.$ImageGraphic15()}.bind(this)).setDragMoveHandler(this.$ImageGraphic16.bind(this)).setDragEndHandler(function(){this.$ImageGraphic3=this.$ImageGraphic4;this.$ImageGraphic17();this.$ImageGraphic18()}.bind(this));this.$ImageGraphic19=M};H.prototype.$ImageGraphic16=function(event){"use strict";__p&&__p();var M=c("Vector").getEventPosition(event),N=this.getDimensions(),O=N.magnitude(),P=N.div(O),Q=this.$ImageGraphic14,R=Q.distanceTo(M),S=c("clamp")(R*2,x,Math.max(this.maxWidth,this.maxHeight))*this.$ImageGraphic7,T=P.mul(S);T.x=T.y*this.$ImageGraphic20;var U=T.sub(N);if(U.magnitude()>y){var V=this.getPos().sub(U.div(2));this.setDimensions(T);this.setPos(V)}if(this.$ImageGraphic5===true){var W=M.sub(Q),X=P.mul(1,-1),Y=D(X,W);this.$ImageGraphic21(Y)}this.updatePos();if(this.$ImageGraphic22)this.$ImageGraphic22()};H.prototype.setPostFreeformEditDragHandler=function(M){"use strict";this.$ImageGraphic22=M};H.prototype.$ImageGraphic21=function(M){"use strict";this.$ImageGraphic4=this.$ImageGraphic3+M;c("Style").apply(this.$ImageGraphic1,C("rotate("+this.$ImageGraphic4+"deg)"));this.$ImageGraphic23(this.$ImageGraphic24+M);c("Style").apply(this.$ImageGraphic19.getElement(),C("translate(50%, -50%) rotate("+M+"deg)"))};H.prototype.$ImageGraphic18=function(){"use strict";this.$ImageGraphic23(this.$ImageGraphic24)};H.prototype.$ImageGraphic17=function(){"use strict";c("Style").set(this.$ImageGraphic10,"transition","transform 0.3s cubic-bezier(.08,.98,.15,1.09)")};H.prototype.$ImageGraphic15=function(){"use strict";c("Style").set(this.$ImageGraphic10,"transition","")};H.prototype.$ImageGraphic23=function(M){"use strict";c("Style").apply(this.$ImageGraphic10,C("rotate("+M+"deg) translateX("+this.getDimensions().magnitude()/(2*this.$ImageGraphic7)+"px) rotate("+-1*M+"deg)"))};H.prototype.$ImageGraphic13=function(event){"use strict";this.photoEditor.setActiveGraphic(this)};H.prototype.$ImageGraphic12=function(){"use strict";__p&&__p();c("CSS").removeClass(this.root,"loading");c("CSS").addClass(this.root,"loaded");this.$ImageGraphic2=this.$ImageGraphic9.width/this.$ImageGraphic9.height;var M=new(c("PhotoEditorCanvas"))();M.setImageContent(this.$ImageGraphic9);c("Style").set(this.$ImageGraphic1,"backgroundImage","url("+M.toDataURL()+")");this.setDimensions(this.getDimensions());this.updatePos();this.inform("loaded")};H.prototype.setPos=function(M){"use strict";l.setPos.call(this,M);var N=this.$ImageGraphic25();c("Style").apply(this.$ImageGraphic1,{left:N.x+"px",top:N.y+"px"})};H.prototype.setDimensions=function(M){"use strict";this.$ImageGraphic20=this.$ImageGraphic6?1:M.x/M.y;c("Style").apply(this.root,{height:(this.$ImageGraphic6?M.x:M.y)+"px",width:M.x+"px"});this.$ImageGraphic24=-Math.atan2(M.y,M.x)*180/Math.PI;var N=this.getImageScale(),O=new(c("Vector"))(M.x,this.$ImageGraphic6?M.x:M.y).mul(N.x,N.y);c("Style").apply(this.$ImageGraphic1,{height:Math.round(O.y)+"px",width:Math.round(O.x)+"px"});this.$ImageGraphic18();this.updateDraggableBoundingBox()};H.prototype.getImageScale=function(){"use strict";var M=this.$ImageGraphic2>1?new(c("Vector"))(1,1/this.$ImageGraphic2):new(c("Vector"))(this.$ImageGraphic2,1);return M.mul(u)};H.prototype.$ImageGraphic25=function(){"use strict";var M=this.getDimensions(),N=this.getDimensionsForDrawable();return M.sub(N).div(2)};H.prototype.getInitialDimensions=function(){"use strict";var M=Math.min(this.maxWidth,this.maxHeight);return new(c("Vector"))(M,M,"document").mul(v)};H.prototype.getDimensionsForDrawable=function(){"use strict";return c("Vector").getElementDimensions(this.$ImageGraphic1)};H.prototype.getRotation=function(){"use strict";return this.$ImageGraphic4};H.prototype.setRotation=function(M){"use strict";this.$ImageGraphic3=this.$ImageGraphic4=M;c("Style").apply(this.$ImageGraphic1,C("rotate("+this.$ImageGraphic3+"deg)"))};H.prototype.setAllowRotation=function(M){"use strict";this.$ImageGraphic5=M;return this};H.prototype.setCircleBoundingBox=function(M){"use strict";this.$ImageGraphic6=M;this.$ImageGraphic7=M?Math.sqrt(2):1;return this};H.prototype.onBeforeSuddenTransformation=function(){"use strict";this.$ImageGraphic15()};H.prototype.onAfterSuddenTransformation=function(){"use strict";this.$ImageGraphic17()};m=babelHelpers.inherits(I,H);n=m&&m.prototype;function I(M,N,O,P,Q,R){"use strict";n.constructor.call(this,M,O,P,Q,R);this.$StickerGraphic1=N}I.prototype.serialize=function(){"use strict";return babelHelpers["extends"]({},n.serialize.call(this),{sticker_id:this.$StickerGraphic1})};I.prototype.onActive=function(){"use strict";n.onActive.call(this);c("CSS").addClass(this.photoEditor.getCanvasWrapper(),"_61d-")};I.prototype.onInactive=function(){"use strict";n.onInactive.call(this);c("CSS").removeClass(this.photoEditor.getCanvasWrapper(),"_61d-")};o=babelHelpers.inherits(J,G);p=o&&o.prototype;function J(M,N,O,P,Q,R,S,T,U,V){"use strict";__p&&__p();p.constructor.call(this,M,T,U);this.$TextGraphic1=new Image();this.$TextGraphic2=P;this.$TextGraphic3=new(c("PhotoEditorFont"))(O);this.$TextGraphic4=null;this.$TextGraphic5=0;this.$TextGraphic6=1;this.$TextGraphic7=0;this.$TextGraphic8=new F().setDimensions(J.ImageSettings.DIMENSIONS);this.$TextGraphic9=R;this.$TextGraphic10=c("DOM").create("textarea");c("Style").apply(this.$TextGraphic10,{position:"absolute",width:J.ImageSettings.WIDTH+"px",padding:"0px",margin:"0px",border:"none",overflow:"hidden",resize:"none",background:"transparent"});var W=c("DOM").create("div",{className:"_3bul"});c("Style").set(W,"width",J.ImageSettings.WIDTH+"px");W.appendChild(this.$TextGraphic10);this.root.appendChild(W);this.$TextGraphic11=Q||new(c("Vector"))(0,0,"document");this.focusInput=c("DOM").create("textarea",{className:"_5g78"});this.$TextGraphic12=c("DOM").create("div",{className:"_5l-2"});this.root.appendChild(this.focusInput);this.root.appendChild(this.$TextGraphic12);c("CSS").addClass(this.root,"loaded");c("CSS").addClass(this.root,"_5g79");this.subscriptionsHandler.addSubscriptions(c("Event").listen(this.$TextGraphic12,"click",function(){this.focusInput.focus()}.bind(this)),c("Event").listen(this.focusInput,"blur",function(){c("CSS").removeClass(this.root,"_5g7a")}.bind(this)),c("Event").listen(this.focusInput,"focus",function(){M.setActiveGraphic(this);c("CSS").addClass(this.root,"_5g7a");this.adjustFontSizeFit()}.bind(this)),c("Event").listen(this.focusInput,"keyup",c("throttle")(this.$TextGraphic13,50,this)));if(!V)this.$TextGraphic14();var X=Math.min(T,U)*z,Y=X/J.ImageSettings.WIDTH;this.$TextGraphic6=Y;this.$TextGraphic15=new(c("Vector"))(X,Y*J.ImageSettings.HEIGHT,"document");this.$TextGraphic15.setElementDimensions(this.root);this.updateText(N)}J.prototype.getInitialDimensions=function(){"use strict";return this.$TextGraphic15};J.prototype.$TextGraphic16=function(event){"use strict";__p&&__p();if(this.$TextGraphic17!==true){var M=c("Vector").getEventPosition(event),N=this.getDimensions(),O=N.magnitude(),P=N.div(O),Q=this.$TextGraphic18,R=Q.distanceTo(M),S=this.photoEditor.getCanvasDimensions(),T=Math.max(S.x,S.y),U=c("clamp")(R*2,x,T),V=P.mul(U),W=V.sub(N);if(W.magnitude()>y){var X=this.getPos().sub(W.div(2));this.setDimensions(V);this.setPos(X)}var Y=Q.sub(M),Z=D(N.mul(-1,1),Y);Z=(Z+360)%360;if(Z%90<B||Z%90>90-B)Z=Math.round(Z/90)*90;this.setRotation(Z);this.updateDraggableBoundingBox();this.updatePos()}else{N=this.getDimensions();M=c("Vector").getEventPosition(event);Q=this.$TextGraphic18;R=Q.sub(M);V=R.mul(-2,2);W=V.sub(N);if(W.magnitude()>y){X=this.getPos().sub(W.div(2));this.setDimensions(V);this.setPos(X)}}if(this.$TextGraphic19)this.$TextGraphic19()};J.prototype.setPostFreeformEditDragHandler=function(M){"use strict";this.$TextGraphic19=M};J.prototype.$TextGraphic14=function(){"use strict";var M=new E();this.root.appendChild(M.getElement());this.subscriptionsHandler.addSubscriptions(c("Event").listen(M.getElement(),"mousedown",function(event){event.stopPropagation()}));M.setDragStartHandler(function(){this.$TextGraphic18=this.getCenterCoordinates()}.bind(this)).setDragMoveHandler(this.$TextGraphic16.bind(this))};J.prototype.setAllowChangeAspectRatio=function(M){"use strict";this.$TextGraphic17=M};J.prototype.$TextGraphic13=function(){"use strict";var M=this.focusInput.value;if(M.length>A)this.focusInput.value=M.substr(0,A);this.updateText(this.focusInput.value)};J.prototype.onActive=function(){"use strict";p.onActive.call(this);this.focusInput.focus();this.inform("focus")};J.prototype.onInactive=function(){"use strict";p.onInactive.call(this);this.focusInput.blur();c("CSS").removeClass(this.root,"_5g7a");this.inform("blur");var M=this.$TextGraphic4.replace(/^\s*/,"").replace(/\s*$/,"");if(!M.length)this.remove()};J.prototype.getRotation=function(){"use strict";return this.$TextGraphic5};J.prototype.setRotation=function(M){"use strict";this.$TextGraphic5=M;c("Style").apply(this.root,C("rotate("+this.$TextGraphic5+"deg)"))};J.prototype.setDimensions=function(M){"use strict";this.$TextGraphic6=M.x/J.ImageSettings.WIDTH;c("Style").apply(this.root,{width:M.x+"px",height:this.$TextGraphic6*J.ImageSettings.HEIGHT+"px"});this.$TextGraphic20()};J.prototype.getDrawableObj=function(){"use strict";return this.$TextGraphic1};J.prototype.getTextAlign=function(){"use strict";return this.$TextGraphic9};J.prototype.getText=function(){"use strict";return this.$TextGraphic4};J.prototype.getFillStyle=function(){"use strict";return this.$TextGraphic2};J.prototype.getFontFamily=function(){"use strict";return this.$TextGraphic3.getFamily()};J.prototype.updateText=function(M,N,O){"use strict";__p&&__p();if(O)this.$TextGraphic2=O;if(N)this.$TextGraphic3.setFamily(N);if(typeof M==="string"){M=M.substr(0,A);if(this.$TextGraphic4!=M){this.focusInput.value=this.$TextGraphic4=M;this.$TextGraphic10.innerText=this.$TextGraphic10.textContent=M}}c("Style").apply(this.focusInput,{textAlign:this.$TextGraphic9,color:this.$TextGraphic2,fontFamily:this.$TextGraphic3.getFamily()});c("Style").apply(this.$TextGraphic10,{textAlign:this.$TextGraphic9,font:this.$TextGraphic3.toString(),color:this.$TextGraphic2});this.adjustFontSizeFit();this.$TextGraphic1=this.$TextGraphic8.render(this.$TextGraphic10)};J.prototype.adjustFontSizeFit=function(){"use strict";__p&&__p();var M=J.ImageSettings.MAX_FONT;this.$TextGraphic3.setSize(M);c("Style").apply(this.$TextGraphic10,{font:this.$TextGraphic3.toString(),height:"0px"});while(this.$TextGraphic10.scrollHeight>J.ImageSettings.HEIGHT){this.$TextGraphic3.setSize(--M);c("Style").set(this.$TextGraphic10,"font",this.$TextGraphic3.toString())}this.$TextGraphic7=(J.ImageSettings.HEIGHT-this.$TextGraphic10.scrollHeight)/2;c("Style").apply(this.$TextGraphic10,{marginTop:this.$TextGraphic7+"px",marginBottom:this.$TextGraphic7+"px",height:this.$TextGraphic10.scrollHeight+"px"});this.$TextGraphic20()};J.prototype.setFontSize=function(M){"use strict";this.$TextGraphic3.setSize(M)};J.prototype.$TextGraphic20=function(){"use strict";var M=this.$TextGraphic6,N=this.$TextGraphic10.clientHeight;setTimeout(function(){c("Style").apply(this.focusInput,{width:J.ImageSettings.WIDTH*M+"px",height:N*M+"px",marginTop:this.$TextGraphic7*M+"px",marginBottom:this.$TextGraphic7*M+"px",fontSize:this.$TextGraphic3.getSize()*M+"px"})}.bind(this),0)};J.prototype.setTextAlign=function(M){"use strict";this.$TextGraphic9=M;this.updateText();return this};J.prototype.setText=function(M){"use strict";this.updateText(M)};J.prototype.setFontFamily=function(M){"use strict";this.$TextGraphic3.setFamily(M);this.updateText()};J.prototype.setFillStyle=function(M){"use strict";this.$TextGraphic2=M;this.updateText()};J.prototype.getColorCoordinates=function(){"use strict";return new(c("Vector"))(this.$TextGraphic11.x,this.$TextGraphic11.y,"document")};J.prototype.setColorCoordinates=function(M){"use strict";this.$TextGraphic11=M};J.prototype.serialize=function(){"use strict";return babelHelpers["extends"]({},p.serialize.call(this),{text:this.$TextGraphic4,fontFamily:this.$TextGraphic3.getFamily(),fill:this.$TextGraphic2,textAlign:this.$TextGraphic9,colorCoordinates:{x:this.$TextGraphic11.x,y:this.$TextGraphic11.y}})};J.prototype.initFromSerializedState=function(M){"use strict";this.$TextGraphic9=M.textAlign;this.$TextGraphic11=M.colorCoordinates;this.updateText(M.text,M.fontFamily,M.fill);p.initFromSerializedState.call(this,M)};J.ImageSettings={WIDTH:200,HEIGHT:120,MAX_FONT:30,DIMENSIONS:new(c("Vector"))(200,120)};q=babelHelpers.inherits(K,H);r=q&&q.prototype;K.prototype.remove=function(){"use strict";r.remove.call(this);b.URL.revokeObjectURL(this.imageURL)};function K(){"use strict";q.apply(this,arguments)}function L(M,N){if(t[M])t[M].onDrop(N)}f.exports={Blob:K,FreeFormEditButton:E,Graphic:G,Image:H,onDrop:L,Sticker:I,Text:J}}),null);
__d("ModalPhotoEditorColorPicker",["cx","PhotoEditorCanvas","CSS","DOM","PhotoEditorDragRegistrar","Style","Vector","clamp","emptyFunction"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j,k=new(c("Vector"))(180,50);i=babelHelpers.inherits(l,c("PhotoEditorDragRegistrar"));j=i&&i.prototype;function l(){__p&&__p();var m=arguments.length<=0||arguments[0]===undefined?null:arguments[0];"use strict";var n=c("DOM").create("div",{className:"_16i9"});j.constructor.call(this,n);this.$ModalPhotoEditorColorPicker1=new(c("Vector"))(k.x,k.y);if(m)this.$ModalPhotoEditorColorPicker1.x=m;this.$ModalPhotoEditorColorPicker2=new(c("Vector"))(0,0,"document");this.$ModalPhotoEditorColorPicker3=c("emptyFunction");this.$ModalPhotoEditorColorPicker4()}l.prototype.$ModalPhotoEditorColorPicker4=function(){"use strict";__p&&__p();this.$ModalPhotoEditorColorPicker5=new(c("PhotoEditorCanvas"))().setWidth(this.$ModalPhotoEditorColorPicker1.x).setHeight(this.$ModalPhotoEditorColorPicker1.y);var m=this.$ModalPhotoEditorColorPicker5.getContext(),n=m.createLinearGradient(0,0,this.$ModalPhotoEditorColorPicker1.x,0);n.addColorStop(.03,"grey");n.addColorStop(.21,"red");n.addColorStop(.35,"yellow");n.addColorStop(.52,"green");n.addColorStop(.67,"lightblue");n.addColorStop(.84,"blue");n.addColorStop(.97,"deeppink");this.$ModalPhotoEditorColorPicker5.fillRect(0,0,this.$ModalPhotoEditorColorPicker1.x,this.$ModalPhotoEditorColorPicker1.y,n);var o=.5;n=m.createLinearGradient(0,0,0,this.$ModalPhotoEditorColorPicker1.y*o);n.addColorStop(0,"rgba(255, 255, 255, 1)");n.addColorStop(.05,"rgba(255, 255, 255, 1)");n.addColorStop(.9,"rgba(255, 255, 255, 0)");this.$ModalPhotoEditorColorPicker5.fillRect(0,0,this.$ModalPhotoEditorColorPicker1.x,this.$ModalPhotoEditorColorPicker1.y,n);n=m.createLinearGradient(0,this.$ModalPhotoEditorColorPicker1.y*(1-o),0,this.$ModalPhotoEditorColorPicker1.y);n.addColorStop(.1,"rgba(0, 0, 0, 0)");n.addColorStop(.95,"rgba(0, 0, 0, 1)");n.addColorStop(1,"rgba(0, 0, 0, 1)");this.$ModalPhotoEditorColorPicker5.fillRect(0,this.$ModalPhotoEditorColorPicker1.y*o,this.$ModalPhotoEditorColorPicker1.x,this.$ModalPhotoEditorColorPicker1.y,n);var p=this.$ModalPhotoEditorColorPicker5.getElement();c("CSS").addClass(p,"_16ia");this.$ModalPhotoEditorColorPicker6=c("DOM").create("div",{className:"_16ib"});this.root.appendChild(p);this.root.appendChild(this.$ModalPhotoEditorColorPicker6);this.$ModalPhotoEditorColorPicker7()};l.prototype.$ModalPhotoEditorColorPicker7=function(){"use strict";this.$ModalPhotoEditorColorPicker2.setElementPosition(this.$ModalPhotoEditorColorPicker6);c("Style").apply(this.$ModalPhotoEditorColorPicker6,{background:this.getColor(),borderColor:this.$ModalPhotoEditorColorPicker8()})};l.prototype.$ModalPhotoEditorColorPicker9=function(m){"use strict";var n=c("Vector").getEventPosition(m,"document").sub(c("Vector").getElementPosition(this.$ModalPhotoEditorColorPicker5.getElement()));return new(c("Vector"))(c("clamp")(n.x,0,this.$ModalPhotoEditorColorPicker1.x-1),c("clamp")(n.y,0,this.$ModalPhotoEditorColorPicker1.y-1),"document")};l.prototype.$ModalPhotoEditorColorPicker10=function(m){"use strict";return this.$ModalPhotoEditorColorPicker5.getPixelColor(m.x,m.y)};l.prototype.$ModalPhotoEditorColorPicker8=function(){"use strict";var m=this.$ModalPhotoEditorColorPicker2;return this.$ModalPhotoEditorColorPicker5.getPixelColor(m.x,m.y,function(n){n.r=Math.round(n.r*.75);n.g=Math.round(n.g*.75);n.b=Math.round(n.b*.75);return n})};l.prototype.setColorChangeHandler=function(m){"use strict";this.$ModalPhotoEditorColorPicker3=m;return this};l.prototype.setColorCoordinates=function(m){"use strict";this.$ModalPhotoEditorColorPicker2=m;this.$ModalPhotoEditorColorPicker7();return this};l.prototype.getColorCoordinates=function(){"use strict";return this.$ModalPhotoEditorColorPicker2};l.prototype.getColor=function(){"use strict";return this.$ModalPhotoEditorColorPicker10(this.$ModalPhotoEditorColorPicker2)};l.prototype.onMouseDown=function(m){"use strict";c("CSS").addClass(this.$ModalPhotoEditorColorPicker6,"_1hx6");this.onMouseMove(m)};l.prototype.onMouseMove=function(m){"use strict";var n=this.$ModalPhotoEditorColorPicker9(m),o=this.$ModalPhotoEditorColorPicker10(n);this.setColorCoordinates(n);this.$ModalPhotoEditorColorPicker3(o)};l.prototype.onMouseUp=function(){"use strict";c("CSS").removeClass(this.$ModalPhotoEditorColorPicker6,"_1hx6");var m=this.$ModalPhotoEditorColorPicker10(this.$ModalPhotoEditorColorPicker2);this.$ModalPhotoEditorColorPicker3(m)};f.exports=l}),null);
__d("ProductTagTypeaheadView",["BOFSellerLoggingSources","DOM","PageProductComposerDialogLoader.react","ProductTaggingTranslations","React","ReactDOM","TagTypeaheadView"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("TagTypeaheadView"));i=h&&h.prototype;function j(k,l){"use strict";__p&&__p();i.constructor.call(this,k,l);this.onProductCreated=function(m){var n=m.products.data[0],o={photo:n.image_url,subtext:n.price,text:n.name,type:"product_item",uid:n.id};this.inform("select",{selected:o});this.inform("afterSelect")}.bind(this);this.hintText=null;this.isShopPage=l.isShopPage;this.pageID=l.pageID;this.showAddProduct=l.showAddProduct}j.prototype.render=function(k,l,m){"use strict";if(typeof k==="string"&&k.length===0){this.reset(true);return}i.render.call(this,k,l,m)};j.prototype.getAdditionalResults=function(){"use strict";if(!this.showAddProduct)return[];var k={photo:"/images/commerce/create-product-typeahead.png",text:c("ProductTaggingTranslations").getAddProductTitle(this.isShopPage),subtext:c("ProductTaggingTranslations").getAddProductSubtitle(this.isShopPage),type:"product_item_add",uid:"product_item_add"};return[k]};j.prototype.select=function(k){"use strict";var l=this.index,m=this.results[l];if(m.type==="product_item_add"){this.reset();c("ReactDOM").render(c("React").createElement(c("PageProductComposerDialogLoader.react"),{onProductCreated:this.onProductCreated,pageID:this.pageID.toString(),source:c("BOFSellerLoggingSources").PRODUCT_TAGGING_TYPEAHEAD}),c("DOM").create("div"));return}i.select.call(this,k)};f.exports=j}),null);
__d("ProfileEditFlowModalEvents",[],(function a(b,c,d,e,f,g){var h=Object.freeze({PROFILE_CHANGED:"ProfileEditPublicModalEvents/profileChanged",PROFILE_PIC_UPLOADED:"ProfileEditPublicModalEvents/profilePicUploaded"});f.exports=h}),null);
__d("ProfileEditFlowModalManager",["Arbiter","ProfileEditFlowModalEvents","TimelineProfilePicConfig","tidyEvent"],(function a(b,c,d,e,f,g){__p&&__p();function h(){"use strict";this.$ProfileEditFlowModalManager1=false;this.$ProfileEditFlowModalManager2=false}h.prototype.informProfilePictureUploaded=function(i){"use strict";c("Arbiter").inform(c("ProfileEditFlowModalEvents").PROFILE_PIC_UPLOADED,i)};h.prototype.isOpen=function(){"use strict";return this.$ProfileEditFlowModalManager1};h.prototype.hasProfileChanged=function(){"use strict";return this.$ProfileEditFlowModalManager2};h.prototype.setIsOpen=function(i){"use strict";this.$ProfileEditFlowModalManager1=i};h.prototype.subscribeProfileChanged=function(){"use strict";c("tidyEvent")(c("Arbiter").subscribeOnce(c("ProfileEditFlowModalEvents").PROFILE_CHANGED,function(){this.$ProfileEditFlowModalManager2=true}.bind(this)))};h.prototype.subscribeOnceProfilePictureUploaded=function(i){"use strict";c("tidyEvent")([c("Arbiter").subscribeOnce(c("ProfileEditFlowModalEvents").PROFILE_PIC_UPLOADED,i),c("Arbiter").subscribeOnce(c("TimelineProfilePicConfig").success,i)])};f.exports=new h()}),null);
__d("PhotoBrowserLink.react",["invariant","AsyncDialog","AsyncRequest","Event","Link.react","Parent","React","XUIButton.react","tidyEvent"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k="data-photo-id";i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$PhotoBrowserLink1=function(){c("AsyncDialog").send(new(c("AsyncRequest"))(this.props.dialogURI),function(r){return c("tidyEvent")(c("Event").listen(r.getRoot(),"click",this.$PhotoBrowserLink2.bind(this,r)))}.bind(this))}.bind(this),n}l.prototype.render=function(){switch(this.props.renderType){case"link":return c("React").createElement(c("Link.react"),babelHelpers["extends"]({},this.props,{href:"#",onClick:this.$PhotoBrowserLink1}),this.props.children);case"button":return c("React").createElement(c("XUIButton.react"),{className:this.props.className,href:"#",label:this.props.label,onClick:this.$PhotoBrowserLink1,size:this.props.size})}h(0)};l.prototype.$PhotoBrowserLink2=function(m,event){var n=c("Parent").byAttribute(event.getTarget(),k);if(n){event.kill();this.props.onPhotoChoose(n.getAttribute(k));m.finishHide()}};l.defaultProps={renderType:"link"};f.exports=l}),null);
__d("ProfileCustomExpirationStrings",["fbt","DateConsts"],(function a(b,c,d,e,f,g,h){__p&&__p();var i={BUTTON_SET:h._("Set"),ERROR_NOTICE:h._("Please select an end time that's at least 1 hour in the future."),getExpirationString:function j(k){if(k<c("DateConsts").SEC_PER_DAY)return this._getHourString(k);else if(k<c("DateConsts").SEC_PER_WEEK)return this._getDayString(k);else return this._getWeekString(k)},_getHourString:function j(k){var l=Math.round(k/c("DateConsts").SEC_PER_HOUR);return h._({"*":"{numHours} hours","_1":"1 hour"},[h._plural(l,"numHours")])},_getDayString:function j(k){var l=Math.round(k/c("DateConsts").SEC_PER_DAY);return h._({"*":"{numDays} days","_1":"1 day"},[h._plural(l,"numDays")])},_getWeekString:function j(k){var l=Math.round(k/c("DateConsts").SEC_PER_WEEK);return h._({"*":"{numWeeks} weeks","_1":"1 week"},[h._plural(l,"numWeeks")])}};f.exports=i}),null);
__d("ProfileCustomExpirationDialog.react",["cx","DatePickerRestraints","DateConsts","ProfileCustomExpirationStrings","React","XUIDateTimePickerUtils","XUIDateTimePicker.react","XUIDialog.react","XUIDialogBody.react","XUIDialogButton.react","XUIDialogCancelButton.react","XUIDialogFooter.react","XUIDialogTitle.react","XUINotice.react"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j,k=c("React").PropTypes,l=520;i=babelHelpers.inherits(m,c("React").Component);j=i&&i.prototype;function m(){var n,o;"use strict";for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.state={date:this.props.initialDate},o}m.prototype.render=function(){"use strict";var n=this.state.date.getTime(),o=!!(n>=this.props.earliestDateAllowed.getTime()),p=new Date(this.props.earliestDateAllowed.getTime()),q=p.getTimezoneOffset()/c("DateConsts").MIN_PER_HOUR*-1,r=this.$ProfileCustomExpirationDialog1(p,q);return c("React").createElement(c("XUIDialog.react"),{layerHideOnBlur:false,shown:this.props.shown,width:l},c("React").createElement(c("XUIDialogTitle.react"),{showCloseButton:false},this.props.title),c("React").createElement(c("XUIDialogBody.react"),null,c("React").createElement(c("XUIDateTimePicker.react"),{className:"_3-8x",date:this.state.date,dateRestraints:r,onChange:function(s){return this.setState({date:s})}.bind(this)}),this.$ProfileCustomExpirationDialog2(o)),c("React").createElement(c("XUIDialogFooter.react"),null,c("React").createElement(c("XUIDialogCancelButton.react"),{onClick:this.props.onCancel}),c("React").createElement(c("XUIDialogButton.react"),{action:"confirm",disabled:!o,label:c("ProfileCustomExpirationStrings").BUTTON_SET,onClick:function(){return this.props.onSubmit(this.state.date)}.bind(this),use:"confirm"})))};m.prototype.$ProfileCustomExpirationDialog2=function(n){"use strict";return c("React").createElement(c("XUINotice.react"),{className:"_3-8x"+(n?" hidden_elem":""),use:"warn"},c("ProfileCustomExpirationStrings").ERROR_NOTICE)};m.prototype.$ProfileCustomExpirationDialog1=function(n,o){"use strict";var p=c("XUIDateTimePickerUtils").getOffsetUIDate(n,o),q=this.$ProfileCustomExpirationDialog3(p);return[c("DatePickerRestraints").enforceDateIsNoEarlierThan(q)]};m.prototype.$ProfileCustomExpirationDialog3=function(n){"use strict";return new Date(Date.UTC(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()))};m.propTypes={earliestDateAllowed:k.instanceOf(Date).isRequired,initialDate:k.instanceOf(Date),onCancel:k.func,onSubmit:k.func.isRequired,shown:k.bool.isRequired,title:k.node};m.defaultProps={earliestDateAllowed:new Date(Date.now()+c("DateConsts").MS_PER_HOUR),initialDate:new Date(Date.now()+7*c("DateConsts").MS_PER_DAY)};f.exports=m}),null);
__d("ProfilePicCanvas",["PhotoEditorCanvas"],(function a(b,c,d,e,f,g){__p&&__p();function h(i){"use strict";this.$ProfilePicCanvas1=new(c("PhotoEditorCanvas"))();this.$ProfilePicCanvas1.setImageContent(i);this.$ProfilePicCanvas2=[];this.$ProfilePicCanvas3=1}h.prototype.toBlob=function(i){"use strict";this.$ProfilePicCanvas4().toBlob(i)};h.prototype.addGraphic=function(i,j){"use strict";i.setPos(j);this.$ProfilePicCanvas2.push(i)};h.prototype.setResizeFactor=function(i){"use strict";this.$ProfilePicCanvas3=i;return this};h.prototype.getLayerCount=function(){"use strict";return this.$ProfilePicCanvas2.length};h.prototype.$ProfilePicCanvas5=function(){"use strict";return window.devicePixelRatio||1};h.prototype.$ProfilePicCanvas6=function(i){"use strict";return i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1};h.prototype.$ProfilePicCanvas4=function(){"use strict";__p&&__p();var i=this.$ProfilePicCanvas1.getWidth(),j=new(c("PhotoEditorCanvas"))(),k=j.getContext();j.setImageContent(this.$ProfilePicCanvas1.getElement());var l=this.$ProfilePicCanvas5(),m=this.$ProfilePicCanvas6(k),n=l/m;if(n!==1){j=j.scaledCopy(n);k=j.getContext();k.scale(n,n);k.save()}var o=void 0,p=void 0;for(var q=0;q<this.$ProfilePicCanvas2.length;q++){o=this.$ProfilePicCanvas2[q];p=o.getPos();k.save();k.translate(p.x,p.y);j.drawGraphic(o.getDrawableObj(),0,0,i*this.$ProfilePicCanvas3,i*this.$ProfilePicCanvas3);k.restore()}return j};f.exports=h}),null);
__d("ProfilePicCoordinatesUtil",[],(function a(b,c,d,e,f,g){var h={getThumbnailCoordinates:function i(j,k){return{endX:Math.abs((j.x+j.width)/k.width),endY:Math.abs((j.y+j.height)/k.height),startX:Math.abs(j.x/k.width),startY:Math.abs(j.y/k.height)}}};f.exports=h}),null);
__d("ProfileTemporaryOption",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({HOUR:3600,DAY:86400,WEEK:604800,PERMANENT:-1,CUSTOM:-2})}),null);
__d("ProfilePicExpirationSelector.react",["cx","DateConsts","ProfilePicCropViewerStrings","ProfileCustomExpirationStrings","React","Layout.react","ProfileCustomExpirationDialog.react","ProfileTemporaryOption","XUIGrayText.react","XUISelector.react","joinClasses"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j,k=c("Layout.react").Column,l=c("XUISelector.react").Option,m=c("React").PropTypes;i=babelHelpers.inherits(n,c("React").PureComponent);j=i&&i.prototype;function n(){__p&&__p();var o,p;"use strict";for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=j.constructor).call.apply(o,[this].concat(r)),this.state={customExpirationString:c("ProfilePicCropViewerStrings").TEMPORARY_OPTION_CUSTOM,showCustomExpirationDialog:false,value:this.props.defaultValue},this.$ProfilePicExpirationSelector3=function(t){this.setState({value:t.value});if(this.props.showCustomOption&&t.value===c("ProfileTemporaryOption").CUSTOM)this.setState({showCustomExpirationDialog:true});else this.props.onChange(t.value)}.bind(this),this.$ProfilePicExpirationSelector2=function(t){var u=Math.round((t.getTime()-Date.now())/c("DateConsts").MS_PER_SEC);this.setState({customExpirationString:c("ProfileCustomExpirationStrings").getExpirationString(u),showCustomExpirationDialog:false,value:c("ProfileTemporaryOption").CUSTOM});this.props.onChange(u)}.bind(this),this.$ProfilePicExpirationSelector1=function(){var t=Object.keys(c("ProfileTemporaryOption")).map(function(v){return c("ProfileTemporaryOption")[v]}),u=t.indexOf(this.props.defaultValue)===-1?c("ProfileTemporaryOption").CUSTOM:this.props.defaultValue;this.setState({showCustomExpirationDialog:false,value:u})}.bind(this),p}n.prototype.render=function(){"use strict";var o=null,p=null;if(this.props.showCustomOption){o=c("React").createElement(l,{onclick:function(){return this.setState({showCustomExpirationDialog:true})}.bind(this),value:c("ProfileTemporaryOption").CUSTOM},this.state.customExpirationString);p=c("React").createElement(c("ProfileCustomExpirationDialog.react"),{onCancel:this.$ProfilePicExpirationSelector1,onSubmit:this.$ProfilePicExpirationSelector2,shown:this.state.showCustomExpirationDialog,title:c("ProfilePicCropViewerStrings").DIALOG_TITLE})}return c("React").createElement(c("Layout.react"),{className:c("joinClasses")("_31ka",this.props.className)},c("React").createElement(k,{className:"_3m_e"},c("React").createElement(c("XUIGrayText.react"),{className:"_3-91",shade:"medium",size:"meta1"},c("ProfilePicCropViewerStrings").TEMPORARY_PROFILE_PIC_CONTROL)),c("React").createElement(k,null,c("React").createElement(c("XUISelector.react"),{defaultValue:this.props.defaultValue,onChange:this.$ProfilePicExpirationSelector3,size:"large",value:this.state.value},c("React").createElement(l,{value:c("ProfileTemporaryOption").HOUR},c("ProfilePicCropViewerStrings").TEMPORARY_OPTION_ONE_HOUR),c("React").createElement(l,{value:c("ProfileTemporaryOption").DAY},c("ProfilePicCropViewerStrings").TEMPORARY_OPTION_ONE_DAY),c("React").createElement(l,{value:c("ProfileTemporaryOption").WEEK},c("ProfilePicCropViewerStrings").TEMPORARY_OPTION_ONE_WEEK),c("React").createElement(l,{value:c("ProfileTemporaryOption").PERMANENT},c("ProfilePicCropViewerStrings").TEMPORARY_OPTION_NEVER),o)),p)};n.propTypes={defaultValue:m.number.isRequired,onChange:m.func.isRequired,showCustomOption:m.bool};f.exports=n}),null);
__d("ProfilePicOverlaySearchSource",["AbstractSearchSource","SearchableEntry"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("AbstractSearchSource"));i=h&&h.prototype;function j(k){"use strict";i.constructor.call(this);this.$ProfilePicOverlaySearchSource1=k}j.prototype.searchImpl=function(k,l,m){"use strict";var n=this.$ProfilePicOverlaySearchSource1,o=[];if(k===""&&n){m=m||{};n.forEach(function(p,q){o.push(new(c("SearchableEntry"))({order:q,title:p,uniqueID:p}))})}l(o,k)};f.exports=j}),null);
__d("ProfilePicOverlaySearchInput.react",["ix","cx","fbt","React","Image.react","XUITypeahead.react","ProfilePicOverlaySearchSource","XUITypeaheadView.react","debounce","fbglyph"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k,l,m=700;k=babelHelpers.inherits(n,c("React").PureComponent);l=k&&k.prototype;function n(o){"use strict";__p&&__p();l.constructor.call(this,o);this.$ProfilePicOverlaySearchInput4=function(p){__p&&__p();this.props.onChange&&this.props.onChange();this.$ProfilePicOverlaySearchInput1&&this.$ProfilePicOverlaySearchInput1.reset();var q=p.getTitle();this.setState({value:q});var r=this.props.onQuery;if(r){this.$ProfilePicOverlaySearchInput1=c("debounce")(function(){return r(q)},m,this);this.$ProfilePicOverlaySearchInput1()}}.bind(this);this.$ProfilePicOverlaySearchInput3=function(event){__p&&__p();this.props.onChange&&this.props.onChange(event);var p=event.target.value;this.$ProfilePicOverlaySearchInput1&&this.$ProfilePicOverlaySearchInput1.reset();if(p.length===0){this.$ProfilePicOverlaySearchInput2();return}this.setState({value:p});var q=this.props.onQuery;if(q){this.$ProfilePicOverlaySearchInput1=c("debounce")(function(){return q(p)},m,this);this.$ProfilePicOverlaySearchInput1()}}.bind(this);this.state={value:this.props.value||"",source:new(c("ProfilePicOverlaySearchSource"))(this.props.suggestedSearchQueries)}}n.prototype.UNSAFE_componentWillReceiveProps=function(o){"use strict";if(this.props.value!==o.value)this.setState({value:o.value||""})};n.prototype.render=function(){"use strict";var o=null;if(this.state.value.length>0)o=c("React").createElement(c("Image.react"),{className:"_kjd _kjf",onClick:this.$ProfilePicOverlaySearchInput2.bind(this),src:h("125922")});else o=c("React").createElement(c("Image.react"),{className:"_kjd",src:h("126435")});var p=j._("Search for themes, owner names and more.");return c("React").createElement("div",{className:"_kjg"},c("React").createElement(c("XUITypeahead.react"),{className:"_ih_",highlightOnSelect:true,initialEntry:null,onChange:this.$ProfilePicOverlaySearchInput3,onSelectAttempt:this.$ProfilePicOverlaySearchInput4,placeholder:p,presenter:{ViewRenderer:c("XUITypeaheadView.react"),useLayer:true},queryString:this.state.value,searchSource:this.state.source,showEntriesOnFocus:true,tallInput:true}),o)};n.prototype.$ProfilePicOverlaySearchInput2=function(){"use strict";this.setState({value:""});this.props.onClear&&this.props.onClear()};f.exports=n}),null);
__d("XProfilePicCropAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/profile/picture/crop_profile_pic/",{photo_id:{type:"Int",required:true},profile_id:{type:"Int",required:true},height:{type:"Float",required:true},width:{type:"Float",required:true},x:{type:"Float",required:true},y:{type:"Float",required:true},source:{type:"Enum",defaultValue:"timeline",enumType:1},method:{type:"Enum",defaultValue:"existing",enumType:1},redirect_uri:{type:"String"},sticker_id:{type:"Int"},expiration_duration:{type:"Int"},caption:{type:"String"},overlay_source_object_id:{type:"FBID"},payment_id:{type:"FBID"},set_profile_photo_shield:{type:"String"},sessionid:{type:"String"}})}),null);
__d("XProfilePicMakeAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/profile/picture/make_profile_pic/",{end_x:{type:"Float"},end_y:{type:"Float"},photo_id:{type:"Int",required:true},profile_id:{type:"Int",required:true},source:{type:"Enum",defaultValue:"timeline",enumType:1},start_x:{type:"Float"},start_y:{type:"Float"},method:{type:"Enum",defaultValue:"existing",enumType:1},expiration_duration:{type:"Int"},caption:{type:"String"},sticker_source_object_id:{type:"Int"}})}),null);
__d("XProfilePicSaver",["AsyncRequest","AsyncUploadRequest","ArbiterMixin","ProfilePictureFlowLogging","XProfilePicCropAsyncController","XProfilePicMakeAsyncController","mixin","tidyEvent"],(function a(b,c,d,e,f,g){__p&&__p();var h,i,j=c("ProfilePictureFlowLogging").step;h=babelHelpers.inherits(k,c("mixin")(c("ArbiterMixin")));i=h&&h.prototype;function k(l,m,n){var o=arguments.length<=3||arguments[3]===undefined?c("XProfilePicCropAsyncController").getURIBuilder():arguments[3];"use strict";i.constructor.call(this);this.$XProfilePicSaver1=l;this.$XProfilePicSaver2=m;this.$XProfilePicSaver3=n;this.$XProfilePicSaver10=o}k.prototype.setProfilePhotoSource=function(l){"use strict";this.$XProfilePicSaver4=l;return this};k.prototype.setProfilePhotoMethod=function(l){"use strict";this.$XProfilePicSaver5=l;return this};k.prototype.setFlowType=function(l){"use strict";this.$XProfilePicSaver6=l;return this};k.prototype.setProfilePhotoShield=function(l){"use strict";this.$XProfilePicSaver8=l;return this};k.prototype.setSessionID=function(l){"use strict";this.$XProfilePicSaver9=l;return this};k.prototype.saveCroppedProfilePic=function(l,m,n,o,p){"use strict";var q=this.$XProfilePicSaver10.setFloat("x",l.x).setFloat("y",l.y).setFloat("width",Math.min(l.width,1)).setFloat("height",Math.min(l.height,1));m&&q.setInt("sticker_id",m.id);p&&q.setFBID("payment_id",p);this.$XProfilePicSaver8&&q.setBool("set_profile_photo_shield",this.$XProfilePicSaver8);this.$XProfilePicSaver9&&q.setString("sessionid",this.$XProfilePicSaver9);this.$XProfilePicSaver7=true;this.$XProfilePicSaver11(q,m,n,o);this.$XProfilePicSaver12(j.CROP_SAVING)};k.prototype.saveAsProfilePic=function(){"use strict";this.$XProfilePicSaver13()};k.prototype.saveAsProfilePicWithPosition=function(l,m){"use strict";this.$XProfilePicSaver13(l,m)};k.prototype.$XProfilePicSaver13=function(l,m){"use strict";this.$XProfilePicSaver7=false;var n=c("XProfilePicMakeAsyncController").getURIBuilder();if(l)n.setFloat("start_x",100*l.startX).setFloat("start_y",100*l.startY).setFloat("end_x",100*l.endX).setFloat("end_y",100*l.endY);this.$XProfilePicSaver11(n,null,m);this.$XProfilePicSaver12(j.PREVIOUS_PIC_SAVING)};k.prototype.$XProfilePicSaver14=function(l){"use strict";this.inform("error",l);this.$XProfilePicSaver12(this.$XProfilePicSaver7?j.CROP_FAIL:j.PREVIOUS_PIC_FAIL)};k.prototype.$XProfilePicSaver12=function(l){"use strict";this.$XProfilePicSaver6&&c("ProfilePictureFlowLogging").setFlowType(this.$XProfilePicSaver6);c("ProfilePictureFlowLogging").log(l)};k.prototype.$XProfilePicSaver11=function(l,m,n,o){"use strict";__p&&__p();l.setInt("photo_id",this.$XProfilePicSaver1).setInt("profile_id",this.$XProfilePicSaver2).setEnum("source",this.$XProfilePicSaver4||"photo_view").setInt("expiration_duration",this.$XProfilePicSaver3);this.$XProfilePicSaver5&&l.setEnum("method",this.$XProfilePicSaver5);if(n)l.setString("caption",n);if(o)l.setFBID("overlay_source_object_id",o);if(m&&m.canvas)m.canvas.toBlob(function(p){var q=new(c("AsyncUploadRequest"))().setFiles({farr:p}).setAllowCrossOrigin(true).setURI(l.getURI());c("tidyEvent")([q.subscribe("success",this.$XProfilePicSaver15.bind(this)),q.subscribe("failure",this.$XProfilePicSaver16.bind(this))]);q.send()}.bind(this));else new(c("AsyncRequest"))(l.getURI()).setErrorHandler(this.$XProfilePicSaver14.bind(this)).setHandler(this.$XProfilePicSaver17.bind(this)).send();this.$XProfilePicSaver12(j.LOADING)};k.prototype.$XProfilePicSaver15=function(l,m){"use strict";this.$XProfilePicSaver17(m.getResponse())};k.prototype.$XProfilePicSaver16=function(l,m){"use strict";this.$XProfilePicSaver14(m.getResponse())};k.prototype.$XProfilePicSaver17=function(l){"use strict";this.inform("success",l);this.$XProfilePicSaver12(this.$XProfilePicSaver7?j.CROP_SUCCESS:j.PREVIOUS_PIC_SUCCESS);this.$XProfilePicSaver12(j.SUCCESS)};f.exports=k}),null);
__d("WorkGoalsUIEvents",[],(function a(b,c,d,e,f,g){var h=Object.freeze({PROFILE_PIC_UPLOADED:"WorkGoalsUIEvents/profilePicUploaded"});f.exports=h}),null);
__d("WorkGoalSetProfilePictureManager",["Arbiter","WorkGoalsUIEvents","destroyOnUnload"],(function a(b,c,d,e,f,g){__p&&__p();function h(){"use strict";this.setIsOpen(false)}h.prototype.setIsOpen=function(i){"use strict";this.$WorkGoalSetProfilePictureManager1=i;return this};h.prototype.isOpen=function(){"use strict";return this.$WorkGoalSetProfilePictureManager1};h.prototype.informPhotoUploaded=function(i){"use strict";c("Arbiter").inform(c("WorkGoalsUIEvents").PROFILE_PIC_UPLOADED,i)};h.prototype.subscribeOncePhotoUploaded=function(i){"use strict";var j=c("Arbiter").subscribeOnce(c("WorkGoalsUIEvents").PROFILE_PIC_UPLOADED,i);c("destroyOnUnload")(function(){return j.unsubscribe()})};f.exports=new h()}),null);
__d("ProfilePicCropViewerMixin",["AsyncResponse","DialogX","DOM","Event","LayerDestroyOnHide","PhotoEditorGraphic","ProfileEditFlowModalManager","ProfilePicCanvas","ProfilePicCropViewerStrings","ProfilePicCoordinatesUtil","ProfilePictureFlowLogging","ProfileWizardModalManager","React","Run","TimelineURI","Vector","WorkGoalSetProfilePictureManager","XProfilePicSaver","XUIDialogBody.react","XUIDialogButton.react","XUIDialogFooter.react","XUIDialogTitle.react","tidyEvent"],(function a(b,c,d,e,f,g){__p&&__p();var h=c("PhotoEditorGraphic").Sticker,i=c("React").PropTypes,j=360,k={propTypes:{cropControllerURIBuilder:i.object,method:i.string,source:i.string,uploadRequest:i.object,warnOnClose:i.bool.isRequired},getDefaultProps:function l(){return{warnOnClose:true}},componentDidMount:function l(){this._preventClose=true;this._unloadListener=c("Run").onBeforeUnload(function(){if(!this._shouldAllowClose()&&this.props.warnOnClose)return c("ProfilePicCropViewerStrings").LEAVE_WARNING_UNLOAD;return null}.bind(this),true);this._logFlowStep(c("ProfilePictureFlowLogging").step.VIEWER_INIT)},componentDidUpdate:function l(m,n){if(!n.photoData&&this.state.photoData)this._logFlowStep(this.state.photoData.previousprofilepic?c("ProfilePictureFlowLogging").step.PREVIOUS_PIC_INIT:c("ProfilePictureFlowLogging").step.CROP)},componentWillUnmount:function l(){this._warningDialog&&this._warningDialog.destroy();this._warningDialog=null;this._unloadListener&&this._unloadListener.remove();this._unloadListener=null},_forceClose:function l(m){this._preventClose=false;this.close();this._logFlowStep(m||c("ProfilePictureFlowLogging").step.CANCEL)},handleCancel:function l(){if(this.props.cancelCallback)this.props.cancelCallback();if(!this.props.warnOnCancel||this._shouldAllowClose()){this._forceClose();return}this._showCloseWarning()},handleUploadCancel:function l(){this.props.uploadRequest&&this.props.uploadRequest.abort();this._forceClose(c("ProfilePictureFlowLogging").step.UPLOAD_CANCEL)},handlePositionSave:function l(){var m=this._prepareSaver(),n=this.getCaption();m.saveAsProfilePicWithPosition(c("ProfilePicCoordinatesUtil").getThumbnailCoordinates(this.getCropArea(),this.getPhotoSize()),n)},handleSetThumbnailSave:function l(){this.handlePositionSave();this._logFlowStep(c("ProfilePictureFlowLogging").step.SKIP_CROP)},handleCropSave:function l(){__p&&__p();var m=this.getCropArea(),n=this.getPhotoSize(),o=this.getCaption(),p=this._prepareSaver(),q=this.getOverlaySourceObjectID(),r=this.getPaymentID(),s=function s(t){return p.saveCroppedProfilePic({x:m.x/n.width,y:m.y/n.height,width:m.width/n.width,height:m.height/n.height},t,o,q,r)},t=this.getOverlayData();if(!t){s();return}var u=this._getImage(n.uri);c("Event").listen(u,"load",function(){var v=new(c("ProfilePicCanvas"))(u),w=new h(null,t.id,t.src,n.width,n.height);w.subscribe("loaded",function(){v.addGraphic(w,new(c("Vector"))(m.x,m.y));v.setResizeFactor(m.width/n.width);t.canvas=v;s(t)})})},_getImage:function l(m){return c("DOM").create("img",{crossOrigin:"anonymous",src:m})},_prepareSaver:function l(){__p&&__p();this.setState({savingMode:true});this._preventClose=false;var m=this.state.expirationTime;if(m<=0)m=null;var n=new(c("XProfilePicSaver"))(this.state.photoData.id,this.props.profileID,m,this.props.cropControllerURIBuilder).setFlowType(this.getFlowType());c("tidyEvent")([n.subscribe("success",this._savingSuccess),n.subscribe("error",this._savingError)]);this.props.method&&n.setProfilePhotoMethod(this.props.method);this.props.source&&n.setProfilePhotoSource(this.props.source);return n},_logFlowStep:function l(m){c("ProfilePictureFlowLogging").setFlowType(this.getFlowType()).setSource(this.props.source).log(m)},_savingSuccess:function l(m,n){__p&&__p();if(c("WorkGoalSetProfilePictureManager").isOpen()){c("WorkGoalSetProfilePictureManager").informPhotoUploaded({response:n});this.inform("close");return}if(this.props.successCallback){this.props.successCallback(n,this.getOverlayData());this.close();return}if(c("ProfileWizardModalManager").isOpen()){c("ProfileWizardModalManager").informProfilePictureUploaded({response:n});this.close();return}if(c("ProfileEditFlowModalManager").isOpen()){c("ProfileEditFlowModalManager").informProfilePictureUploaded({response:n});this.close();return}var o=new(c("DialogX"))({addedBehaviors:[c("LayerDestroyOnHide")],width:j,xui:true,autohide:this.props.cropControllerURIBuilder?1e3:0},c("React").createElement("div",null,c("React").createElement(c("XUIDialogTitle.react"),{showCloseButton:!!this.props.cropControllerURIBuilder},c("ProfilePicCropViewerStrings").SAVED_TITLE),c("React").createElement(c("XUIDialogBody.react"),null,c("ProfilePicCropViewerStrings").SAVED_BODY)));o.subscribeOnce("aftershow",this.close);o.show();if(!this.props.cropControllerURIBuilder)c("TimelineURI").goToProfileID(this.props.profileID)},_savingError:function l(m,n){this._preventClose=true;this.setState({savingMode:false});c("AsyncResponse").defaultErrorHandler(n);this.inform("save_error",n);if(this.props.errorCallback)this.props.errorCallback()},_shouldAllowClose:function l(){return!this._preventClose},_showCloseWarning:function l(){if(!this._warningDialog)this._warningDialog=new(c("DialogX"))({modal:true,width:j,xui:true},c("React").createElement("div",null,c("React").createElement(c("XUIDialogTitle.react"),null,c("ProfilePicCropViewerStrings").LEAVE_WARNING_TITLE),c("React").createElement(c("XUIDialogBody.react"),null,c("ProfilePicCropViewerStrings").LEAVE_WARNING_BODY),c("React").createElement(c("XUIDialogFooter.react"),null,c("React").createElement(c("XUIDialogButton.react"),{action:"cancel",label:c("ProfilePicCropViewerStrings").LEAVE_WARNING_CANCEL}),c("React").createElement(c("XUIDialogButton.react"),{action:"cancel",onClick:function(){return this._forceClose()}.bind(this),label:c("ProfilePicCropViewerStrings").LEAVE_WARNING_OK,use:"confirm"}))));this._warningDialog.show()}};f.exports=k}),null);
__d("ProfilePicOverlay.react",["cx","React","Image.react","joinClasses"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").PureComponent);j=i&&i.prototype;l.prototype.render=function(){"use strict";return c("React").createElement(c("Image.react"),babelHelpers["extends"]({},this.props,{className:c("joinClasses")(this.props.className,"_4i_g")}))};function l(){"use strict";i.apply(this,arguments)}l.propTypes={src:k.string.isRequired};f.exports=l}),null);
__d("ProfilePicOverlayChangePictureButton.react",["fbt","PhotoBrowserLink.react","React"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").PureComponent);j=i&&i.prototype;k.prototype.render=function(){"use strict";var l=h._("Change picture");return c("React").createElement(c("PhotoBrowserLink.react"),babelHelpers["extends"]({},this.props,{label:l,renderType:"button",size:"large"}))};function k(){"use strict";i.apply(this,arguments)}f.exports=k}),null);
__d("ProductionPromptShapes",["React"],(function a(b,c,d,e,f,g){var h=c("React").PropTypes,i=h.shape({promptID:h.string.isRequired,promptType:h.string.isRequired,trackingString:h.string.isRequired});f.exports={LOGGING_DATA:i}}),null);
__d("ProfileFrameDiscoveryActions",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({SAVE:"save",CLICK_CHEVRON:"click_chevron",MESSAGE:"message",HIDE:"hide",REPORT:"report",COPY:"copy",SELECT:"select",LAND:"land"})}),null);
__d("ProfilePicMenuDialogSurface",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({PROFILE_FRAMES:"profile_frames",PROFILE_PICTURE:"profile_picture",FEATURED_PHOTOS:"featured_photos"})}),null);
__d("ProfilePicOverlayPhotoPlaceholder.react",["ix","cx","fbt","Image.react","React","PhotoBrowserLink.react","XUIText.react","fbglyph","joinClasses"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k,l;k=babelHelpers.inherits(m,c("React").Component);l=k&&k.prototype;m.prototype.render=function(){"use strict";return c("React").createElement(c("PhotoBrowserLink.react"),{className:c("joinClasses")(this.props.className,"_-ly"),dialogURI:this.props.dialogURI,onPhotoChoose:this.props.onPhotoChoose,style:{height:this.props.dimension,width:this.props.dimension}},c("React").createElement("div",{className:"_-lz"},c("React").createElement(c("Image.react"),{className:"_-l_",src:h("142595")}),c("React").createElement(c("XUIText.react"),{size:"xlarge_DEPRECATED"},j._("Select a photo"))))};function m(){"use strict";k.apply(this,arguments)}f.exports=m}),null);
__d("ProfileFrameDiscoveryHideMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports=function(){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("WebGraphQLMutationBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return"1434451036634234"};j.getQueryID=function(){"use strict";return"484670801902064"};function j(){"use strict";h.apply(this,arguments)}return j}()}),null);
__d("ProfilePictureOverlayDispatcher",["ExplicitRegistrationReactDispatcher"],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c("ExplicitRegistrationReactDispatcher"));i=h&&h.prototype;function j(k){"use strict";i.constructor.call(this,k);this.dispatch=this.dispatch.bind(this)}f.exports=new j({strict:true})}),null);
__d("ProfilePictureOverlayMenuActions",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({COPY:"copy",HIDE:"hide",MESSAGE:"message",REPORT:"report"})}),null);
__d("ProfilePicOverlaySearchResultActionMenu.react",["ix","cx","fbt","regeneratorRuntime","AsyncDialog","AsyncRequest","ClientIDs","Clipboard","CurrentUser","Dialog","Image.react","NFXStoryLocation","PopoverMenu.react","React","ProfileFrameDiscoveryActions","ProfileFrameDiscoveryActionsTypedLogger","ProfileFrameDiscoveryHideMutationWebGraphQLMutation","ProfilePictureOverlayDispatcher","ProfilePictureOverlayMenuActions","ReactXUIMenu","SharerType","WebGraphQL","XProfilePictureOverlayLandingController","XShareDialogController","XRapidReportingDialogController","XUIButton.react","XUIText.react","asset","idx"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k,l,m=c("ClientIDs").getNewClientID,n=c("ReactXUIMenu").Item;k=babelHelpers.inherits(o,c("React").PureComponent);l=k&&k.prototype;function o(){__p&&__p();var p,q;"use strict";for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=l.constructor).call.apply(p,[this].concat(s)),this.$ProfilePicOverlaySearchResultActionMenu3=function(){var u,v,w=c("XShareDialogController").getURIBuilder().setString("id",(u=this.props.result.overlay)!=null?u.id:u).setString("url",this.$ProfilePicOverlaySearchResultActionMenu5()).setString("st",c("SharerType").MESSAGE_ONLY).getURI();c("AsyncDialog").send(new(c("AsyncRequest"))(w));new(c("ProfileFrameDiscoveryActionsTypedLogger"))().setFrameID((v=this.props.result.overlay)!=null?v.id:v).setEvent(c("ProfileFrameDiscoveryActions").MESSAGE).log()}.bind(this),this.$ProfilePicOverlaySearchResultActionMenu4=function u(){__p&&__p();var v,w,x,y,z;return c("regeneratorRuntime").async(function A(B){__p&&__p();while(1)switch(B.prev=B.next){case 0:x=(v=this.props.result.overlay)!=null?v.id:v;if(!x){B.next=12;break}B.prev=2;B.next=5;return c("regeneratorRuntime").awrap(c("WebGraphQL").exec(new(c("ProfileFrameDiscoveryHideMutationWebGraphQLMutation"))({input:{actor_id:c("CurrentUser").getID(),client_mutation_id:m(),effect_id:x}})));case 5:z=B.sent;c("ProfilePictureOverlayDispatcher").dispatch({type:"search_result_hidden",payload:{hiddenEffectID:(y=z)!=null?(y=y.media_effect_hide)!=null?(y=y.effect)!=null?y.id:y:y:y}});B.next=12;break;case 9:B.prev=9;B.t0=B["catch"](2);this.$ProfilePicOverlaySearchResultActionMenu6();case 12:new(c("ProfileFrameDiscoveryActionsTypedLogger"))().setFrameID((w=this.props.result.overlay)!=null?w.id:w).setEvent(c("ProfileFrameDiscoveryActions").HIDE).log();case 13:case"end":return B.stop()}},null,this,[[2,9]])}.bind(this),this.$ProfilePicOverlaySearchResultActionMenu1=function(){var u,v,w=JSON.stringify({reportable_ent_token:(u=this.props.result.overlay)!=null?u.id:u,story_location:c("NFXStoryLocation").PROFILE_FRAME_DISCOVERY}),x=c("XRapidReportingDialogController").getURIBuilder().setString("context",w).getURI();new(c("AsyncRequest"))().setURI(x).send();new(c("ProfileFrameDiscoveryActionsTypedLogger"))().setFrameID((v=this.props.result.overlay)!=null?v.id:v).setEvent(c("ProfileFrameDiscoveryActions").REPORT).log()}.bind(this),this.$ProfilePicOverlaySearchResultActionMenu2=function(){var u;c("Clipboard").copy(this.$ProfilePicOverlaySearchResultActionMenu5());new(c("ProfileFrameDiscoveryActionsTypedLogger"))().setFrameID((u=this.props.result.overlay)!=null?u.id:u).setEvent(c("ProfileFrameDiscoveryActions").COPY).log()}.bind(this),q}o.prototype.render=function(){"use strict";__p&&__p();var p=null;if(this.props.menuActions.includes(c("ProfilePictureOverlayMenuActions").REPORT))p=c("React").createElement(n,{onClick:this.$ProfilePicOverlaySearchResultActionMenu1,icon:c("React").createElement(c("Image.react"),{src:h("407559")})},c("React").createElement(c("XUIText.react"),null,j._("Report Frame")));var q=null;if(this.props.menuActions.includes(c("ProfilePictureOverlayMenuActions").COPY))q=c("React").createElement(n,{onClick:this.$ProfilePicOverlaySearchResultActionMenu2,icon:c("React").createElement(c("Image.react"),{src:h("407157")})},c("React").createElement(c("XUIText.react"),null,j._("Copy Link")));var r=null;if(this.props.menuActions.includes(c("ProfilePictureOverlayMenuActions").MESSAGE))r=c("React").createElement(n,{onClick:this.$ProfilePicOverlaySearchResultActionMenu3,icon:c("React").createElement(c("Image.react"),{src:h("420633")})},c("React").createElement(c("XUIText.react"),null,j._("Send as Message")));var s=null;if(this.props.menuActions.includes(c("ProfilePictureOverlayMenuActions").HIDE))s=c("React").createElement(n,{onClick:this.$ProfilePicOverlaySearchResultActionMenu4,icon:c("React").createElement(c("Image.react"),{src:h("407078")})},c("React").createElement(c("XUIText.react"),null,j._("Hide Frame")));var t=c("React").createElement(c("ReactXUIMenu"),null,r,p,q,s);return c("React").createElement(c("PopoverMenu.react"),{menu:t},c("React").createElement(c("XUIButton.react"),{className:"_1pcp",image:c("React").createElement(c("Image.react"),{src:h("369880")}),label:j._("Frame Actions"),labelIsHidden:true}))};o.prototype.$ProfilePicOverlaySearchResultActionMenu6=function(){"use strict";new(c("Dialog"))().setTitle(j._("Failure")).setBody(j._("Sorry, something went wrong.")).setButtons(c("Dialog").OK).show()};o.prototype.$ProfilePicOverlaySearchResultActionMenu5=function(){var p;"use strict";return c("XProfilePictureOverlayLandingController").getURIBuilder().setInt("selected_overlay_id",(p=this.props.result.overlay)!=null?p.id:p).getURI().qualify().toString()};o.defaultProps={menuActions:[]};f.exports=o}),null);
__d("ProfilePicOverlaySearchResult.react",["cx","fbt","BasicVector","Layout.react","PhotoZoomCropDimensions","PhotoZoomCropImagePreview.react","ProfileFrameDiscoveryActions","ProfileFrameDiscoveryActionsTypedLogger","ProfilePicOverlaySearchResultActionMenu.react","React","Image.react","XUIGrayText.react","XUIText.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("Layout.react").Column,m=c("Layout.react").FillColumn,n=80;j=babelHelpers.inherits(o,c("React").PureComponent);k=j&&j.prototype;function o(p){k.constructor.call(this,p);var q=new(c("PhotoZoomCropDimensions"))(new(c("BasicVector"))(n,n));q.setZoom(1);this.$ProfilePicOverlaySearchResult1=q}o.prototype.render=function(){var p=this.props.result,q=p.overlay,r=p.context_description,s=null;if(r)s=c("React").createElement(c("XUIGrayText.react"),{display:"block",size:"meta1"},r.text);var t=c("React").createElement(c("Image.react"),{height:n,src:q.url,width:n});return c("React").createElement(c("Layout.react"),{className:"_22kw"},c("React").createElement(l,null,c("React").createElement(c("PhotoZoomCropImagePreview.react"),{className:"_22kx _3-90",dimensions:this.$ProfilePicOverlaySearchResult2(),overlay:t,size:{x:n,y:n},src:this.props.photoData.src})),c("React").createElement(m,null,c("React").createElement(c("XUIText.react"),{display:"block",size:"header4"},q.name?q.name:q.layer_owner.name),c("React").createElement(c("XUIGrayText.react"),{display:"block",size:"meta1"},i._("By {page name}",[i._param("page name",q.layer_owner.name)])),s),c("React").createElement(l,{className:"_1pbn",onClick:function u(v){v.stopPropagation();new(c("ProfileFrameDiscoveryActionsTypedLogger"))().setFrameID(q.id).setEvent(c("ProfileFrameDiscoveryActions").CLICK_CHEVRON).log()}},c("React").createElement(c("ProfilePicOverlaySearchResultActionMenu.react"),{menuActions:this.props.menuActions,result:this.props.result})))};o.prototype.$ProfilePicOverlaySearchResult2=function(){return this.props.photoData.dimensions||this.$ProfilePicOverlaySearchResult1};o.defaultProps={menuActions:[]};f.exports=o}),null);
__d("ProfilePicOverlaySearchResult_deprecated.react",["cx","fbt","BasicVector","FBCheckbox.react","Layout.react","PhotoZoomCropDimensions","PhotoZoomCropImagePreview.react","React","Image.react","XUIGrayText.react","XUIText.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("Layout.react").Column,m=c("Layout.react").FillColumn,n=80;j=babelHelpers.inherits(o,c("React").PureComponent);k=j&&j.prototype;function o(p){k.constructor.call(this,p);var q=new(c("PhotoZoomCropDimensions"))(new(c("BasicVector"))(n,n));q.setZoom(1);this.$ProfilePicOverlaySearchResult_deprecated1=q;this.state={hovered:false}}o.prototype.render=function(){var p=this.props.result,q=p.overlay,r=p.context_description,s=null;if(r)s=c("React").createElement(c("XUIGrayText.react"),{display:"block",size:"meta1"},r.text);var t=c("React").createElement(c("Image.react"),{height:n,src:q.url,width:n});return c("React").createElement(c("Layout.react"),{className:"_22kw",onMouseEnter:function(){return this.setState({hovered:true})}.bind(this),onMouseLeave:function(){return this.setState({hovered:false})}.bind(this)},c("React").createElement(l,null,c("React").createElement(c("PhotoZoomCropImagePreview.react"),{className:"_22kx _3-90",dimensions:this.$ProfilePicOverlaySearchResult_deprecated2(),overlay:t,size:{x:n,y:n},src:this.props.photoData.src})),c("React").createElement(m,null,c("React").createElement(c("XUIText.react"),{display:"block",size:"header4"},q.name?q.name:q.layer_owner.name),c("React").createElement(c("XUIGrayText.react"),{display:"block",size:"meta1"},i._("By {page name}",[i._param("page name",q.layer_owner.name)])),s),c("React").createElement(l,{className:"_5-r1"},c("React").createElement(c("FBCheckbox.react"),{checked:this.props.checked,className:"_1w3q",hovered:this.state.hovered})))};o.prototype.$ProfilePicOverlaySearchResult_deprecated2=function(){return this.props.photoData.dimensions||this.$ProfilePicOverlaySearchResult_deprecated1};f.exports=o}),null);
__d("ProfilePicOverlaySearchResults.react",["cx","fbt","CenteredContainer.react","InfiniteScroll.react","Keys","List.react","ProfileFrameDiscoveryActions","ProfileFrameDiscoveryActionsTypedLogger","ProfilePicOverlaySearchResult.react","ProfilePicOverlaySearchResult_deprecated.react","React","XUIGrayText.react","XUISpinner.react","XUIText.react","joinClasses"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=300;j=babelHelpers.inherits(m,c("React").PureComponent);k=j&&j.prototype;m.prototype.render=function(){__p&&__p();var n=null;if(this.props.loading)n=c("React").createElement("div",{className:"_1y8l",style:{lineHeight:this.props.height+"px"}},c("React").createElement(c("XUISpinner.react"),{size:"large"}));var o=null;if(!n&&this.props.hasMoreResults)o=c("React").createElement("li",null,c("React").createElement("div",{className:"_2pig _2pip _1dey"},c("React").createElement(c("XUISpinner.react"),{size:"large"})));var p=null;if(this.props.resultsIDOrder.count()===0)p=c("React").createElement(c("CenteredContainer.react"),{fullHeight:true,horizontal:true,vertical:true},c("React").createElement(c("XUIText.react"),{className:"_3-8p",display:"block",size:"header3",weight:"bold"},i._("No results found")),c("React").createElement(c("XUIGrayText.react"),{display:"block",shade:"light"},i._("We could not find anything. Please try a different search.")));else p=c("React").createElement(c("List.react"),{spacing:"small",edgepadding:true},this.props.resultsIDOrder.map(function(q){__p&&__p();var r=null,s=this.props.results.get(q),t=q===this.props.selectedResultID;if(this.props.menuActions&&this.props.menuActions.length>0)r=c("React").createElement(c("ProfilePicOverlaySearchResult.react"),{checked:t,photoData:this.props.photoData,result:s,menuActions:this.props.menuActions});else r=c("React").createElement(c("ProfilePicOverlaySearchResult_deprecated.react"),{checked:t,photoData:this.props.photoData,result:s});var u=null;if(this.props.showActions)u=(t?"_1ewi":"")+(!t?" _1ex0":"")+" _2pis _2pij";else u="_2pis _2pij";return c("React").createElement("li",{className:u,key:q,onClick:function(){this.props.onResultSelected(s);new(c("ProfileFrameDiscoveryActionsTypedLogger"))().setFrameID(q).setEvent(c("ProfileFrameDiscoveryActions").SELECT).log()}.bind(this),onKeyPress:function(event){return this.$ProfilePicOverlaySearchResults1(event,s)}.bind(this),role:"button",tabIndex:0},r)}.bind(this)),o);return c("React").createElement("div",{className:c("joinClasses")("_36uk"+(this.props.loading?" _1_58":""),this.props.className),style:{height:this.props.height}},n,c("React").createElement(c("InfiniteScroll.react"),{distanceToEnd:l,onEndReached:this.$ProfilePicOverlaySearchResults2.bind(this),style:{height:this.props.height}},p))};m.prototype.$ProfilePicOverlaySearchResults1=function(event,n){if(event.charCode===c("Keys").RETURN)this.props.onResultSelected(n)};m.prototype.$ProfilePicOverlaySearchResults2=function(){if(this.props.paginating||!this.props.hasMoreResults||this.props.resultsIDOrder.count()===0)return;this.props.onResultsEndReached()};function m(){j.apply(this,arguments)}m.defaultProps={menuActions:[]};f.exports=m}),null);
__d("ProfilePicOverlayViewShapes",["React"],(function a(b,c,d,e,f,g){var h=c("React").PropTypes,i=h.shape({id:h.string.isRequired,src:h.string.isRequired}),j=h.shape({original:h.shape({height:h.number.isRequired,uri:h.string.isRequired,width:h.number.isRequired}),id:h.string});f.exports={PHOTO_DATA:j,OVERLAY_DATA:i}}),null);
__d("ProfilePicOverlayZoomCrop.react",["cx","BasicVector","ProfilePicOverlayViewShapes","ProfilePictureOverlayTypedLogger","PhotoZoomCropDimensions","PhotoZoomCropImage.react","PhotoZoomCropMixin","PhotoZoomCropSlider.react","ProfilePicOverlay.react","XUISpinner.react","React","SpotlightProfilePicCropOptions","debounce","idx"],(function a(b,c,d,e,f,g,h){__p&&__p();var i=c("React").PropTypes,j=100,k=c("React").createClass({displayName:"ProfilePicOverlayZoomCrop",_moveDoneDebouncer:null,_dims:null,mixins:[c("PhotoZoomCropMixin")],propTypes:{height:i.number.isRequired,onMoveDone:i.func,onOverlayLoad:i.func,onZoomDone:i.func,overlayData:c("ProfilePicOverlayViewShapes").OVERLAY_DATA,photoData:c("ProfilePicOverlayViewShapes").PHOTO_DATA.isRequired,savingMode:i.bool.isRequired,width:i.number.isRequired},getInitialState:function l(){this._updateDimensions(this.props.photoData);return this._getUpdatedDimensionsState()},UNSAFE_componentWillMount:function l(){var m=this.props.onMoveDone;if(m)this._moveDoneDebouncer=c("debounce")(function(){return m()},j,this)},UNSAFE_componentWillReceiveProps:function l(m){var n,o,p=(n=this.props.overlayData)!=null?n.id:n,q=(o=m.overlayData)!=null?o.id:o;if(q&&p!==q)new(c("ProfilePictureOverlayTypedLogger"))().setEventName("staging_ground_effect_impression_start").setPhotoID(m.photoData.id).setStickerID(q).log();if(this.props.photoData.id===m.photoData.id)return;this._updateDimensions(m.photoData);this.setState(this._getUpdatedDimensionsState())},_updateDimensions:function l(m){var n=new(c("BasicVector"))(m.original.width,m.original.height),o=c("SpotlightProfilePicCropOptions").getOptionsAsRatio(m,n),p=o.center,q=o.size,r=new(c("PhotoZoomCropDimensions"))(n);r.setSize(this.props.width,this.props.height);if(p)r.setCenter(p.x,p.y);if(q){var s=q.x*n.x;r.setZoom(r.getSize().x/s)}this._dims=r},_getUpdatedDimensionsState:function l(){var m=this._getDimensionsState();m.position=this._dims&&this._dims.getZoom();return m},render:function l(){var m=null;if(this.props.savingMode)m=c("React").createElement("div",{className:"_5chi"},c("React").createElement(c("XUISpinner.react"),{background:"dark",className:"_5chj",size:"large"}));var n=null;if(this.props.overlayData)n=c("React").createElement(c("ProfilePicOverlay.react"),{onLoad:this.props.onOverlayLoad,src:this.props.overlayData.src});return c("React").createElement("div",null,c("React").createElement("div",{className:"_5cia"},c("React").createElement(c("PhotoZoomCropImage.react"),{className:"_5cib",dimensions:this._dims,onMove:this._customHandleMove,overlay:n,enableDrag:!!(this._dims&&this._dims.isCurrentlyDragable()),src:this.props.photoData.original.uri}),m),c("React").createElement(c("PhotoZoomCropSlider.react"),{className:"_5cid",onZoom:this._customHandleZoom,position:this.state.position,zoom:this.state.zoom,zoomRange:this._dims&&this._dims.getZoomRange()}))},_customHandleMove:function l(m,n){this._moveDoneDebouncer&&this._moveDoneDebouncer.reset();this._handleMove(m,n);this._moveDoneDebouncer&&this._moveDoneDebouncer()},_customHandleZoom:function l(m,n){this._moveDoneDebouncer&&this._moveDoneDebouncer.reset();this._handleZoom(m,n);this._moveDoneDebouncer&&this._moveDoneDebouncer()},__getZoom:function l(){return this.state.zoom}});f.exports=k}),null);
__d("ProfilePictureOverlaySurface",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({INTERN_TOOL:"intern_tool",LANDING_MSITE:"landing_msite",LANDING_NATIVE:"landing_native",LANDING_WWW:"landing_www",PHOTO_EDITOR:"photo_editor",UNIT_TEST:"unit_test",WWW_DIALOG:"www_dialog"})}),null);
__d("XProfilePictureOverlayMenuDialogController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/gameface/menu_dialog/",{dialog_surface:{type:"Enum",enumType:1},__asyncDialog:{type:"Int"}})}),null);
__d("XProfilePictureOverlayPhotoAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/gameface/get_photo/",{photo_id:{type:"String"}})}),null);
__d("ProfilePicOverlayLandingViewV2.react",["cx","ActorSelector.react","ArbiterMixin","AsyncRequest","AtSignMentionsStrategy","CurrentUser","DocumentCompositeMentionsSource","DocumentMentionsSource","DateConsts","EditorState","Event","Layout.react","MentionsInput.react","MentionsInputTypeaheadView.react","ProfileFrameDiscoveryActions","ProfileFrameDiscoveryActionsTypedLogger","ProfilePicCropViewerMixin","ProfilePicCropViewerStrings","ProfilePicExpirationSelector.react","ProfilePicMenuDialogSurface","ProfilePicOverlayChangePictureButton.react","ProfilePicOverlayPhotoPlaceholder.react","ProfilePicOverlaySearchInput.react","ProfilePicOverlaySearchResults.react","ProfilePicOverlayViewShapes","ProfilePicOverlayZoomCrop.react","ProfilePictureFlowLogging","ProfilePictureOverlayMenuActions","ProfilePictureOverlaySurface","XReactFeedComposerXPromptDismissController","ProductionPromptShapes","PromptsInteractionsEventNames","React","SpotlightViewerCoreMixin","Tooltip","URI","WebAsyncSearchSource","XUIButton.react","XUICard.react","XProfilePictureOverlayLandingController","XProfilePictureOverlayMenuDialogController","XProfilePictureOverlayPhotoAsyncController","immutable","getMentionsInputDecorator","getMentionsTextForContentState","goURI","tidyEvent"],(function a(b,c,d,e,f,g,h){__p&&__p();var i=c("Layout.react").Column,j=c("Layout.react").FillColumn,k=c("immutable").Map,l=512,m=348,n=424,o=469,p="profile-picture-overlay",q=c("React").PropTypes,r=c("React").createClass({displayName:"ProfilePicOverlayLandingViewV2",mixins:[c("ArbiterMixin"),c("ProfilePicCropViewerMixin"),c("SpotlightViewerCoreMixin")],propTypes:{actorIDs:q.arrayOf(q.string),height:q.number.isRequired,initialPhotoData:c("ProfilePicOverlayViewShapes").PHOTO_DATA,menuActions:q.arrayOf(q.oneOf(Object.values(c("ProfilePictureOverlayMenuActions")))),searchQuery:q.string,searchResults:q.object.isRequired,searchResultsIDOrder:q.object.isRequired,onSearch:q.func.isRequired,onSearchResultSelected:q.func.isRequired,onSearchResultsEndReached:q.func.isRequired,paymentID:q.string,promptData:c("ProductionPromptShapes").LOGGING_DATA,hasMoreSearchResults:q.bool,selectedOverlayID:q.string,surface:q.string,width:q.number.isRequired,overlaySourceObjectID:q.string,suggestedSearchQueries:q.arrayOf(q.string)},getInitialState:function v(){var w={open:true},x=c("DateConsts").SEC_PER_WEEK,y={expirationTime:x,photoData:this.props.initialPhotoData,savingMode:false};return babelHelpers["extends"]({},w,y,{captionEditorState:c("EditorState").createEmpty(c("getMentionsInputDecorator")()),caption:"",loadingSearchResults:false,paginating:false})},componentDidMount:function v(){this.setState({dimensions:this.getDimensions()})},render:function v(){__p&&__p();var w=this.props.selectedOverlayID,x=null;if(this.props.actorIDs&&this.props.actorIDs.length)x=c("React").createElement(c("ActorSelector.react"),{actorIDs:this.props.actorIDs,loading:false,onChange:function A(B){return c("goURI")(c("XProfilePictureOverlayLandingController").getURIBuilder().setInt("profile_id",B.value).setInt("selected_overlay_id",w).getURI())},selectedActorID:this.props.profileID,coverEnabled:false});var y=c("XProfilePictureOverlayMenuDialogController").getURIBuilder().setEnum("dialog_surface",c("ProfilePicMenuDialogSurface").PROFILE_FRAMES).getURI(),z=void 0;if(this.state.photoData.id)z=c("React").createElement("div",null,c("React").createElement(c("ProfilePicOverlayZoomCrop.react"),{height:this.props.height,onMoveDone:function(){return this.setState({dimensions:this.getDimensions()})}.bind(this),onOverlayLoad:this._onOverlayLoad,onZoomDone:function(){return this.setState({dimensions:this.getDimensions()})}.bind(this),overlayData:this.getOverlayData(),photoData:this.state.photoData,ref:"zoomCrop",savingMode:this.state.savingMode,width:this.props.width}));else z=c("React").createElement("div",{style:{height:o,width:n}},c("React").createElement(c("ProfilePicOverlayPhotoPlaceholder.react"),{dialogURI:y,dimension:n,onPhotoChoose:this._onPhotoChoose}));return c("React").createElement(c("XUICard.react"),null,c("React").createElement(c("Layout.react"),{className:"_2ph_ _169q"},c("React").createElement(j,{className:"_169r"},c("React").createElement(c("ProfilePicOverlaySearchInput.react"),{onChange:function(){return this.setState({loadingSearchResults:true})}.bind(this),onClear:function(){this.setState({loadingSearchResults:true});this._onSearchQuery("")}.bind(this),onQuery:this._onSearchQuery,value:this.props.searchQuery,suggestedSearchQueries:this.props.suggestedSearchQueries})),c("React").createElement(i,null,c("React").createElement(c("ProfilePicOverlayChangePictureButton.react"),{dialogURI:y,onPhotoChoose:this._onPhotoChoose}))),c("React").createElement(c("Layout.react"),{className:"_1xke",style:{height:l}},c("React").createElement(i,{className:"_1xkg",style:{width:m}},c("React").createElement(c("ProfilePicOverlaySearchResults.react"),{className:"_8s3",hasMoreResults:!!this.props.hasMoreSearchResults,height:l,loading:this.state.loadingSearchResults,onResultSelected:this._onSearchResultSelected,onResultsEndReached:this._onSearchResultsEndReached,paginating:this.state.paginating,photoData:{dimensions:this.state.dimensions,src:this.state.photoData.original.uri},results:this.props.searchResults,resultsIDOrder:this.props.searchResultsIDOrder,selectedResultID:w,menuActions:this.props.menuActions})),c("React").createElement(i,{className:"_1xkh"},z)),c("React").createElement(c("Layout.react"),{className:"_1z2f"},c("React").createElement(c("MentionsInput.react"),{className:"_1z2j _3-9c _3-8y",editorKey:"CAPTION_INPUT",editorState:this.state.captionEditorState,linkify:true,mentionsSource:u,placeholder:c("ProfilePicCropViewerStrings").CAPTION_INPUT_PLACEHOLDER,renderEmoji:true,typeaheadView:c("MentionsInputTypeaheadView.react"),onChange:this._onCaptionChanged})),c("React").createElement(c("Layout.react"),{className:"_2ph_ _t73"},c("React").createElement(i,null,x),c("React").createElement(j,{className:"_t74"},c("React").createElement(c("ProfilePicExpirationSelector.react"),{allowCustomDate:true,className:"_3-90",defaultValue:this.state.expirationTime,onChange:function(A){return this.setState({expirationTime:A})}.bind(this),showCustomOption:true}),c("React").createElement(c("XUIButton.react"),babelHelpers["extends"]({disabled:this.state.savingMode||!this.state.photoData.id||!this.getOverlayData(),label:c("ProfilePicCropViewerStrings").USE_AS_PROFILE_PICTURE,onClick:function(){return this._handleSave()}.bind(this),size:"large",use:"confirm"},c("Tooltip").propsFor(c("ProfilePicCropViewerStrings").PROFILE_PIC_VISIBILITY))))))},_onCaptionChanged:function v(w){this.setState({captionEditorState:w});this.setState({caption:c("getMentionsTextForContentState")(w.getCurrentContent())})},_onSearchResultSelected:function v(w){var x=this.props.selectedOverlayID;if(w.overlay.id===x)return;this.setState({savingMode:true});this.props.onSearchResultSelected(w);s(c("URI").getRequestURI(false).addQueryData({selected_overlay_id:w.overlay.id}).toString())},_onSearchResultsEndReached:function v(){this.setState({paginating:true});this.props.onSearchResultsEndReached(function(){return this.setState({paginating:false})}.bind(this))},_onSearchQuery:function v(w){this.props.onSearch(w,function(){this.setState({loadingSearchResults:false,paginating:false})}.bind(this));s(c("URI").getRequestURI(false).addQueryData({query:w}).toString())},_onPhotoChoose:function v(w){this.setState({savingMode:true});var x=c("XProfilePictureOverlayPhotoAsyncController").getURIBuilder().setString("photo_id",w).getURI();new(c("AsyncRequest"))(x).setHandler(this._asyncResponseHandler).send()},_asyncResponseHandler:function v(w){var x=w.payload,y=new k(this.state.photoData).set("original",x.original).set("id",x.id).toObject(),z=new Image();c("tidyEvent")(c("Event").listen(z,"load",function(){return this.setState({photoData:y,savingMode:false},function(){return this.setState({dimensions:this.getDimensions()})}.bind(this))}.bind(this)));z.src=x.original.uri},_onOverlayLoad:function v(){this.setState({savingMode:false})},_handleSave:function v(){new(c("ProfileFrameDiscoveryActionsTypedLogger"))().setFrameID(this.props.selectedOverlayID).setEvent(c("ProfileFrameDiscoveryActions").SAVE).log();if(this.props.promptData){var w=this.props.promptData,x=w.promptID,y=w.promptType,z=w.trackingString;new(c("AsyncRequest"))().setURI(c("XReactFeedComposerXPromptDismissController").getURIBuilder().getURI()).setData({user_action:c("PromptsInteractionsEventNames").POST_PROMPT,prompt_id:x,prompt_type:y,prompt_tracking_string:z}).send()}this.handleCropSave()},getDimensions:function v(){return this.refs.zoomCrop&&this.refs.zoomCrop.getDimensions()},getCropArea:function v(){var w=this.refs.zoomCrop&&this.refs.zoomCrop.getDimensions();return w&&w.getArea()},getFlowType:function v(){return c("ProfilePictureFlowLogging").flow.ZOOMCROP},getPhotoSize:function v(){return this.state.photoData.original},getCaption:function v(){return this.state.caption},getOverlayData:function v(){var w=this.props.selectedOverlayID;if(w){var x=this.props.searchResults.get(w);if(x)return{id:w,src:x.overlay.url}}return null},getOverlaySourceObjectID:function v(){return this.props.overlaySourceObjectID},getPaymentID:function v(){return this.props.paymentID},getViewerID:function v(){return p+":"+this.state.photoData.id+":"+this.props.profileID+":"+this.props.selectedPageID}});function s(v){if(window.history)window.history.replaceState(null,"",v)}function t(){var v=new(c("WebAsyncSearchSource"))({bootstrapRequests:[{uri:"/ajax/typeahead/first_degree.php",data:{viewer:c("CurrentUser").getID(),context:"mentions",filter:["user","page","app","event"],options:["friends_only","nm"]}}],queryRequests:[{uri:"/ajax/typeahead/search.php",data:{viewer:c("CurrentUser").getID(),context:"topics_limited_autosuggest",filter:["user","page","app","event"],max_result:10,rsp:"mentions",options:["friends_only","nm"]}}]}),w=new(c("DocumentMentionsSource"))(c("AtSignMentionsStrategy"),v),u=new(c("DocumentCompositeMentionsSource"))([w]);return u}var u=t();f.exports=r}),null);
__d("ProfilePictureMediaEffect",["immutable"],(function a(b,c,d,e,f,g){__p&&__p();var h,i,j=c("immutable").Record,k=j({id:"",layer_owner:{name:""},name:null,url:""});h=babelHelpers.inherits(l,k);i=h&&h.prototype;l.fromObject=function(m){"use strict";return new l(babelHelpers["extends"]({},m,{url:m.image.uri}))};function l(){"use strict";h.apply(this,arguments)}f.exports=l}),null);
__d("ProfilePictureMediaEffectSearchResult",["immutable","ProfilePictureMediaEffect"],(function a(b,c,d,e,f,g){"use strict";var h,i,j=c("immutable").Record,k=j({overlay:new(c("ProfilePictureMediaEffect"))(),context_description:{text:""}});h=babelHelpers.inherits(l,k);i=h&&h.prototype;l.fromObject=function(m){return new l({overlay:c("ProfilePictureMediaEffect").fromObject(m.overlay),context_description:m.context_description})};function l(){h.apply(this,arguments)}f.exports=l}),null);
__d("ProfilePictureMediaEffectSearchResultsStore",["FluxMapStore","ProfilePictureMediaEffectSearchResult","ProfilePictureOverlayDispatcher"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("FluxMapStore"));i=h&&h.prototype;j.prototype.reduce=function(k,l){"use strict";switch(l.type){case"search_bootstrap":return this.$ProfilePictureMediaEffectSearchResultsStore1(k,l.payload);case"search_pagination":case"search_results_returned":return this.$ProfilePictureMediaEffectSearchResultsStore2(k,l.payload);default:return k}};j.prototype.$ProfilePictureMediaEffectSearchResultsStore1=function(k,l){"use strict";var m=l.results;if(!m)return k;return k.withMutations(function(n){m.forEach(function(o){return n.set(o.node.overlay.id,c("ProfilePictureMediaEffectSearchResult").fromObject(o.node))})})};j.prototype.$ProfilePictureMediaEffectSearchResultsStore2=function(k,l){"use strict";var m=l.results;if(!m)return k;return k.withMutations(function(n){m.edges.forEach(function(o){var p=c("ProfilePictureMediaEffectSearchResult").fromObject(o.node),q=o.node.overlay.id,r=n.get(q);if(!r||!r.equals(p))n.set(q,p)})})};function j(){"use strict";h.apply(this,arguments)}f.exports=new j(c("ProfilePictureOverlayDispatcher"))}),null);
__d("ProfilePictureMediaEffectViewStore",["FluxReduceStore","immutable","ProfilePictureMediaEffectSearchResultsStore","ProfilePictureOverlayDispatcher"],(function a(b,c,d,e,f,g){__p&&__p();var h,i,j,k,l=c("immutable").OrderedSet,m=c("immutable").Record;h=babelHelpers.inherits(n,m({hasMoreSearchResults:false,searchCursor:null,searchQuery:"",searchResultIDs:l(),selectedEffectID:null}));i=h&&h.prototype;function n(){"use strict";h.apply(this,arguments)}j=babelHelpers.inherits(o,c("FluxReduceStore"));k=j&&j.prototype;function o(){var p,q;"use strict";for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=k.constructor).call.apply(p,[this].concat(s)),this.__moduleID=f.id,q}o.prototype.getInitialState=function(){"use strict";return new n()};o.prototype.reduce=function(p,q){"use strict";switch(q.type){case"search_bootstrap":return this.$ProfilePictureMediaEffectViewStore1(p,q.payload);case"search_results_returned":return this.$ProfilePictureMediaEffectViewStore2(p,q.payload);case"search_result_hidden":return this.$ProfilePictureMediaEffectViewStore3(p,q.payload);case"search_result_selected":return this.$ProfilePictureMediaEffectViewStore4(p,q.payload);case"search_pagination":return this.$ProfilePictureMediaEffectViewStore5(p,q.payload);default:return p}};o.prototype.getSearchCursor=function(){"use strict";return this.getState().get("searchCursor")};o.prototype.getSearchQuery=function(){"use strict";return this.getState().get("searchQuery")};o.prototype.getSelectedEffectID=function(){"use strict";return this.getState().get("selectedEffectID")};o.prototype.getSearchResultIDs=function(){"use strict";return this.getState().get("searchResultIDs")};o.prototype.hasMoreSearchResults=function(){"use strict";return this.getState().get("hasMoreSearchResults")};o.prototype.$ProfilePictureMediaEffectViewStore1=function(p,q){"use strict";__p&&__p();var r=q.cursor,s=q.hasNextPage,t=q.query,u=q.results,v=q.selectedEffectID;c("ProfilePictureOverlayDispatcher").waitFor([c("ProfilePictureMediaEffectSearchResultsStore").getDispatchToken()]);var w=u.map(function(x){return x.node.overlay.id});return p.withMutations(function(x){x.set("hasMoreSearchResults",s);x.set("searchCursor",r);x.set("searchQuery",t);x.set("searchResultIDs",new l(w));x.set("selectedEffectID",v)})};o.prototype.$ProfilePictureMediaEffectViewStore3=function(p,q){"use strict";var r=q.hiddenEffectID,s=this.getSearchResultIDs();return p.withMutations(function(t){t.set("searchResultIDs",s.remove(r));if(p.get("selectedEffectID")===r)t.set("selectedEffectID",null)})};o.prototype.$ProfilePictureMediaEffectViewStore4=function(p,q){"use strict";var r=q.selectedEffectID;return p.withMutations(function(s){s.set("selectedEffectID",r)})};o.prototype.$ProfilePictureMediaEffectViewStore2=function(p,q){"use strict";__p&&__p();var r=q.query,s=q.results;if(!s)return p;var t=s.edges.map(function(u){return u.node.overlay.id});return p.withMutations(function(u){u.set("hasMoreSearchResults",s.page_info.has_next_page);u.set("searchCursor",s.page_info.end_cursor);u.set("searchQuery",r);u.set("searchResultIDs",new l(t))})};o.prototype.$ProfilePictureMediaEffectViewStore5=function(p,q){"use strict";__p&&__p();var r=q.results;if(!r)return p;var s=this.getSearchResultIDs(),t=new l(r.edges.map(function(u){return u.node.overlay.id}));return p.withMutations(function(u){u.set("hasMoreSearchResults",r.page_info.has_next_page);u.set("searchCursor",r.page_info.end_cursor);u.set("searchResultIDs",s.concat(t))})};f.exports=new o(c("ProfilePictureOverlayDispatcher"))}),null);
__d("ProfilePictureOverlayV2FluxContainer.react",["FluxContainer","immutable","ProfilePictureMediaEffectSearchResultsStore","ProfilePictureMediaEffectViewStore","ProfilePictureOverlayDispatcher","React"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("immutable").Map,k=c("immutable").OrderedSet;h=babelHelpers.inherits(l,c("React").Component);i=h&&h.prototype;function l(m){i.constructor.call(this,m);this.$ProfilePictureOverlayV2FluxContainer2=function(n){var o=this.state,p=o.searchCursor,q=o.searchQuery;this.props.sendSearchResultsEndQuery(q,p,n)}.bind(this);this.state={hasMoreSearchResults:true,searchCursor:null,searchQuery:"",searchResults:j(),searchResultsIDOrder:k(),selectedOverlayID:null}}l.getStores=function(){return[c("ProfilePictureMediaEffectSearchResultsStore"),c("ProfilePictureMediaEffectViewStore")]};l.calculateState=function(){var m=c("ProfilePictureMediaEffectViewStore").getSearchResultIDs();return{hasMoreSearchResults:c("ProfilePictureMediaEffectViewStore").hasMoreSearchResults(),searchCursor:c("ProfilePictureMediaEffectViewStore").getSearchCursor(),searchQuery:c("ProfilePictureMediaEffectViewStore").getSearchQuery(),searchResults:c("ProfilePictureMediaEffectSearchResultsStore").getAll(m),searchResultsIDOrder:m,selectedOverlayID:c("ProfilePictureMediaEffectViewStore").getSelectedEffectID()}};l.prototype.render=function(){var m=this.props.Component;return c("React").createElement(m,babelHelpers["extends"]({},this.state,this.props,{onSearch:this.props.sendSearchQuery,onSearchResultSelected:this.$ProfilePictureOverlayV2FluxContainer1,onSearchResultsEndReached:this.$ProfilePictureOverlayV2FluxContainer2}))};l.prototype.$ProfilePictureOverlayV2FluxContainer1=function(m){c("ProfilePictureOverlayDispatcher").dispatch({type:"search_result_selected",payload:{selectedEffectID:m.overlay.id}})};f.exports=c("FluxContainer").create(l,{pure:false})}),null);
__d("RankedProfilePictureOverlayQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports=function(){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("WebGraphQLQueryBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return"1467273726660078"};j.getQueryID=function(){"use strict";return"1730622840566450"};function j(){"use strict";h.apply(this,arguments)}return j}()}),null);
__d("ProfilePicOverlayLandingViewV2Init",["ProfilePictureOverlayDispatcher","ProfilePictureOverlayV2FluxContainer.react","RankedProfilePictureOverlayQueryWebGraphQLQuery","React","ReactRenderer","XAsyncRequest","ProfilePictureMediaEffectSearchResultsStore","ProfilePictureMediaEffectViewStore"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=10,i={_searchRequest:null,_overlaySize:null,init:function j(k,l){c("ProfilePictureOverlayDispatcher").explicitlyRegisterStores([c("ProfilePictureMediaEffectSearchResultsStore"),c("ProfilePictureMediaEffectViewStore")]);var m=k.bootstrapData,n=k.props;this._overlaySize=m.overlaySize;c("ReactRenderer").renderComponent(c("React").createElement(c("ProfilePictureOverlayV2FluxContainer.react"),babelHelpers["extends"]({},n,{sendSearchResultsEndQuery:this._sendSearchResultsEndQuery.bind(this),sendSearchQuery:this._sendSearchQuery.bind(this),successCallback:l})),k.root);c("ProfilePictureOverlayDispatcher").dispatch({type:"search_bootstrap",payload:{cursor:m.cursor,hasNextPage:m.hasNextPage,query:m.query,results:m.overlays,selectedEffectID:m.selectedEffectID}})},_sendSearchResultsEndQuery:function j(k,l,m){__p&&__p();this._searchRequest&&this._searchRequest.abort();if(!l){m();return}var n=c("RankedProfilePictureOverlayQueryWebGraphQLQuery").getURI({cursor:l,num_results:h,overlay_dimension:this._overlaySize,query:k});this._searchRequest=new(c("XAsyncRequest"))(n).setHandler(function(o){this._dispatchQueryAndResponseWithType("search_pagination",k,o);this._searchRequest=null;m()}.bind(this));this._searchRequest.send()},_sendSearchQuery:function j(k,l){this._searchRequest&&this._searchRequest.abort();var m=c("RankedProfilePictureOverlayQueryWebGraphQLQuery").getURI({num_results:h,overlay_dimension:this._overlaySize,query:k});this._searchRequest=new(c("XAsyncRequest"))(m).setHandler(function(n){this._dispatchQueryAndResponseWithType("search_results_returned",k,n);this._searchRequest=null;l()}.bind(this));this._searchRequest.send()},_dispatchQueryAndResponseWithType:function j(k,l,m){c("ProfilePictureOverlayDispatcher").dispatch({type:k,payload:{query:l,results:m.payload.data.viewer.ranked_profile_picture_overlays}})}};f.exports=i}),null);
__d("XProfilePictureOverlayDonationAsyncDialogController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/donation_frames/donate_dialog/",{overlay_id:{type:"FBID",required:true},__asyncDialog:{type:"Int"}})}),null);
__d("ProfilePicOverlayLandingViewV2InitDesktop",["AsyncRequest","ProfilePicOverlayLandingViewV2Init","XProfilePictureOverlayDonationAsyncDialogController"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={init:function i(j,k){var l=null;if(k.containerDialog)l=function(m,n){return this._donateDialogCallback(k.containerDialog,n)}.bind(this);c("ProfilePicOverlayLandingViewV2Init").init(j,l)},_donateDialogCallback:function i(j,k){var l=c("XProfilePictureOverlayDonationAsyncDialogController").getURIBuilder().setFBID("overlay_id",k.id).getURI();new(c("AsyncRequest"))(l).setHandler(function(){return j.hide()}).send()}};f.exports=h}),null);